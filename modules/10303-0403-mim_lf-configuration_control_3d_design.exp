(*
 $Id: 10303-0403-mim_lf-configuration_control_3d_design.exp,v 1.1 2003/09/18 23:41:47 wg3convenor Exp $
 ISO TC184/SC4/WG3 N1202 - ISO/CD-TS 10303-403 Configuration control 3d design ed2 - EXPRESS MIM Long form
*) 


(* ===================================================================================== *)
(* Long form schema generated by The EXPRESS Data Manager EXPRESS Compiler version 9.5A1 *)
(* Mon Jul 14 11:28:02 2003                                                              *)
(* ===================================================================================== *)





SCHEMA Configuration_control_3d_design_ed2_mim; 


CONSTANT

    dummy_tri : topological_representation_item := representation_item('')||
                   topological_representation_item();        

  dummy_gri : geometric_representation_item :=  representation_item('')||
                                   geometric_representation_item();

END_CONSTANT;







TYPE ACTION_ITEMS = SELECT (
   CONFIGURATION_EFFECTIVITY,
   PRODUCT_DEFINITION,
   PRODUCT_DEFINITION_FORMATION,
   PRODUCT_DEFINITION_FORMATION_RELATIONSHIP,
   PRODUCT_DEFINITION_RELATIONSHIP);
END_TYPE;




TYPE ALIASABLE_ITEM = SELECT (
   DOCUMENT_FILE,
   PRODUCT,
   PRODUCT_DEFINITION,
   PRODUCT_DEFINITION_FORMATION,
   APPROVAL_STATUS,
   CONTRACT,
   ORGANIZATION,
   SECURITY_CLASSIFICATION_LEVEL);
END_TYPE;





TYPE APPROVAL_ITEM = SELECT (
   ACTION,
   ALTERNATE_PRODUCT_RELATIONSHIP,
   APPLIED_ACTION_ASSIGNMENT,
   ASSEMBLY_COMPONENT_USAGE_SUBSTITUTE,
   CONFIGURATION_EFFECTIVITY,
   DOCUMENT_FILE,
   EXECUTED_ACTION,
   PRODUCT,
   PRODUCT_DEFINITION,
   PRODUCT_DEFINITION_FORMATION,
   PRODUCT_DEFINITION_RELATIONSHIP,
   VERSIONED_ACTION_REQUEST,
   CERTIFICATION,
   CONTRACT);
END_TYPE;


  

TYPE CERTIFICATION_ITEM = SELECT (
   PRODUCT_DEFINITION_FORMATION_RELATIONSHIP);
END_TYPE;




TYPE CLASSIFICATION_ITEM = SELECT (
   DIMENSIONAL_SIZE,
   PLUS_MINUS_TOLERANCE,
   PRODUCT_DEFINITION,
   DOCUMENT_FILE);
END_TYPE;



   

TYPE CONTRACT_ITEM = SELECT (
   EXECUTED_ACTION,
   PRODUCT_DEFINITION_FORMATION);
END_TYPE;




TYPE terminator = SELECT
  (externally_defined_terminator_symbol,
   pre_defined_terminator_symbol,
   user_defined_terminator_symbol);
END_TYPE;


   

TYPE DATE_ITEM = SELECT (
   ACTION,
   APPLIED_ACTION_ASSIGNMENT,
   PRODUCT_DEFINITION,
   PRODUCT_DEFINITION_FORMATION,
   VERSIONED_ACTION_REQUEST,
   APPROVAL_PERSON_ORGANIZATION,
   APPLIED_ORGANIZATION_ASSIGNMENT,
   APPLIED_PERSON_AND_ORGANIZATION_ASSIGNMENT,
   APPLIED_SECURITY_CLASSIFICATION_ASSIGNMENT,
   CERTIFICATION,
   CONTRACT,
   SECURITY_CLASSIFICATION,
   EVENT_OCCURRENCE,
   ORGANIZATIONAL_PROJECT);
END_TYPE;


   

TYPE DATE_AND_TIME_ITEM = SELECT (
   ACTION,
   APPLIED_ACTION_ASSIGNMENT,
   PRODUCT_DEFINITION,
   PRODUCT_DEFINITION_FORMATION,
   VERSIONED_ACTION_REQUEST,
   APPROVAL_PERSON_ORGANIZATION,
   APPLIED_ORGANIZATION_ASSIGNMENT,
   APPLIED_PERSON_AND_ORGANIZATION_ASSIGNMENT,
   APPLIED_SECURITY_CLASSIFICATION_ASSIGNMENT,
   CERTIFICATION,
   CONTRACT,
   SECURITY_CLASSIFICATION,
   EVENT_OCCURRENCE,
   ORGANIZATIONAL_PROJECT);
END_TYPE;





TYPE DOCUMENT_REFERENCE_ITEM = SELECT (
   ACTION_METHOD,
   PRODUCT_DEFINITION_RELATIONSHIP,
   SHAPE_ASPECT,
   SHAPE_ASPECT_RELATIONSHIP,
   VERSIONED_ACTION_REQUEST,
   PRODUCT,
   PRODUCT_DEFINITION,
   PRODUCT_DEFINITION_FORMATION);
END_TYPE;



   

TYPE EFFECTIVITY_ITEM = SELECT (
   ASSEMBLY_COMPONENT_USAGE_SUBSTITUTE,
   PRODUCT,
   PRODUCT_DEFINITION,
   PRODUCT_DEFINITION_FORMATION,
   PRODUCT_DEFINITION_RELATIONSHIP);
END_TYPE;




TYPE EVENT_OCCURRENCE_ITEM = SELECT (
   ORGANIZATIONAL_PROJECT);
END_TYPE;




TYPE EXTERNAL_IDENTIFICATION_ITEM = SELECT (
   PRODUCT_DEFINITION,
   DOCUMENT_FILE);
END_TYPE;





TYPE IDENTIFICATION_ITEM = SELECT (
   GENERAL_PROPERTY,
   PRODUCT,
   PRODUCT_DEFINITION,
   PRODUCT_DEFINITION_FORMATION,
   SECURITY_CLASSIFICATION,
   SHAPE_ASPECT_RELATIONSHIP,
   DRAUGHTING_MODEL,
   MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION_REPRESENTATION,
   DIMENSIONAL_SIZE,
   APPROVAL_STATUS,
   CONTRACT,
   ORGANIZATION,
   SECURITY_CLASSIFICATION_LEVEL,
   SHAPE_REPRESENTATION,
   DOCUMENT_FILE);
END_TYPE;




TYPE VERSIONABLE_ITEM = SELECT (
   DRAUGHTING_MODEL,
   MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION_REPRESENTATION,
   SHAPE_REPRESENTATION,
   DOCUMENT_FILE);
END_TYPE;



TYPE ATTRIBUTE_LANGUAGE_ITEM = SELECT (
   MULTI_LANGUAGE_ATTRIBUTE_ASSIGNMENT,
   ALTERNATE_PRODUCT_RELATIONSHIP,
   APPLICATION_CONTEXT,
   APPLIED_CERTIFICATION_ASSIGNMENT,
   APPLIED_IDENTIFICATION_ASSIGNMENT,
   APPLIED_SECURITY_CLASSIFICATION_ASSIGNMENT,
   ASSEMBLY_COMPONENT_USAGE_SUBSTITUTE,
   ATTRIBUTE_VALUE_ASSIGNMENT,
   CONFIGURATION_DESIGN,
   CONFIGURATION_ITEM,
   DESCRIPTIVE_REPRESENTATION_ITEM,
   DOCUMENT_RELATIONSHIP,
   EFFECTIVITY,
   EFFECTIVITY_RELATIONSHIP,
   EVENT_OCCURRENCE,
   EXTERNAL_SOURCE,
   GENERAL_PROPERTY,
   GENERAL_PROPERTY_RELATIONSHIP,
   GEOMETRIC_REPRESENTATION_ITEM,
   GEOMETRIC_TOLERANCE,
   MAKE_FROM_USAGE_OPTION,
   MAPPED_ITEM,
   ORGANIZATION_ROLE,
   PERSON_AND_ORGANIZATION_ROLE,
   PRODUCT,
   PRODUCT_CATEGORY,
   PRODUCT_CONCEPT,
   PRODUCT_CONCEPT_RELATIONSHIP,
   PRODUCT_DEFINITION,
   PRODUCT_DEFINITION_CONTEXT,
   PRODUCT_DEFINITION_FORMATION,
   PRODUCT_DEFINITION_FORMATION_RELATIONSHIP,
   PRODUCT_DEFINITION_RELATIONSHIP,
   PRODUCT_DEFINITION_SHAPE,
   PRODUCT_RELATED_PRODUCT_CATEGORY,
   PROPERTY_DEFINITION,
   REPRESENTATION,
   SECURITY_CLASSIFICATION,
   SECURITY_CLASSIFICATION_ASSIGNMENT,
   SHAPE_ASPECT,
   SHAPE_ASPECT_RELATIONSHIP,
   SHAPE_REPRESENTATION,
   TIME_INTERVAL_ROLE,
   TOPOLOGICAL_REPRESENTATION_ITEM,
   UNCERTAINTY_MEASURE_WITH_UNIT,
   UNCERTAINTY_QUALIFIER,
   APPLIED_ORGANIZATIONAL_PROJECT_ASSIGNMENT,
   APPROVAL,
   APPROVAL_RELATIONSHIP,
   APPROVAL_STATUS,
   CERTIFICATION,
   CERTIFICATION_TYPE,
   CONTRACT,
   DATE_ROLE,
   DATE_TIME_ROLE,
   IDENTIFICATION_ROLE,
   ORGANIZATION_RELATIONSHIP,
   ORGANIZATIONAL_PROJECT,
   ORGANIZATIONAL_PROJECT_RELATIONSHIP,
   ORGANIZATIONAL_PROJECT_ROLE,
   PERSON_AND_ORGANIZATION);
END_TYPE;




TYPE MULTI_LANGUAGE_ATTRIBUTE_ITEM = SELECT (
   ALTERNATE_PRODUCT_RELATIONSHIP,
   APPLICATION_CONTEXT,
   APPLIED_CERTIFICATION_ASSIGNMENT,
   APPLIED_IDENTIFICATION_ASSIGNMENT,
   ASSEMBLY_COMPONENT_USAGE_SUBSTITUTE,
   ATTRIBUTE_VALUE_ASSIGNMENT,
   COLOUR,
   CONFIGURATION_DESIGN,
   CONFIGURATION_ITEM,
   DESCRIPTIVE_REPRESENTATION_ITEM,
   DOCUMENT_RELATIONSHIP,
   EFFECTIVITY,
   EFFECTIVITY_RELATIONSHIP,
   EVENT_OCCURRENCE,
   EXTERNAL_SOURCE,
   GENERAL_PROPERTY,
   GENERAL_PROPERTY_RELATIONSHIP,
   GEOMETRIC_REPRESENTATION_ITEM,
   GEOMETRIC_TOLERANCE,
   MAKE_FROM_USAGE_OPTION,
   MAPPED_ITEM,
   ORGANIZATION_ROLE,
   PERSON_AND_ORGANIZATION_ROLE,
   PRODUCT,
   PRODUCT_CATEGORY,
   PRODUCT_CONCEPT,
   PRODUCT_CONCEPT_RELATIONSHIP,
   PRODUCT_DEFINITION,
   PRODUCT_DEFINITION_CONTEXT,
   PRODUCT_DEFINITION_FORMATION,
   PRODUCT_DEFINITION_FORMATION_RELATIONSHIP,
   PRODUCT_DEFINITION_RELATIONSHIP,
   PRODUCT_DEFINITION_SHAPE,
   PRODUCT_RELATED_PRODUCT_CATEGORY,
   PROPERTY_DEFINITION,
   REPRESENTATION,
   REPRESENTATION_RELATIONSHIP,
   SECURITY_CLASSIFICATION,
   SECURITY_CLASSIFICATION_ASSIGNMENT,
   SHAPE_ASPECT,
   SHAPE_ASPECT_RELATIONSHIP,
   SHAPE_REPRESENTATION,
   TIME_INTERVAL_ROLE,
   TOPOLOGICAL_REPRESENTATION_ITEM,
   UNCERTAINTY_MEASURE_WITH_UNIT,
   APPLIED_ORGANIZATIONAL_PROJECT_ASSIGNMENT,
   APPROVAL,
   APPROVAL_RELATIONSHIP,
   APPROVAL_STATUS,
   CERTIFICATION,
   CERTIFICATION_TYPE,
   CONTRACT,
   DATE_ROLE,
   DATE_TIME_ROLE,
   IDENTIFICATION_ROLE,
   ORGANIZATION_RELATIONSHIP,
   ORGANIZATIONAL_PROJECT,
   ORGANIZATIONAL_PROJECT_RELATIONSHIP,
   ORGANIZATIONAL_PROJECT_ROLE,
   PERSON_AND_ORGANIZATION);
END_TYPE;



   

TYPE ORGANIZATION_ITEM = SELECT (
   ACTION,
   ALTERNATE_PRODUCT_RELATIONSHIP,
   APPLIED_ACTION_ASSIGNMENT,
   APPROVAL,
   ASSEMBLY_COMPONENT_USAGE_SUBSTITUTE,
   CERTIFICATION,
   CONFIGURATION_ITEM,
   DOCUMENT_FILE,
   EXECUTED_ACTION,
   GENERAL_PROPERTY,
   ORGANIZATIONAL_PROJECT,
   PRODUCT_DEFINITION_FORMATION_RELATIONSHIP,
   PROPERTY_DEFINITION,
   SECURITY_CLASSIFICATION,
   SHAPE_REPRESENTATION,
   VERSIONED_ACTION_REQUEST,
   APPLIED_IDENTIFICATION_ASSIGNMENT,
   APPLIED_SECURITY_CLASSIFICATION_ASSIGNMENT,
   CONTRACT,
   PRODUCT,
   PRODUCT_DEFINITION,
   PRODUCT_DEFINITION_FORMATION);
END_TYPE;



   

TYPE PERSON_AND_ORGANIZATION_ITEM = SELECT (
   ACTION,
   ALTERNATE_PRODUCT_RELATIONSHIP,
   APPLIED_ACTION_ASSIGNMENT,
   APPROVAL,
   ASSEMBLY_COMPONENT_USAGE_SUBSTITUTE,
   CERTIFICATION,
   CONFIGURATION_ITEM,
   DOCUMENT_FILE,
   EXECUTED_ACTION,
   GENERAL_PROPERTY,
   ORGANIZATIONAL_PROJECT,
   PRODUCT_DEFINITION_FORMATION_RELATIONSHIP,
   PROPERTY_DEFINITION,
   SECURITY_CLASSIFICATION,
   SHAPE_REPRESENTATION,
   VERSIONED_ACTION_REQUEST,
   APPLIED_IDENTIFICATION_ASSIGNMENT,
   APPLIED_SECURITY_CLASSIFICATION_ASSIGNMENT,
   CONTRACT,
   PRODUCT,
   PRODUCT_DEFINITION,
   PRODUCT_DEFINITION_FORMATION);
END_TYPE;





TYPE PROJECT_ITEM = SELECT (
   EXECUTED_ACTION,
   PRODUCT_CONCEPT);
END_TYPE;


  

TYPE SECURITY_CLASSIFICATION_ITEM = SELECT (
   ASSEMBLY_COMPONENT_USAGE,
   PRODUCT_DEFINITION_USAGE,
   DOCUMENT_FILE,
   PRODUCT,
   PRODUCT_DEFINITION,
   PRODUCT_DEFINITION_FORMATION);
END_TYPE;





TYPE TIME_INTERVAL_ITEM = SELECT (
   TIME_INTERVAL_BASED_EFFECTIVITY);
END_TYPE;




 TYPE list_of_reversible_topology_item =
                               LIST [0:?] of reversible_topology_item;
 END_TYPE;



 TYPE reversible_topology = SELECT
           (reversible_topology_item,
            list_of_reversible_topology_item,
            set_of_reversible_topology_item);
 END_TYPE;



 TYPE reversible_topology_item = SELECT
   (edge, 
    path, 
    face, 
    face_bound,
    closed_shell, 
    open_shell);
 END_TYPE;



  TYPE set_of_reversible_topology_item =
                       SET [0:?] of reversible_topology_item;
  END_TYPE;



 TYPE shell = SELECT
   (vertex_shell,
    wire_shell,
    open_shell,
    closed_shell);
 END_TYPE;




TYPE ACTION_REQUEST_ITEM = SELECT (
   PRODUCT_DEFINITION,
   PRODUCT_DEFINITION_FORMATION,
   PRODUCT_DEFINITION_FORMATION_RELATIONSHIP,
   PRODUCT_DEFINITION_RELATIONSHIP,
   PROPERTY_DEFINITION);
END_TYPE;




TYPE text_delineation = label;
END_TYPE;



TYPE defined_symbol_select = SELECT
  (pre_defined_symbol,
   externally_defined_symbol);
END_TYPE;



TYPE text_or_character = SELECT
  (annotation_text,
   annotation_text_character,
   defined_character_glyph,
   composite_text,
   text_literal);
END_TYPE;



TYPE text_alignment = label;
END_TYPE;



TYPE defined_glyph_select = SELECT
  (pre_defined_character_glyph,
   externally_defined_character_glyph);
END_TYPE;



TYPE text_path = ENUMERATION OF
  (left,
   right,
   up,
   down);
END_TYPE;



TYPE marker_select = SELECT
  (marker_type,
   pre_defined_marker);
END_TYPE;



TYPE marker_type = ENUMERATION OF
  (dot,
   x,
   plus,
   asterisk,
   ring,
   square,
   triangle);
END_TYPE;



TYPE identifier = STRING;
END_TYPE;



TYPE compound_item_definition = SELECT
  (list_representation_item,
   set_representation_item);
END_TYPE;



TYPE set_representation_item = SET [1:?] OF representation_item;
END_TYPE;




TYPE list_of_two_representation_items = list_representation_item;
WHERE
  WR1: HIINDEX(SELF) = 2;
END_TYPE;



TYPE value_qualifier = SELECT
  (precision_qualifier,
   type_qualifier,
   uncertainty_qualifier);
END_TYPE;



TYPE angle_relator = ENUMERATION OF
  (equal,
   large,
   small);
END_TYPE;



TYPE dimensional_characteristic = SELECT (dimensional_location,
                                          dimensional_size);
END_TYPE;



TYPE tolerance_method_definition = SELECT
  (tolerance_value,
   limits_and_fits);
END_TYPE;



TYPE CHARACTERIZED_ACTION_DEFINITION = SELECT (
   ACTION,
   ACTION_METHOD,
   ACTION_RELATIONSHIP);
END_TYPE;




TYPE DERIVED_PROPERTY_SELECT = SELECT (
   ACTION_PROPERTY,
   PROPERTY_DEFINITION);
END_TYPE;




TYPE characterized_product_definition = SELECT
   (product_definition, 
    product_definition_relationship);
END_TYPE;



TYPE surface_side = ENUMERATION OF
  (positive,
   negative,
   both);
END_TYPE;



TYPE SURFACE_STYLE_ELEMENT_SELECT = SELECT (
   SURFACE_STYLE_FILL_AREA,
   SURFACE_STYLE_BOUNDARY,
   SURFACE_STYLE_SILHOUETTE,
   SURFACE_STYLE_SEGMENTATION_CURVE,
   SURFACE_STYLE_CONTROL_GRID,
   SURFACE_STYLE_PARAMETER_LINE);
END_TYPE;




TYPE u_direction_count = INTEGER;
WHERE
  WR1: SELF > 1;
END_TYPE;



TYPE v_direction_count = INTEGER;
WHERE
  WR1: SELF > 1;
END_TYPE;




TYPE amount_of_substance_measure = REAL;
END_TYPE;



TYPE area_measure = REAL;
END_TYPE;



TYPE celsius_temperature_measure = REAL;
END_TYPE;



TYPE context_dependent_measure = REAL;
END_TYPE;



TYPE count_measure = NUMBER;
END_TYPE;



TYPE descriptive_measure = STRING;
END_TYPE;



TYPE electric_current_measure = REAL;
END_TYPE;



TYPE length_measure = REAL;
END_TYPE;



TYPE luminous_intensity_measure = REAL;
END_TYPE;



TYPE mass_measure = REAL;
END_TYPE;



TYPE measure_value = SELECT
   (amount_of_substance_measure, 
    area_measure, 
    celsius_temperature_measure, 
    context_dependent_measure, 
    count_measure, 
    descriptive_measure, 
    electric_current_measure, 
    length_measure, 
    luminous_intensity_measure, 
    mass_measure, 
    numeric_measure, 
    parameter_value, 
    plane_angle_measure, 
    positive_length_measure, 
    positive_plane_angle_measure, 
    positive_ratio_measure, 
    ratio_measure, 
    solid_angle_measure, 
    thermodynamic_temperature_measure, 
    time_measure, 
    volume_measure);
END_TYPE;



TYPE numeric_measure = NUMBER;
END_TYPE;



TYPE parameter_value = REAL;
END_TYPE;



TYPE plane_angle_measure = REAL;
END_TYPE;



TYPE positive_length_measure = length_measure;
WHERE
  WR1: SELF > 0.0;
END_TYPE;



TYPE positive_plane_angle_measure = plane_angle_measure;
WHERE
  WR1: SELF > 0.0;
END_TYPE;



TYPE positive_ratio_measure = ratio_measure;
WHERE
  WR1: SELF > 0.0;
END_TYPE;



TYPE ratio_measure = REAL;
END_TYPE;



TYPE si_prefix = ENUMERATION OF 
   (exa,
    peta,
    tera,
    giga,
    mega,
    kilo,
    hecto,
    deca,
    deci,
    centi,
    milli,
    micro,
    nano,
    pico,
    femto,
    atto);
END_TYPE;



TYPE si_unit_name = ENUMERATION OF 
   (metre,
    gram,
    second,
    ampere,
    kelvin,
    mole,
    candela,
    radian,
    steradian,
    hertz,
    newton,
    pascal,
    joule,
    watt,
    coulomb,
    volt,
    farad,
    ohm,
    siemens,
    weber,
    tesla,
    henry,
    degree_Celsius,
    lumen,
    lux,
    becquerel,
    gray,
    sievert);
END_TYPE;



TYPE solid_angle_measure = REAL;
END_TYPE;



TYPE thermodynamic_temperature_measure = REAL;
END_TYPE;



TYPE time_measure = REAL;
END_TYPE;



TYPE unit = SELECT
   (derived_unit, 
    named_unit);
END_TYPE;



TYPE volume_measure = REAL;
END_TYPE;



TYPE box_height = positive_ratio_measure;
END_TYPE;



TYPE box_width = positive_ratio_measure;
END_TYPE;



TYPE  box_slant_angle = plane_angle_measure;
END_TYPE;



TYPE box_rotate_angle = plane_angle_measure;
END_TYPE;



TYPE font_select = SELECT
  (pre_defined_text_font,
   externally_defined_text_font);
END_TYPE;



TYPE null_style = ENUMERATION OF
  (null);
END_TYPE;



TYPE list_representation_item = LIST [1:?] OF representation_item;
END_TYPE;



TYPE label = STRING;
END_TYPE;



TYPE text = STRING;
END_TYPE;



TYPE id_attribute_select = SELECT
   (action, 
    address, 
    application_context, 
    group, 
    organizational_project, 
    product_category, 
    property_definition, 
    representation, 
    shape_aspect, 
    shape_aspect_relationship);
END_TYPE;




TYPE DESCRIPTION_ATTRIBUTE_SELECT = SELECT (
   ACTION_REQUEST_SOLUTION,
   APPLICATION_CONTEXT,
   APPROVAL_ROLE,
   CONFIGURATION_DESIGN,
   CONTEXT_DEPENDENT_SHAPE_REPRESENTATION,
   DATE_ROLE,
   DATE_TIME_ROLE,
   EFFECTIVITY,
   EXTERNAL_SOURCE,
   ORGANIZATION_ROLE,
   PERSON_AND_ORGANIZATION,
   PERSON_AND_ORGANIZATION_ROLE,
   PROPERTY_DEFINITION_REPRESENTATION,
   REPRESENTATION);
END_TYPE;





TYPE person_organization_select = SELECT
   (organization, 
    person, 
    person_and_organization);
END_TYPE;



TYPE configuration_design_item = SELECT
   (product_definition,
    product_definition_formation);
END_TYPE;



TYPE NAME_ATTRIBUTE_SELECT = SELECT (
   ACTION_REQUEST_SOLUTION,
   ADDRESS,
   CONFIGURATION_DESIGN,
   CONTEXT_DEPENDENT_SHAPE_REPRESENTATION,
   DERIVED_UNIT,
   EFFECTIVITY,
   PERSON_AND_ORGANIZATION,
   PRODUCT_DEFINITION,
   PROPERTY_DEFINITION_REPRESENTATION);
END_TYPE;




TYPE SOURCE_ITEM = SELECT (
   IDENTIFIER);
END_TYPE;




TYPE dimension_count = INTEGER;
WHERE
  WR1: SELF > 0;
END_TYPE;



TYPE founded_item_select = SELECT
  (founded_item,
   representation_item);
END_TYPE;




TYPE attribute_type = SELECT
   (label, 
    text);
END_TYPE;



TYPE ROLE_SELECT = SELECT (
   ACTION_ASSIGNMENT,
   ACTION_REQUEST_ASSIGNMENT,
   APPROVAL_ASSIGNMENT,
   APPROVAL_DATE_TIME,
   CERTIFICATION_ASSIGNMENT,
   CONTRACT_ASSIGNMENT,
   DOCUMENT_REFERENCE,
   EFFECTIVITY_ASSIGNMENT,
   SECURITY_CLASSIFICATION_ASSIGNMENT);
END_TYPE;




TYPE CURVE_FONT_OR_SCALED_CURVE_FONT_SELECT = SELECT (
   CURVE_STYLE_FONT_SELECT);
END_TYPE;




TYPE SIZE_SELECT = SELECT (
   POSITIVE_LENGTH_MEASURE,
   MEASURE_WITH_UNIT,
   DESCRIPTIVE_MEASURE);
END_TYPE;





TYPE characterized_definition = SELECT
   (characterized_object, 
    characterized_product_definition, 
    shape_definition);
END_TYPE;



TYPE invisible_item = SELECT 
  (styled_item,
   presentation_layer_assignment,
   representation);
END_TYPE;



TYPE PRESENTATION_STYLE_SELECT = SELECT (
   POINT_STYLE,
   CURVE_STYLE,
   SURFACE_STYLE_USAGE,
   SYMBOL_STYLE,
   FILL_AREA_STYLE,
   TEXT_STYLE,
   NULL_STYLE);
END_TYPE;


 


TYPE style_context_select = SELECT
  (group,
   presentation_layer_assignment,
   representation,
   representation_item,
   presentation_set);
END_TYPE;



TYPE date_time_select = SELECT
   (date, 
    date_and_time, 
    local_time);
END_TYPE;



 TYPE axis2_placement = SELECT
   (axis2_placement_2d, 
    axis2_placement_3d);
 END_TYPE;



TYPE presentable_text = STRING;
END_TYPE;



 TYPE b_spline_curve_form = ENUMERATION OF
   (polyline_form,
    circular_arc,
    elliptic_arc,
    parabolic_arc,
    hyperbolic_arc,
    unspecified);
 END_TYPE;



 TYPE b_spline_surface_form = ENUMERATION OF
   (plane_surf,
    cylindrical_surf,
    conical_surf,
    spherical_surf,
    toroidal_surf,
    surf_of_revolution,
    ruled_surf,
    generalised_cone,
    quadric_surf,
    surf_of_linear_extrusion,
    unspecified);
 END_TYPE;



 TYPE pcurve_or_surface = SELECT
   (pcurve, 
    surface);
 END_TYPE;



 TYPE preferred_surface_curve_representation = ENUMERATION OF 
   (curve_3d,
    pcurve_s1, 
    pcurve_s2);
 END_TYPE;



 TYPE curve_on_surface = SELECT
   (pcurve, 
    surface_curve, 
    composite_curve_on_surface);
 END_TYPE;



 TYPE trimming_select = SELECT 
   (cartesian_point, 
    parameter_value);
 END_TYPE;



 TYPE trimming_preference = ENUMERATION OF 
   (cartesian,
    parameter,
    unspecified);
 END_TYPE;



 TYPE boolean_operator = ENUMERATION OF 
   (union, 
    intersection, 
    difference);
 END_TYPE;



TYPE BOOLEAN_OPERAND = SELECT (
   SOLID_MODEL,
   HALF_SPACE_SOLID,
   CSG_PRIMITIVE,
   BOOLEAN_RESULT);
END_TYPE;




 TYPE vector_or_direction = SELECT
   (vector, 
    direction);
 END_TYPE;



 TYPE csg_select = SELECT
   (boolean_result,
    csg_primitive);
 END_TYPE;



TYPE day_in_month_number = INTEGER;
WHERE
  WR1: {1 <= SELF <= 31};
END_TYPE;



TYPE month_in_year_number = INTEGER;
WHERE
  WR1: { 1 <= SELF <= 12 };
END_TYPE;



TYPE year_number = INTEGER;
END_TYPE;



TYPE hour_in_day = INTEGER;
WHERE
  WR1: { 0 <= SELF < 24 };
END_TYPE;



TYPE minute_in_hour = INTEGER;
WHERE
  WR1: { 0 <= SELF <= 59 };
END_TYPE;



TYPE second_in_minute = REAL;
WHERE
  WR1: { 0 <= SELF <= 60.0 };
END_TYPE;




TYPE ahead_or_behind = ENUMERATION OF 
   (ahead,
    exact,
    behind);
END_TYPE;




TYPE product_or_formation_or_definition = SELECT
   (product, 
    product_definition_formation, 
    product_definition);
END_TYPE;



TYPE date_time_or_event_occurrence = SELECT
   (date_time_select, 
    event_occurrence);
END_TYPE;




TYPE REPRESENTED_DEFINITION = SELECT (
   GENERAL_PROPERTY,
   PROPERTY_DEFINITION,
   SHAPE_ASPECT,
   SHAPE_ASPECT_RELATIONSHIP);
END_TYPE;




TYPE transformation = SELECT
  (item_defined_transformation,
   functionally_defined_transformation);
END_TYPE;



TYPE curve_or_annotation_curve_occurrence = SELECT
  (curve,
   annotation_curve_occurrence);
END_TYPE;



TYPE CURVE_OR_RENDER = SELECT (
   CURVE_STYLE);
END_TYPE;




TYPE direction_count_select = SELECT
  (u_direction_count,
   v_direction_count);
END_TYPE;



TYPE SURFACE_SIDE_STYLE_SELECT = SELECT (
   SURFACE_SIDE_STYLE);
END_TYPE;




TYPE layered_item = SELECT 
  (presentation_representation,
   representation_item);
END_TYPE;



TYPE draughting_callout_element = SELECT
  (annotation_text_occurrence, 
   annotation_symbol_occurrence,
   annotation_curve_occurrence);
END_TYPE;



TYPE area_or_view = SELECT 
  (presentation_area,
   presentation_view);
END_TYPE;



TYPE central_or_parallel = ENUMERATION OF 
  (central, 
   parallel);
END_TYPE;



TYPE presentation_size_assignment_select = SELECT 
  (presentation_view,
   presentation_area,
   area_in_set);
END_TYPE;



TYPE character_style_select = SELECT
  (character_glyph_style_stroke,
   character_glyph_style_outline,
   text_style_for_defined_font);
END_TYPE;



TYPE box_characteristic_select = SELECT
  (box_height,
   box_width,
   box_slant_angle,
   box_rotate_angle);
END_TYPE;



TYPE CHARACTER_SPACING_SELECT = SELECT (
   LENGTH_MEASURE,
   RATIO_MEASURE,
   MEASURE_WITH_UNIT,
   DESCRIPTIVE_MEASURE);
END_TYPE;




TYPE INVISIBILITY_CONTEXT = SELECT (
   PRESENTATION_REPRESENTATION,
   PRESENTATION_SET);
END_TYPE;




TYPE FILL_STYLE_SELECT = SELECT (
   FILL_AREA_STYLE_COLOUR,
   EXTERNALLY_DEFINED_TILE_STYLE,
   FILL_AREA_STYLE_TILES,
   EXTERNALLY_DEFINED_HATCH_STYLE,
   FILL_AREA_STYLE_HATCHING);
END_TYPE;




TYPE fill_area_style_tile_shape_select = SELECT
  (fill_area_style_tile_curve_with_style,
   fill_area_style_tile_coloured_region,
   fill_area_style_tile_symbol_with_style,
   pre_defined_tile,
   externally_defined_tile);
END_TYPE;



TYPE SYMBOL_STYLE_SELECT = SELECT (
   SYMBOL_COLOUR);
END_TYPE;




TYPE dimension_extent_usage = ENUMERATION OF
  (origin,
   target);
END_TYPE;



 TYPE knot_type = ENUMERATION OF 
   (uniform_knots,
    quasi_uniform_knots,
    piecewise_bezier_knots,
    unspecified);
 END_TYPE;



TYPE limit_condition = ENUMERATION OF
  (maximum_material_condition,
   least_material_condition,
   regardless_of_feature_size);
END_TYPE;



 TYPE geometric_set_select = SELECT
   (point,
    curve,
    surface);
 END_TYPE;



 TYPE transition_code = ENUMERATION OF 
   (discontinuous,
    continuous,
    cont_same_gradient,
    cont_same_gradient_same_curvature);
 END_TYPE;




TYPE supported_item = SELECT
   (action, 
    action_directive, 
    action_method);
END_TYPE;



TYPE shape_definition = SELECT
   (product_definition_shape, 
    shape_aspect, 
    shape_aspect_relationship);
END_TYPE;



TYPE  shape_tolerance_select = SELECT
     (geometric_tolerance,
      plus_minus_tolerance);
END_TYPE;



TYPE surface_boundary = SELECT
   (boundary_curve,
    degenerate_pcurve);
END_TYPE;



TYPE CSG_PRIMITIVE = SELECT (
   SPHERE,
   ELLIPSOID,
   BLOCK,
   RIGHT_ANGULAR_WEDGE,
   FACETED_PRIMITIVE,
   RECTANGULAR_PYRAMID,
   TORUS,
   RIGHT_CIRCULAR_CONE,
   ECCENTRIC_CONE,
   RIGHT_CIRCULAR_CYLINDER,
   CYCLIDE_SEGMENT_SOLID);
END_TYPE;




TYPE curve_style_font_select = SELECT
  (curve_style_font,
   pre_defined_curve_font,
   externally_defined_curve_font);
END_TYPE;



TYPE presentation_representation_select = SELECT 
  (presentation_representation,
   presentation_set);
END_TYPE;



 TYPE wireframe_model = SELECT
   (shell_based_wireframe_model,
    edge_based_wireframe_model);
 END_TYPE;



TYPE SURFACE_MODEL = SELECT (
   SHELL_BASED_SURFACE_MODEL);
END_TYPE;




ENTITY action;
  name : label;
  description : OPTIONAL text;
  chosen_method : action_method;
DERIVE
  id : identifier := get_id_value (SELF);
WHERE
  WR1: SIZEOF (USEDIN (SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'ID_ATTRIBUTE.IDENTIFIED_ITEM')) <= 1;

END_ENTITY;



ENTITY action_method;
  name : label;
  description : OPTIONAL text;
  consequence : text;
  purpose : text;
END_ENTITY;



ENTITY executed_action
  SUBTYPE OF (action);
END_ENTITY;



ENTITY versioned_action_request;
  id : identifier;
  version : label;
  purpose : text;
  description : OPTIONAL text;
END_ENTITY;



ENTITY applied_action_assignment
SUBTYPE OF (action_assignment);
  items : SET [1 : ?] OF action_items;
END_ENTITY;




ENTITY application_context;
  application : label;
DERIVE
  description : text := get_description_value (SELF);
  id : identifier := get_id_value (SELF);
INVERSE
  context_elements : SET[1:?] OF application_context_element FOR frame_of_reference;
WHERE
  WR1: SIZEOF (USEDIN (SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'DESCRIPTION_ATTRIBUTE.DESCRIBED_ITEM')) <= 1;
  WR2: SIZEOF (USEDIN (SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'ID_ATTRIBUTE.IDENTIFIED_ITEM')) <= 1;

END_ENTITY;



ENTITY product_definition_context
  SUBTYPE OF (application_context_element);
  life_cycle_stage : label;
END_ENTITY;



ENTITY applied_approval_assignment
  SUBTYPE OF (approval_assignment);
  items : SET [1:?] OF approval_item;
END_ENTITY;




ENTITY approval;
  status : approval_status;
  level : label;
END_ENTITY;



ENTITY approval_person_organization;
  person_organization : person_organization_select;
  authorized_approval : approval;
  role : approval_role;
END_ENTITY;



ENTITY approval_relationship;
  name : label;
  description : OPTIONAL text;
  relating_approval : approval;
  related_approval : approval;
END_ENTITY;



ENTITY approval_status;
  name : label;
END_ENTITY;

   

ENTITY applied_certification_assignment
  SUBTYPE OF (certification_assignment);
  items : SET [1:?] OF certification_item;
END_ENTITY;




ENTITY certification;
  name : label;
  purpose : text;
  kind : certification_type;
END_ENTITY;



ENTITY applied_classification_assignment
SUBTYPE OF (classification_assignment);
   items : SET [1:?] OF classification_item; 
END_ENTITY;



ENTITY configuration_design;
  configuration : configuration_item;
  design        : configuration_design_item;
DERIVE
  name          : label := get_name_value (SELF);
  description   : text := get_description_value (SELF);
UNIQUE
  UR1: configuration, design;
WHERE
  WR1: SIZEOF (USEDIN (SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
                             'NAME_ATTRIBUTE.NAMED_ITEM')) <= 1;
  WR2: SIZEOF (USEDIN (SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +

                             'DESCRIPTION_ATTRIBUTE.DESCRIBED_ITEM')) <= 1;
END_ENTITY;



ENTITY configuration_effectivity
  SUBTYPE OF (product_definition_effectivity);
  configuration : configuration_design;
UNIQUE
  UR1: configuration,
       usage,
       id;
WHERE
  WR1: 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PRODUCT_DEFINITION_USAGE' IN

        TYPEOF (SELF\product_definition_effectivity.usage);
END_ENTITY;



ENTITY configuration_item;
   id                  :  identifier;
   name                :  label;
   description         :  OPTIONAL text;
   item_concept        :  product_concept;
   purpose             :  OPTIONAL label;
END_ENTITY;




ENTITY constructive_geometry_representation
  SUBTYPE OF (representation);
WHERE
  WR1: ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.GEOMETRIC_REPRESENTATION_CONTEXT' IN TYPEOF(SELF.context_of_items)) AND ({2 <= SELF.context_of_items\geometric_representation_context. coordinate_space_dimension <= 3});
  WR2: SIZEOF( QUERY( cgr_i <* SELF.items | SIZEOF(['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PLACEMENT', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CURVE', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.EDGE', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.FACE', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.POINT', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SURFACE', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.FACE_SURFACE', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.VERTEX_POINT'] * TYPEOF(cgr_i)) <> 1 )) = 0;
  WR3: SIZEOF( USEDIN( SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'REPRESENTATION_RELATIONSHIP.REP_2') ) > 0;
  WR4: SIZEOF( USEDIN( SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'REPRESENTATION_MAP.MAPPED_REPRESENTATION') ) = 0;

END_ENTITY;



ENTITY constructive_geometry_representation_relationship
  SUBTYPE OF (representation_relationship);
WHERE
  WR1: (SELF.rep_1.context_of_items :=: SELF.rep_2.context_of_items) AND ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.GEOMETRIC_REPRESENTATION_CONTEXT' IN TYPEOF(SELF.rep_1.context_of_items));
  WR2: 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CONSTRUCTIVE_GEOMETRY_REPRESENTATION' IN TYPEOF(SELF.rep_2);
  WR3: SIZEOF(['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SHAPE_REPRESENTATION', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CONSTRUCTIVE_GEOMETRY_REPRESENTATION'] * TYPEOF(SELF.rep_1)) = 1;
  WR4: NOT('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'REPRESENTATION_RELATIONSHIP_WITH_TRANSFORMATION' IN TYPEOF(SELF));

END_ENTITY;

   
   

ENTITY applied_contract_assignment
  SUBTYPE OF (contract_assignment);
  items : SET [1:?] OF contract_item;
END_ENTITY;




ENTITY contract;
  name : label;
  purpose : text;
  kind : contract_type;
END_ENTITY;



 ENTITY externally_defined_marker
  SUBTYPE OF (externally_defined_symbol, pre_defined_marker);
END_ENTITY;



ENTITY externally_defined_terminator_symbol
  SUBTYPE OF (externally_defined_symbol);
END_ENTITY;



ENTITY pre_defined_terminator_symbol
  SUBTYPE OF (pre_defined_symbol);
WHERE
  WR1: SELF.name IN ['blanked arrow', 'blanked box',
       'blanked dot', 'dimension origin', 'filled arrow',
       'filled box', 'filled dot', 'integral symbol',
       'open arrow', 'slash', 'unfilled arrow'];
END_ENTITY;



ENTITY user_defined_curve_font
  SUBTYPE OF (curve_style_font, mapped_item);
END_ENTITY;



ENTITY user_defined_marker
  SUBTYPE OF (pre_defined_marker, mapped_item);
END_ENTITY;



ENTITY user_defined_terminator_symbol
  SUBTYPE OF (pre_defined_symbol, mapped_item);
END_ENTITY;



ENTITY vector_style
  SUBTYPE OF (curve_style, pre_defined_terminator_symbol);
END_ENTITY;

   

ENTITY applied_date_and_time_assignment
  SUBTYPE OF (date_and_time_assignment);
  items : SET [1:?] OF date_and_time_item;
END_ENTITY;

   

ENTITY applied_date_assignment
  SUBTYPE OF (date_assignment);
  items : SET [1:?] OF date_item;
END_ENTITY;



ENTITY date_role;
  name : label;
DERIVE
  description : text := get_description_value (SELF);
WHERE
  WR1: SIZEOF (USEDIN (SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'DESCRIPTION_ATTRIBUTE.DESCRIBED_ITEM')) <= 1;

END_ENTITY;



ENTITY date_time_role;
  name : label;
DERIVE
  description : text := get_description_value (SELF);
WHERE
  WR1: SIZEOF (USEDIN (SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'DESCRIPTION_ATTRIBUTE.DESCRIBED_ITEM')) <= 1;

END_ENTITY;



ENTITY event_occurrence;
  id : identifier;
  name : label;
  description : OPTIONAL text;
END_ENTITY;



ENTITY time_interval_role;
  name : label;
  description : OPTIONAL text;
END_ENTITY;




ENTITY default_tolerance_table
  SUBTYPE OF (representation);
WHERE
  WR1: SIZEOF( QUERY( i <* SELF.items | NOT('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.DEFAULT_TOLERANCE_TABLE_CELL' IN TYPEOF(i)) )) = 0;
  WR2: (SIZEOF( QUERY( rr <* USEDIN(SELF,'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'REPRESENTATION_RELATIONSHIP.REP_1') | rr.name < 'general tolerance definition' )) = 0) AND (SIZEOF( QUERY( rr <* USEDIN(SELF,'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'REPRESENTATION_RELATIONSHIP.REP_1') | (rr.name = 'general tolerance definition') AND (rr.rep_2.name < 'default tolerance') )) = 0) AND (SIZEOF( USEDIN(SELF,'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'REPRESENTATION_RELATIONSHIP.REP_2') ) = 0);

END_ENTITY;



ENTITY default_tolerance_table_cell
  SUBTYPE OF (compound_representation_item);
WHERE
  WR1: SIZEOF(QUERY( x <* USEDIN(SELF,'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'REPRESENTATION.ITEMS') | 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'DEFAULT_TOLERANCE_TABLE' IN TYPEOF(x)))=1 ;

  WR2: default_tolerance_table_cell_wr2(SELF\compound_representation_item.item_element);
  WR3: default_tolerance_table_cell_wr3(SELF\compound_representation_item.item_element);
  WR4: default_tolerance_table_cell_wr4(SELF\compound_representation_item.item_element);
  WR5: default_tolerance_table_cell_wr5(SELF\compound_representation_item.item_element);
END_ENTITY;



ENTITY directed_dimensional_location
  SUBTYPE OF (dimensional_location);
END_ENTITY;



ENTITY applied_document_reference
SUBTYPE OF (document_reference);
  items : SET [1 : ?] OF document_reference_item;
END_ENTITY;



ENTITY applied_document_usage_constraint_assignment
SUBTYPE OF (document_usage_constraint_assignment);
  items : SET [1 : ?] OF document_reference_item;
END_ENTITY;



ENTITY document_product_equivalence
SUBTYPE OF (document_product_association);
WHERE
WR1: SELF\document_product_association.name = 'equivalence';
WR2: NOT('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PRODUCT' IN TYPEOF(SELF\document_product_association.related_product)) 
   OR ((SELF\document_product_association.relating_document.kind. product_data_type = 'configuration controlled document') 
   AND (SIZEOF( QUERY( prpc <* USEDIN(SELF\document_product_association.related_product,'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'PRODUCT_RELATED_PRODUCT_CATEGORY.PRODUCTS') | 
   prpc.name = 'document' )) = 1)); 
WR3: NOT('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PRODUCT_DEFINITION_FORMATION' IN TYPEOF(SELF.related_product)) 
   OR ((SELF\document_product_association.relating_document.kind.product_data_type = 'configuration controlled document version') 
   AND (SIZEOF( QUERY( prpc <* USEDIN(SELF.related_product\product_definition_formation.of_product, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PRODUCT_RELATED_PRODUCT_CATEGORY.PRODUCTS') | 
   prpc.name = 'document')) = 1)); 
WR4: NOT('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PRODUCT_DEFINITION' IN TYPEOF(SELF.related_product)) 
   OR ((SELF\document_product_association.relating_document.kind.product_data_type = 'configuration controlled document definition') 
   AND (SIZEOF( QUERY( prpc <* USEDIN(SELF\document_product_association.related_product\product_definition.formation.of_product, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PRODUCT_RELATED_PRODUCT_CATEGORY.PRODUCTS') | 

  prpc.name = 'document' )) = 1)); 

END_ENTITY;



ENTITY document_relationship;
  name : label;
  description : OPTIONAL text;
  relating_document : document;
  related_document : document;
END_ENTITY;

   

ENTITY applied_effectivity_assignment
  SUBTYPE OF (effectivity_assignment);
  items : SET [1:?] of effectivity_item;
END_ENTITY;



ENTITY effectivity
  SUPERTYPE OF (ONEOF (
              SERIAL_NUMBERED_EFFECTIVITY,
              DATED_EFFECTIVITY,
              LOT_EFFECTIVITY,
              TIME_INTERVAL_BASED_EFFECTIVITY));
  id : identifier;
DERIVE
  name : label := get_name_value(SELF);
  description : text := get_description_value(SELF);
WHERE
  WR1: SIZEOF(USEDIN(SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'NAME_ATTRIBUTE.NAMED_ITEM')) <= 1;
  WR2: SIZEOF(USEDIN(SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'DESCRIPTION_ATTRIBUTE.DESCRIBED_ITEM')) <= 1;

END_ENTITY;



ENTITY effectivity_relationship;
  name : label;
  description : OPTIONAL text;
  related_effectivity : effectivity;
  relating_effectivity : effectivity;
END_ENTITY;



ENTITY time_interval_based_effectivity
  SUBTYPE OF (effectivity);
  effectivity_period : time_interval;
END_ENTITY;



ENTITY applied_event_occurrence_assignment
  SUBTYPE OF (event_occurrence_assignment);
  items : SET[1:?] OF event_occurrence_item;
END_ENTITY;



ENTITY applied_external_identification_assignment
SUBTYPE OF (external_identification_assignment);
  items : SET [1 : ?] OF external_identification_item;
END_ENTITY;



ENTITY external_source;
  source_id   : source_item;
DERIVE
  description : text := get_description_value (SELF);
WHERE
  WR1 : SIZEOF (USEDIN (SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +

                       'DESCRIPTION_ATTRIBUTE.DESCRIBED_ITEM')) <= 1;
END_ENTITY;



ENTITY document_file
SUBTYPE OF (document, characterized_object);
WHERE
  WR1: SELF\characterized_object.name = '';
  WR2: NOT EXISTS(SELF\characterized_object.description);
  WR3: SIZEOF( QUERY( drt <* SELF\document.representation_types |
               drt.name IN ['digital','physical'])) = 1;
END_ENTITY;




ENTITY placed_datum_target_feature
  SUBTYPE OF (datum_target);
DERIVE
  representation_associations : SET[0:?] OF property_definition_representation := get_shape_aspect_property_definition_representations(SELF);
WHERE
  WR1: SELF.description IN ['point','line','rectangle','circle', 'circular line'];
  WR2: SIZEOF (QUERY (pdr <* representation_associations | 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SHAPE_REPRESENTATION_WITH_PARAMETERS' IN TYPEOF (pdr.used_representation) )) = 1;

  WR3: valid_datum_target_parameters(SELF);
END_ENTITY;



ENTITY shape_representation_with_parameters
  SUBTYPE OF (shape_representation);
WHERE
  WR1: SIZEOF( QUERY( i <* SELF.items | SIZEOF(['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PLACEMENT', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MEASURE_REPRESENTATION_ITEM', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.DESCRIPTIVE_REPRESENTATION_ITEM'] * TYPEOF(i)) = 1 )) = SIZEOF(SELF.items);

END_ENTITY;



  ENTITY geometric_representation_item
  SUPERTYPE OF (ONEOF (
              POINT,
              DIRECTION,
              VECTOR,
              PLACEMENT,
              CARTESIAN_TRANSFORMATION_OPERATOR,
              CURVE,
              SURFACE,
              EDGE_CURVE,
              FACE_SURFACE,
              POLY_LOOP,
              VERTEX_POINT,
              SOLID_MODEL,
              BOOLEAN_RESULT,
              SPHERE,
              RIGHT_CIRCULAR_CONE,
              RIGHT_CIRCULAR_CYLINDER,
              TORUS,
              BLOCK,
              RIGHT_ANGULAR_WEDGE,
              ELLIPSOID,
              FACETED_PRIMITIVE,
              RECTANGULAR_PYRAMID,
              CYCLIDE_SEGMENT_SOLID,
              HALF_SPACE_SOLID,
              SHELL_BASED_SURFACE_MODEL,
              SHELL_BASED_WIREFRAME_MODEL,
              EDGE_BASED_WIREFRAME_MODEL,
              GEOMETRIC_SET))
  SUBTYPE OF (representation_item);
  DERIVE
    dim : dimension_count := dimension_of(SELF);
  WHERE
  WR1: SIZEOF (QUERY (using_rep <* using_representations (SELF) |
      NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.GEOMETRIC_REPRESENTATION_CONTEXT' IN

      TYPEOF (using_rep.context_of_items)))) = 0;
  END_ENTITY;



ENTITY applied_identification_assignment
  SUBTYPE OF (identification_assignment);
  items : SET[1:?] OF identification_item;
END_ENTITY;



ENTITY attribute_value_assignment
  ABSTRACT SUPERTYPE;
  attribute_name : label;
  attribute_value : attribute_type;
  role : attribute_value_role;
END_ENTITY;



ENTITY identification_role;
  name : label;
  description : OPTIONAL text;
END_ENTITY;



ENTITY security_classification_assignment
  ABSTRACT SUPERTYPE;
  assigned_security_classification : security_classification;
DERIVE
  role : object_role := get_role (SELF);
WHERE
  WR1: SIZEOF(USEDIN(SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'ROLE_ASSOCIATION.ITEM_WITH_ROLE')) <= 1;

END_ENTITY;



ENTITY language 
SUBTYPE OF (group); 
WHERE
WR1: SELF\group.name <> '';
END_ENTITY;



ENTITY attribute_language_assignment 
SUBTYPE OF (attribute_classification_assignment); 
  SELF\attribute_classification_assignment.assigned_class: language;
  items : SET [1:?] OF attribute_language_item; 
WHERE 
WR1: SELF\attribute_classification_assignment.role.name IN ['primary', 'translated']; 
WR2: SELF\attribute_classification_assignment.attribute_name<> '';
END_ENTITY;



ENTITY multi_language_attribute_assignment 
SUBTYPE OF (attribute_value_assignment); 
  items : SET [1:?] OF multi_language_attribute_item;

DERIVE
  translation_language : language := language_indication[1]\attribute_classification_assignment.assigned_class;

INVERSE
  language_indication: SET[1:1] OF attribute_language_assignment FOR items;

WHERE 
WR1: (SELF\attribute_value_assignment.role.name = 'alternate language');
WR2: SIZEOF( QUERY( ala <* language_indication |  
   (ala\attribute_classification_assignment.attribute_name = 'attribute_value') AND 
   (ala\attribute_classification_assignment.role.name='translated') )) = 1 ; 
WR3: SELF\attribute_value_assignment.attribute_name <> '' ;
WR4: SIZEOF(QUERY(ci <* items |
SIZEOF(QUERY(ata <* USEDIN(ci, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MULTI_LANGUAGE_ATTRIBUTE_ASSIGNMENT.ITEMS') |
(ata\attribute_value_assignment.attribute_name = SELF\attribute_value_assignment.attribute_name) AND 
(ata.translation_language :=: translation_language) ))>1 )) =0;
WR5: SIZEOF(QUERY(ci <* items |
SIZEOF(QUERY(ata <* USEDIN(ci, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ATTRIBUTE_LANGUAGE_ASSIGNMENT.ITEMS') |

 (ata\attribute_classification_assignment.role.name='primary') AND
 (ata\attribute_classification_assignment.attribute_name= SELF\attribute_value_assignment.attribute_name) AND 
 (ata\attribute_classification_assignment.assigned_class :=: translation_language) ))>0 )) =0;
END_ENTITY;


   

ENTITY applied_organization_assignment
  SUBTYPE OF (organization_assignment);
  items : SET [1:?] OF organization_item;
END_ENTITY;


   

ENTITY applied_person_and_organization_assignment
  SUBTYPE OF (person_and_organization_assignment);
  items : SET [1:?] OF person_and_organization_item;
END_ENTITY;



ENTITY person_and_organization_address 
SUBTYPE OF (organizational_address, personal_address); 
  SELF\personal_address.people: SET[1:1] of person;
  SELF\organizational_address.organizations: SET[1:1] of organization;
WHERE 
WR1: SIZEOF(QUERY(pao <* USEDIN (SELF\personal_address.people[1], 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PERSON_AND_ORGANIZATION.THE_PERSON') | 

   pao.the_organization :=: SELF\organizational_address.organizations[1])) = 1; 
END_ENTITY;



ENTITY organization;
  id : OPTIONAL identifier;
  name : label;
  description : OPTIONAL text;
END_ENTITY;



ENTITY organization_relationship;
  name : label;
  description : OPTIONAL text;
  relating_organization : organization;
  related_organization : organization;
END_ENTITY;



ENTITY organization_role;
  name : label;
DERIVE
  description : text := get_description_value(SELF);
WHERE
  WR1: SIZEOF (USEDIN (SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'DESCRIPTION_ATTRIBUTE.DESCRIBED_ITEM')) <= 1;

END_ENTITY;



ENTITY organizational_project;
  name : label;
  description : OPTIONAL text;
  responsible_organizations : SET[1:?] OF organization;
DERIVE
  id : identifier := get_id_value (SELF);
WHERE
  WR1: SIZEOF (USEDIN (SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'ID_ATTRIBUTE.IDENTIFIED_ITEM')) <= 1;

END_ENTITY;



ENTITY organizational_project_relationship;
  name : label;
  description : OPTIONAL text;
  relating_organizational_project : organizational_project;
  related_organizational_project : organizational_project;
END_ENTITY;



ENTITY person_and_organization_role;
  name : label;
DERIVE
  description : text := get_description_value (SELF);
WHERE
  WR1: SIZEOF (USEDIN (SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'DESCRIPTION_ATTRIBUTE.DESCRIBED_ITEM')) <= 1;

END_ENTITY;



ENTITY curve_style;
  name         : label;
  curve_font   : curve_font_or_scaled_curve_font_select;
  curve_width  : size_select;
  curve_colour : colour;
END_ENTITY;



ENTITY point_style;
  name          : label;
  marker        : marker_select;
  marker_size   : size_select;
  marker_colour : colour;
END_ENTITY;



ENTITY colour;
END_ENTITY;



ENTITY product_concept;
  id                  : identifier;
  name                : label;
  description         : OPTIONAL text;
  market_context      : product_concept_context;
UNIQUE
  UR1: id;
END_ENTITY;



ENTITY product_concept_relationship;
  name                     : label;
  description              : OPTIONAL text;
  relating_product_concept : product_concept;
  related_product_concept  : product_concept;
END_ENTITY;



ENTITY product;
  id : identifier;
  name : label;
  description : OPTIONAL text;
  frame_of_reference : SET[1:?] OF product_context;
END_ENTITY;



ENTITY product_category;
  name : label;
  description : OPTIONAL text;
DERIVE
  id : identifier := get_id_value (SELF);
WHERE
  WR1: SIZEOF (USEDIN (SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'ID_ATTRIBUTE.IDENTIFIED_ITEM')) <= 1;

END_ENTITY;



ENTITY product_definition;
  id : identifier;
  description : OPTIONAL text;
  formation : product_definition_formation;
  frame_of_reference : product_definition_context;
DERIVE
  name : label := get_name_value (SELF);
WHERE
  WR1: SIZEOF (USEDIN (SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'NAME_ATTRIBUTE.NAMED_ITEM')) <= 1;

END_ENTITY;



ENTITY product_definition_formation;
  id : identifier;
  description : OPTIONAL text;
  of_product : product;
UNIQUE
  UR1: id, of_product;
END_ENTITY;



ENTITY product_definition_formation_relationship;
  id : identifier;
  name : label;
  description : OPTIONAL text;
  relating_product_definition_formation : product_definition_formation;
  related_product_definition_formation : product_definition_formation;
END_ENTITY;



ENTITY product_definition_relationship;
  id : identifier;
  name : label;
  description : OPTIONAL text;
  relating_product_definition : product_definition;
  related_product_definition : product_definition;
END_ENTITY;



ENTITY product_related_product_category
  SUBTYPE OF (product_category);
  products : SET[1:?] OF product;
END_ENTITY;



ENTITY general_property;
  id : identifier;
  name : label;
  description : OPTIONAL text;
END_ENTITY;



ENTITY general_property_relationship;
  name : label;
  description : OPTIONAL text;
  relating_property : general_property;
  related_property : general_property;
END_ENTITY;



ENTITY product_definition_shape
  SUBTYPE OF (property_definition);
UNIQUE
  UR1: SELF\property_definition.definition;
WHERE
  WR1: SIZEOF (['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CHARACTERIZED_PRODUCT_DEFINITION', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CHARACTERIZED_OBJECT'] *TYPEOF (SELF\property_definition.definition))>0;

END_ENTITY;



ENTITY property_definition;
  name : label;
  description : OPTIONAL text;
  definition : characterized_definition;
DERIVE
  id : identifier := get_id_value (SELF);
WHERE
  WR1: SIZEOF (USEDIN (SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'ID_ATTRIBUTE.IDENTIFIED_ITEM')) <= 1;

END_ENTITY;



ENTITY shape_aspect;
  name : label;
  description : OPTIONAL text;
  of_shape : product_definition_shape;
  product_definitional : LOGICAL;
DERIVE
  id : identifier := get_id_value (SELF);
WHERE
  WR1: SIZEOF (USEDIN (SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'ID_ATTRIBUTE.IDENTIFIED_ITEM')) <= 1;

END_ENTITY;



ENTITY shape_aspect_relationship;
  name : label;
  description : OPTIONAL text;
  relating_shape_aspect : shape_aspect;
  related_shape_aspect : shape_aspect;
DERIVE
  id : identifier := get_id_value (SELF);
WHERE
  WR1: SIZEOF (USEDIN (SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'ID_ATTRIBUTE.IDENTIFIED_ITEM')) <= 1;

END_ENTITY;



ENTITY shape_representation
  SUBTYPE OF (representation);
END_ENTITY;



ENTITY alternate_product_relationship;
  name        : label;
  definition  : OPTIONAL text;
  alternate   : product;
  base        : product;
  basis       : text;
UNIQUE
  UR1: alternate, base;
WHERE
  WR1: alternate :<>: base;
END_ENTITY;



ENTITY assembly_component_usage
  SUPERTYPE OF (ONEOF (
              NEXT_ASSEMBLY_USAGE_OCCURRENCE,
              SPECIFIED_HIGHER_USAGE_OCCURRENCE,
              PROMISSORY_USAGE_OCCURRENCE))
  SUBTYPE OF (product_definition_usage);
  reference_designator : OPTIONAL identifier;
END_ENTITY;



ENTITY assembly_component_usage_substitute;
  name              : label;
  definition        : OPTIONAL text;
  base              : assembly_component_usage;
  substitute        : assembly_component_usage;
UNIQUE
  UR1: base,substitute;
WHERE
  WR1: base.relating_product_definition :=:
       substitute.relating_product_definition;
  WR2: base :<>: substitute;
END_ENTITY;



ENTITY make_from_usage_option
  SUBTYPE OF (product_definition_usage);
  ranking           : INTEGER;
  ranking_rationale : text;
  quantity          : measure_with_unit;
WHERE
  WR1: (NOT ('NUMBER' IN TYPEOF(quantity.value_component)))
       OR (quantity.value_component > 0);
END_ENTITY;



ENTITY product_definition_usage
  SUPERTYPE OF (ONEOF (
              MAKE_FROM_USAGE_OPTION,
              ASSEMBLY_COMPONENT_USAGE))
  SUBTYPE OF (product_definition_relationship);
UNIQUE
  UR1: SELF\product_definition_relationship.id,
       SELF\product_definition_relationship.relating_product_definition,
       SELF\product_definition_relationship.related_product_definition;
WHERE
  WR1:  acyclic_product_definition_relationship
         (SELF,
         [SELF\product_definition_relationship.related_product_definition],
         'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PRODUCT_DEFINITION_USAGE');

END_ENTITY;



ENTITY applied_organizational_project_assignment
  SUBTYPE OF (organizational_project_assignment);
  items : SET[1:?] OF project_item;
END_ENTITY;



ENTITY descriptive_representation_item
  SUBTYPE OF (representation_item);
  description : text;
END_ENTITY;



ENTITY uncertainty_qualifier
  SUPERTYPE OF (ONEOF (
              STANDARD_UNCERTAINTY));
  measure_name : label;
  description  : text;
END_ENTITY;



ENTITY mapped_item
  SUBTYPE OF (representation_item);
  mapping_source : representation_map;
  mapping_target : representation_item;
WHERE
  WR1: acyclic_mapped_representation(using_representations(SELF), [SELF]);
END_ENTITY;



ENTITY representation;
  name             : label;
  items            : SET[1:?] OF representation_item;
  context_of_items : representation_context;
DERIVE
  id               : identifier := get_id_value (SELF);
  description      : text := get_description_value (SELF);
WHERE
  WR1: SIZEOF (USEDIN (SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
                             'ID_ATTRIBUTE.IDENTIFIED_ITEM'))
       <= 1;
  WR2: SIZEOF (USEDIN (SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +

                             'DESCRIPTION_ATTRIBUTE.DESCRIBED_ITEM'))
       <= 1;
 END_ENTITY;



ENTITY representation_relationship;
  name        : label;
  description : OPTIONAL text;
  rep_1       : representation;
  rep_2       : representation;
END_ENTITY;



ENTITY uncertainty_measure_with_unit
  SUBTYPE OF (measure_with_unit);
  name        : label;
  description : OPTIONAL text;
WHERE
  WR1: valid_measure_value (SELF\measure_with_unit.value_component);
END_ENTITY;



ENTITY applied_security_classification_assignment
  SUBTYPE OF (security_classification_assignment);
  items : SET [1:?] OF security_classification_item;
END_ENTITY;




ENTITY security_classification;
  name : label;
  purpose : text;
  security_level : security_classification_level;
END_ENTITY;



ENTITY security_classification_level;
  name : label;
END_ENTITY;



ENTITY geometric_tolerance;
  name                    : label;
  description             : text;
  magnitude               : measure_with_unit; 
  toleranced_shape_aspect : shape_aspect; 
WHERE
  WR1: ('NUMBER' IN TYPEOF
       (magnitude\measure_with_unit.value_component)) AND
       (magnitude\measure_with_unit.value_component >= 0.0);
END_ENTITY;



ENTITY applied_time_interval_assignment
  SUBTYPE OF (time_interval_assignment);
  items : SET[0:?] OF time_interval_item;
END_ENTITY;



 ENTITY closed_shell
   SUBTYPE OF (connected_face_set);
 END_ENTITY;



 ENTITY connected_edge_set
   SUBTYPE OF (topological_representation_item);
   ces_edges : SET [1:?] OF edge;
 END_ENTITY;



 ENTITY connected_face_set
   SUPERTYPE OF (ONEOF (
              CLOSED_SHELL,
              OPEN_SHELL))
  SUBTYPE OF (topological_representation_item);
   cfs_faces : SET [1:?] OF face;
 END_ENTITY;



 ENTITY connected_face_sub_set
   SUBTYPE OF (connected_face_set);
   parent_face_set   :  connected_face_set;
 END_ENTITY;



 ENTITY edge
   SUPERTYPE OF (ONEOF (
              EDGE_CURVE,
              ORIENTED_EDGE,
              SUBEDGE))
  SUBTYPE OF (topological_representation_item);
   edge_start : vertex;
   edge_end   : vertex;
 END_ENTITY;



 ENTITY edge_curve
   SUBTYPE OF(edge,geometric_representation_item);
   edge_geometry : curve;
   same_sense    : BOOLEAN;
 END_ENTITY;



 ENTITY edge_loop
   SUBTYPE OF (loop,path);
 DERIVE
   ne : INTEGER := SIZEOF(SELF\path.edge_list);
 WHERE
   WR1: (SELF\path.edge_list[1].edge_start) :=:
        (SELF\path.edge_list[ne].edge_end);
 END_ENTITY;



 ENTITY face
   SUPERTYPE OF (ONEOF (
              FACE_SURFACE,
              SUBFACE,
              ORIENTED_FACE))
  SUBTYPE OF (topological_representation_item);
   bounds : SET[1:?] OF face_bound;
 WHERE
   WR1: NOT (mixed_loop_type_set(list_to_set(list_face_loops(SELF))));
   WR2: SIZEOF(QUERY(temp <* bounds | 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.FACE_OUTER_BOUND' IN

                                               TYPEOF(temp))) <= 1;
 END_ENTITY;



 ENTITY face_bound
   SUBTYPE OF(topological_representation_item);
   bound       :  loop;
   orientation :  BOOLEAN;
 END_ENTITY;



    ENTITY face_outer_bound
    SUBTYPE OF (face_bound);
    END_ENTITY;



 ENTITY face_surface
   SUBTYPE OF(face,geometric_representation_item);
   face_geometry :  surface;
   same_sense    :  BOOLEAN;
 WHERE
   WR1: NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ORIENTED_SURFACE' IN TYPEOF(face_geometry));

 END_ENTITY;



 ENTITY loop
   SUPERTYPE OF (ONEOF (
              VERTEX_LOOP,
              EDGE_LOOP,
              POLY_LOOP))
  SUBTYPE OF (topological_representation_item);
 END_ENTITY;



 ENTITY open_path
   SUBTYPE OF (path);
 DERIVE
   ne : INTEGER := SIZEOF(SELF\path.edge_list);
 WHERE
   WR1: (SELF\path.edge_list[1].edge_element.edge_start) :<>:
                       (SELF\path.edge_list[ne].edge_element.edge_end);
 END_ENTITY;



 ENTITY open_shell
   SUBTYPE OF (connected_face_set);
 END_ENTITY;



 ENTITY oriented_closed_shell
   SUBTYPE OF (closed_shell);
   closed_shell_element : closed_shell;
   orientation          : BOOLEAN;
 DERIVE
   SELF\connected_face_set.cfs_faces : SET [1:?] OF face
                                := conditional_reverse(SELF.orientation,
                                   SELF.closed_shell_element.cfs_faces);
 WHERE
   WR1: NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ORIENTED_CLOSED_SHELL' 

                IN TYPEOF (SELF.closed_shell_element));
 END_ENTITY;



 ENTITY oriented_edge
   SUBTYPE OF (edge);
   edge_element : edge;
   orientation  : BOOLEAN;
 DERIVE
   SELF\edge.edge_start : vertex := boolean_choose (SELF.orientation,
                                            SELF.edge_element.edge_start,
                                            SELF.edge_element.edge_end);
   SELF\edge.edge_end   : vertex := boolean_choose (SELF.orientation,
                                            SELF.edge_element.edge_end,
                                            SELF.edge_element.edge_start);
 WHERE
   WR1: NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ORIENTED_EDGE' IN TYPEOF (SELF.edge_element));

 END_ENTITY;



 ENTITY oriented_face
   SUBTYPE OF (face);
   face_element : face;
   orientation  : BOOLEAN;
 DERIVE
   SELF\face.bounds : SET[1:?] OF face_bound
          := conditional_reverse(SELF.orientation,SELF.face_element.bounds);
 WHERE
   WR1: NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ORIENTED_FACE' IN TYPEOF (SELF.face_element));

 END_ENTITY;



 ENTITY oriented_open_shell
   SUBTYPE OF (open_shell);
   open_shell_element : open_shell;
   orientation        : BOOLEAN;
 DERIVE
   SELF\connected_face_set.cfs_faces : SET [1:?] OF face
                                := conditional_reverse(SELF.orientation,
                                      SELF.open_shell_element.cfs_faces);
 WHERE
   WR1: NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ORIENTED_OPEN_SHELL' 

                IN TYPEOF (SELF.open_shell_element));
 END_ENTITY;



 ENTITY oriented_path
   SUBTYPE OF (path);
   path_element : path;
   orientation  : BOOLEAN;
 DERIVE
   SELF\path.edge_list : LIST [1:?] OF UNIQUE oriented_edge
                           := conditional_reverse(SELF.orientation,
                                         SELF.path_element.edge_list);
 WHERE
   WR1: NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ORIENTED_PATH' IN TYPEOF (SELF.path_element));

 END_ENTITY;



 ENTITY path
   SUPERTYPE OF (ONEOF (
              OPEN_PATH,
              EDGE_LOOP,
              ORIENTED_PATH))
  SUBTYPE OF (topological_representation_item);
   edge_list  : LIST [1:?] OF UNIQUE oriented_edge;
 WHERE
   WR1: path_head_to_tail(SELF);
 END_ENTITY;



 ENTITY poly_loop
   SUBTYPE OF (loop,geometric_representation_item);
   polygon : LIST [3:?] OF UNIQUE cartesian_point;
 END_ENTITY;



 ENTITY seam_edge
   SUBTYPE OF (oriented_edge);
     pcurve_reference : pcurve ; 
 WHERE
    WR1 : ( 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.EDGE_CURVE' IN TYPEOF (edge_element) )  AND
                ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SEAM_CURVE' IN TYPEOF

                       (edge_element\edge_curve.edge_geometry)) ;
   WR2 :  pcurve_reference IN edge_element\edge_curve.edge_geometry\
                                 surface_curve.associated_geometry ;
 END_ENTITY;



 ENTITY subedge
   SUBTYPE OF (edge);
   parent_edge   :  edge;
 END_ENTITY;



 ENTITY subface
   SUBTYPE OF (face);
   parent_face   :  face;
 WHERE
   WR1: NOT (mixed_loop_type_set(list_to_set(list_face_loops(SELF)) +
              list_to_set(list_face_loops(parent_face))));
 END_ENTITY;



 ENTITY topological_representation_item
   SUPERTYPE OF (ONEOF (
              VERTEX,
              EDGE,
              FACE_BOUND,
              FACE,
              VERTEX_SHELL,
              WIRE_SHELL,
              CONNECTED_EDGE_SET,
              CONNECTED_FACE_SET,(
              LOOP
              ANDOR 
              PATH)))
  SUBTYPE OF (representation_item);
 END_ENTITY;



 ENTITY vertex
   SUBTYPE OF (topological_representation_item);
 END_ENTITY;



 ENTITY vertex_point
 SUBTYPE OF(vertex,geometric_representation_item);
   vertex_geometry : point;
 END_ENTITY;



 ENTITY vertex_loop
   SUBTYPE OF (loop);
   loop_vertex : vertex;
 END_ENTITY;



 ENTITY vertex_shell
   SUBTYPE OF (topological_representation_item);
   vertex_shell_extent : vertex_loop;
 END_ENTITY;



 ENTITY wire_shell
   SUBTYPE OF (topological_representation_item);
   wire_shell_extent : SET [1:?] OF loop;
 WHERE
   WR1: NOT mixed_loop_type_set(wire_shell_extent);
 END_ENTITY;



ENTITY applied_action_request_assignment
SUBTYPE OF (action_request_assignment);
  items : SET [1 : ?] OF action_request_item;
END_ENTITY;



ENTITY action_relationship;
  name : label;
  description : OPTIONAL text;
  relating_action : action;
  related_action : action;
END_ENTITY;



ENTITY action_status;
  status : label;
  assigned_action : executed_action;
END_ENTITY;



ENTITY id_attribute;
  attribute_value : identifier;
  identified_item : id_attribute_select;
END_ENTITY;



ENTITY object_role;
  name : label;
  description : OPTIONAL text;
END_ENTITY;



ENTITY action_assignment
  ABSTRACT SUPERTYPE;
  assigned_action : action;
DERIVE
  role : object_role := get_role (SELF);
WHERE
  WR1: SIZEOF (USEDIN (SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'ROLE_ASSOCIATION.ITEM_WITH_ROLE')) <= 1;

END_ENTITY;

  

ENTITY advanced_brep_shape_representation 
 SUBTYPE OF ( shape_representation );
 WHERE 
WR1 : 
SIZEOF ( 
QUERY ( it <* SELF.items| NOT ( SIZEOF ([ 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MANIFOLD_SOLID_BREP', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.FACETED_BREP', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MAPPED_ITEM', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.AXIS2_PLACEMENT_3D' ] * TYPEOF (it)) = 1) )) = 0;
WR2 : 
SIZEOF ( 
QUERY ( it <* SELF.items| ( SIZEOF ([ 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MANIFOLD_SOLID_BREP', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MAPPED_ITEM' ] * TYPEOF (it)) = 1) )) > 0;
WR3 : 
SIZEOF ( 
QUERY ( msb <* 
QUERY ( it <* SELF.items| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MANIFOLD_SOLID_BREP' IN TYPEOF (it)) )| NOT ( SIZEOF ( 
QUERY ( csh <* msb_shells(msb)| NOT ( SIZEOF ( 
QUERY ( fcs <* csh\connected_face_set.cfs_faces| NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ADVANCED_FACE' IN TYPEOF (fcs)) )) = 0) )) = 0) )) = 0;
WR4 : 
SIZEOF ( 
QUERY ( msb <* 
QUERY ( it <* items| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MANIFOLD_SOLID_BREP' IN TYPEOF (it)) )| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ORIENTED_CLOSED_SHELL' IN TYPEOF (msb\manifold_solid_brep.outer)) )) = 0;
WR5 : 
SIZEOF ( 
QUERY ( brv <* 
QUERY ( it <* items| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.BREP_WITH_VOIDS' IN TYPEOF (it)) )| NOT ( SIZEOF ( 
QUERY ( csh <* brv\brep_with_voids.voids| csh\oriented_closed_shell.orientation )) = 0) )) = 0;
WR6 : 
SIZEOF ( 
QUERY ( mi <* 
QUERY ( it <* items| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MAPPED_ITEM' IN TYPEOF (it)) )| NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ADVANCED_BREP_SHAPE_REPRESENTATION' IN TYPEOF (mi\mapped_item.mapping_source.mapped_representation)) )) = 0;

 END_ENTITY;



ENTITY over_riding_styled_item
  SUBTYPE OF (styled_item);
  over_ridden_style : styled_item;
END_ENTITY;



ENTITY invisibility;
  invisible_items : SET [1:?] OF invisible_item;
END_ENTITY;



ENTITY presentation_style_assignment;
  styles : SET [1:?] OF presentation_style_select;
WHERE
  WR1: SIZEOF (QUERY (style1 <* SELF.styles |
         NOT (SIZEOF (QUERY (style2 <* (SELF.styles - style1) |
           NOT ((TYPEOF (style1) <> TYPEOF (style2)) OR
             (SIZEOF (['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
                       'SURFACE_STYLE_USAGE',
                       'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.'+
                       'EXTERNALLY_DEFINED_STYLE'] *
                     TYPEOF (style1)) = 1)
           ))) = 0
         ))) = 0;
  WR2: SIZEOF (QUERY (style1 <* SELF.styles |
         'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SURFACE_STYLE_USAGE' IN

         TYPEOF(style1)
         )) <= 2;
END_ENTITY;



ENTITY presentation_style_by_context
  SUBTYPE OF (presentation_style_assignment);
  style_context : style_context_select;
END_ENTITY;



ENTITY styled_item
  SUBTYPE OF (representation_item);
  styles :  SET [1:?] OF presentation_style_assignment;
  item   :  representation_item;
WHERE
  WR1: (SIZEOF(SELF.styles) = 1)
               XOR
       (SIZEOF(QUERY(pres_style <* SELF.styles |
         NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +

              'PRESENTATION_STYLE_BY_CONTEXT' IN
         TYPEOF(pres_style))
         )) = 0);
END_ENTITY;




ENTITY annotation_occurrence_associativity
  SUBTYPE OF (annotation_occurrence_relationship);
WHERE
  WR1:  SIZEOF (TYPEOF (SELF.related_annotation_occurrence) *
                ['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANNOTATION_FILL_AREA_OCCURRENCE',
                'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PROJECTION_CURVE',
                'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.LEADER_CURVE']) = 1;

END_ENTITY;



ENTITY dimension_text_associativity
  SUBTYPE OF (text_literal, mapped_item);
WHERE
  WR1:  ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SHAPE_DIMENSION_REPRESENTATION'
          IN TYPEOF (SELF\mapped_item.
                          mapping_source.mapped_representation));
  WR2:  ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.DRAUGHTING_CALLOUT'
          IN TYPEOF (SELF\mapped_item.mapping_target));
  WR3:  SIZEOF (QUERY (ato <* QUERY (si <* 
                USEDIN (SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.STYLED_ITEM.ITEM') |
                  ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANNOTATION_TEXT_OCCURRENCE'
                    IN TYPEOF(si))) |
                NOT (SIZEOF( QUERY (dc <*
                   USEDIN (ato, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
                                 'DRAUGHTING_CALLOUT.CONTENTS') |
                     ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.DRAUGHTING_CALLOUT'

                   IN TYPEOF (dc)))
                  * [SELF\mapped_item.mapping_target]) = 1)
                )) = 0;
END_ENTITY;



ENTITY draughting_model
  SUBTYPE OF (representation);
UNIQUE
  UR1:  SELF\representation.name;
WHERE
  WR1:  SIZEOF (QUERY (it <* SELF.items |
                 NOT (SIZEOF (['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MAPPED_ITEM',
                               'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.STYLED_ITEM',
                               'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.AXIS2_PLACEMENT',
                               'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CAMERA_MODEL'] *
                      TYPEOF (it)) = 1
               ))) = 0;
  WR2:  SIZEOF (QUERY (mi <* QUERY (it <* SELF.items |
                 ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MAPPED_ITEM' IN TYPEOF(it))) |
                 NOT (
                   SIZEOF (['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SHAPE_REPRESENTATION',
                            'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.DRAUGHTING_MODEL'] *
                      TYPEOF (mi\mapped_item.mapping_source.
                              mapped_representation)) = 1
               ))) = 0;
  WR3:  SIZEOF (QUERY (smi <* QUERY (si <* QUERY (it <* SELF.items |
                 ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.STYLED_ITEM' IN TYPEOF(it))) |
                 ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MAPPED_ITEM' IN
                     TYPEOF(si\styled_item.item))) |
                 (NOT (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SHAPE_REPRESENTATION' IN
                          TYPEOF(smi\styled_item.item\mapped_item.
                                 mapping_source.mapped_representation))
                     AND
                      (SIZEOF (QUERY (sty <* smi\styled_item.styles |
                        (NOT (SIZEOF (QUERY (psa <* sty.styles |
                               (NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CURVE_STYLE'

                                       IN TYPEOF(psa))))) = 1
                     )))) = 1)))
               )) = 0;
END_ENTITY;



ENTITY shape_aspect_associativity
  SUBTYPE OF (shape_aspect_relationship);
WHERE
  WR1:  SELF.relating_shape_aspect.product_definitional;
  WR2:  NOT (SELF.related_shape_aspect.product_definitional);
  WR3:  SIZEOF (QUERY (pd <* USEDIN (SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
                 'PROPERTY_DEFINITION.DEFINITION') |
          NOT (SIZEOF (QUERY (sdr <* QUERY (pdr <* USEDIN (pd,
                          'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
                          'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
               ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SHAPE_DEFINITION_REPRESENTATION'
                   IN TYPEOF (pdr))) |
            NOT (SIZEOF (QUERY (it <* sdr.used_representation.items |
              NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CURVE' IN TYPEOF(it))
              AND
              (SIZEOF (QUERY (aco <* USEDIN (it,
                          'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.STYLED_ITEM.ITEM') |
               SIZEOF (TYPEOF (aco) * 
                     ['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.LEADER_CURVE',
                      'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PROJECTION_CURVE']) = 1)) +
               SIZEOF (USEDIN (it, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
                      'ANNOTATION_FILL_AREA.BOUNDARIES')) >= 1)
            )) = 1) 
          )) = 0)
        )) = 0;
  WR4:  SIZEOF (QUERY (pd <* USEDIN (SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
                 'PROPERTY_DEFINITION.DEFINITION') |
          NOT (SIZEOF (QUERY (sdr <* QUERY (pdr <* USEDIN (pd,
                          'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
                          'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
               ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SHAPE_DEFINITION_REPRESENTATION'

                   IN TYPEOF (pdr))) |
            NOT (check_associative_shape_aspects(sdr))
          )) = 0)
        )) = 0;
END_ENTITY;



ENTITY camera_image_3d_with_scale
  SUBTYPE OF (camera_image);
DERIVE
  scale: positive_ratio_measure := ((SELF\mapped_item.mapping_target\
         planar_extent.size_in_x) / (SELF\mapped_item.mapping_source.
         mapping_origin\camera_model_d3.perspective_of_volume.view_window.
         size_in_x));
WHERE
  WR1:  ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CAMERA_MODEL_D3'
        IN TYPEOF (SELF\mapped_item.mapping_source.mapping_origin));
  WR2:  aspect_ratio(SELF\mapped_item.mapping_target) =
        aspect_ratio(SELF\mapped_item.mapping_source.mapping_origin\
        camera_model_d3.perspective_of_volume.view_window);
  WR3:  SELF\mapped_item.mapping_source.mapping_origin\camera_model_d3.
        perspective_of_volume.front_plane_clipping
        AND
        SELF\mapped_item.mapping_source.mapping_origin\camera_model_d3.
        perspective_of_volume.view_volume_sides_clipping;
  WR4:  (SELF\mapped_item.mapping_target\planar_extent.size_in_x > 0)
        AND
        (SELF\mapped_item.mapping_target\planar_extent.size_in_y > 0);
  WR5:  (SELF\mapped_item.mapping_source.mapping_origin\camera_model_d3.
        perspective_of_volume.view_window.size_in_x > 0)
        AND
        (SELF\mapped_item.mapping_source.mapping_origin\camera_model_d3.
        perspective_of_volume.view_window.size_in_y > 0);
  WR6:  ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
        'AXIS2_PLACEMENT_2D' IN TYPEOF (SELF\mapped_item.
        mapping_target\planar_box.placement))
        AND NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +

        'AXIS2_PLACEMENT_3D' IN TYPEOF (SELF\mapped_item.
        mapping_target\planar_box.placement));
END_ENTITY;



ENTITY draughting_pre_defined_colour
  SUBTYPE OF (pre_defined_colour);
WHERE
  WR1:  SELF.name IN
               ['red',
                'green',
                'blue',
                'yellow',
                'magenta',
                'cyan',
                'black',
                'white'];
        
END_ENTITY;



ENTITY draughting_pre_defined_curve_font
  SUBTYPE OF (pre_defined_curve_font);
WHERE
  WR1:  SELF.name IN
               ['continuous',
                'chain',
                'chain double dash',
                'dashed',
                'dotted'];
END_ENTITY;



ENTITY mechanical_design_geometric_presentation_area
  SUBTYPE OF (presentation_area);
WHERE
  WR1:  -- only presentation_views or axis2_placements in
        -- mechanical_design_geometric_presentation_area
        SIZEOF(QUERY(it1 <* SELF.items |
        NOT (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.AXIS2_PLACEMENT'
        IN TYPEOF(it1))
        OR
        (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MAPPED_ITEM'
        IN TYPEOF(it1)) AND
        ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PRESENTATION_VIEW'
        IN TYPEOF
        (it1\mapped_item.mapping_source.mapped_representation)))))) = 0;
  WR2:  -- only mechanical_design_geometric_presentation_representation
        -- via camera_image_3d_with_scale or axis2_placements in
        -- presentation_views
        SIZEOF(QUERY(pv <* QUERY(mi1 <* QUERY(it1 <* SELF.items |
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MAPPED_ITEM'
        IN TYPEOF(it1)) |
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PRESENTATION_VIEW'
        IN TYPEOF
        (mi1\mapped_item.mapping_source.mapped_representation)) |
        -- search in all presentation_views for axis2_placements and
        -- mapped_items and for the subtype of mapped_item
        -- camera_image_3d_with_scale; the latter shall reference
        -- a mechanical_design_geometric_presentation_representation;
        -- the supertype mapped_item shall reference presentation_view.
        NOT (SIZEOF(QUERY(it2 <* pv\mapped_item.mapping_source.
        mapped_representation\representation.items |
        NOT (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.AXIS2_PLACEMENT'
        IN TYPEOF(it2))
        OR
        (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MAPPED_ITEM'
        IN TYPEOF(it2)) AND NOT
        ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
        'CAMERA_IMAGE_3D_WITH_SCALE' IN TYPEOF(it2))) AND NOT (
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PRESENTATION_VIEW'
        IN TYPEOF
        (it2\mapped_item.mapping_source.mapped_representation)))
        OR
        (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
        'CAMERA_IMAGE_3D_WITH_SCALE' IN TYPEOF(it2))
        AND NOT (
        ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
        'MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION_REPRESENTATION'
        IN TYPEOF (it2\mapped_item.mapping_source.mapped_representation) ))
        ))) = 0))) = 0;
  WR3:  (SIZEOF(QUERY(ps <* USEDIN (SELF\presentation_area,
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
        'PRESENTATION_SIZE.UNIT') | ((ps.size\planar_extent.size_in_x <= 0)
        OR
        (ps.size\planar_extent.size_in_y <= 0)))) = 0)
        AND
        (SIZEOF(QUERY(ais <* USEDIN (SELF\presentation_area,
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
        'AREA_IN_SET.AREA') |
        (SIZEOF(QUERY(ps <* USEDIN (ais, 
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
        'PRESENTATION_SIZE.UNIT') |
        ((ps.size\planar_extent.size_in_x <= 0)
        OR
        (ps.size\planar_extent.size_in_y <= 0)))) > 0))) = 0);
  WR4:  (SIZEOF(QUERY(ps <* USEDIN (SELF\presentation_area,
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
        'PRESENTATION_SIZE.UNIT') | 
        ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
        'AXIS2_PLACEMENT_2D' IN TYPEOF (ps.size.placement)))) = 1)
        AND
        (SIZEOF(QUERY(ps <* USEDIN (SELF\presentation_area,
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
        'PRESENTATION_SIZE.UNIT') | 
        ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
        'AXIS2_PLACEMENT_3D' IN TYPEOF (ps.size.placement)))) = 0)
        OR
        ((SIZEOF(QUERY(ais <* USEDIN (SELF\presentation_area,
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
        'AREA_IN_SET.AREA') |
        (SIZEOF(QUERY(ps <* USEDIN (ais, 
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
        'PRESENTATION_SIZE.UNIT') |
        ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
        'AXIS2_PLACEMENT_2D' IN TYPEOF (ps.size.placement)))) = 1))) = 1)
        AND
        (SIZEOF(QUERY(ais <* USEDIN (SELF\presentation_area,
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
        'AREA_IN_SET.AREA') |
        (SIZEOF(QUERY(ps <* USEDIN (ais, 
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
        'PRESENTATION_SIZE.UNIT') |
        ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +

        'AXIS2_PLACEMENT_3D' IN TYPEOF (ps.size.placement)))) = 0))) = 1));
END_ENTITY;



ENTITY mechanical_design_geometric_presentation_representation
  SUBTYPE OF (representation);
WHERE
  WR1:  SIZEOF(QUERY(it <* SELF.items |
        NOT (SIZEOF(
        ['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MAPPED_ITEM',
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.STYLED_ITEM',
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.AXIS2_PLACEMENT',
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CAMERA_MODEL_D3']
        * TYPEOF(it)) = 1))) = 0;
  WR2:  -- only shape_representations and
        -- mechanical_design_geometric_presentation_representations
        -- shall be referenced from mapped_items
        SIZEOF(QUERY(mi <* QUERY(it <* SELF.items |
        ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MAPPED_ITEM'
        IN TYPEOF(it))) | NOT (SIZEOF(
        ['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
        'SHAPE_REPRESENTATION',
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
        'MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION_REPRESENTATION']
        * TYPEOF(mi\mapped_item.mapping_source.mapped_representation))
        = 1))) = 0;
  WR3:  -- a mapped_item that is styled shall reference a
        -- shape_representation
        SIZEOF(QUERY(smi <* QUERY(si <* QUERY(it <* SELF.items |
        ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.STYLED_ITEM'
        IN TYPEOF(it))) |
        ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MAPPED_ITEM'
        IN TYPEOF(si\styled_item.item))) | NOT (
        ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
        'SHAPE_REPRESENTATION' IN TYPEOF (smi\styled_item.
        item\mapped_item.mapping_source.mapped_representation))) )) = 0;
  WR4:  SIZEOF(QUERY(si <* QUERY(it <* SELF.items |
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.STYLED_ITEM'
        IN TYPEOF(it)) | NOT (SIZEOF(QUERY(psa <* si\styled_item.styles |
        NOT (SIZEOF(QUERY(pss <* psa.styles | NOT (SIZEOF(
        ['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.POINT_STYLE',
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CURVE_STYLE',
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SURFACE_STYLE_USAGE']
        * TYPEOF(pss)) = 1))) = 0))) = 0))) = 0;
  WR5:  SIZEOF(QUERY(si <* QUERY(it <* SELF.items |
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.STYLED_ITEM'
        IN TYPEOF(it)) |
        NOT (SIZEOF(QUERY(psbc <* QUERY(psa <* si\styled_item.styles |
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
        'PRESENTATION_STYLE_BY_CONTEXT' IN TYPEOF(psa)) | NOT (SIZEOF(
        ['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
        'REPRESENTATION_ITEM',
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.REPRESENTATION']
        * TYPEOF(psbc\presentation_style_by_context.style_context))
        = 1))) = 0))) = 0;
  WR6:  SIZEOF(QUERY(si <* QUERY(it <* SELF.items |
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.STYLED_ITEM'
        IN TYPEOF(it)) | NOT (SIZEOF(QUERY(psa <* si\styled_item.styles |
        NOT (SIZEOF(QUERY(ps <* QUERY(pss <* psa.styles |
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.POINT_STYLE'
        IN TYPEOF(pss)) | NOT
        (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
        'POSITIVE_LENGTH_MEASURE' IN TYPEOF (ps\point_style.marker_size))
        AND (SIZEOF(
        ['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.COLOUR_RGB',
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
        'DRAUGHTING_PRE_DEFINED_COLOUR']
        * TYPEOF(ps\point_style.marker_colour))
        = 1)))) = 0))) = 0))) = 0;
  WR7:  SIZEOF(QUERY(si <* QUERY(it <* SELF.items |
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.STYLED_ITEM'
        IN TYPEOF(it)) | NOT (SIZEOF(QUERY(psa <* si\styled_item.styles |
        NOT (SIZEOF(QUERY(cs <* QUERY(pss <* psa.styles |
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CURVE_STYLE'
        IN TYPEOF(pss)) | NOT((SIZEOF(
        ['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.COLOUR_RGB',
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
        'DRAUGHTING_PRE_DEFINED_COLOUR']
        * TYPEOF(cs\curve_style.curve_colour)) = 1)
        AND
        ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
        'POSITIVE_LENGTH_MEASURE' IN TYPEOF (cs\curve_style.curve_width))
        AND (SIZEOF(
        ['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CURVE_STYLE_FONT',
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
        'DRAUGHTING_PRE_DEFINED_CURVE_FONT']
        * TYPEOF(cs\curve_style.curve_font)) = 1)))) = 0))) = 0))) = 0;
  WR8:  SIZEOF(QUERY(si <* QUERY(it <* SELF.items |
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.STYLED_ITEM'
        IN TYPEOF(it)) | NOT (SIZEOF(QUERY(psa <* si\styled_item.styles |
        NOT (SIZEOF(QUERY(ssu <* QUERY(pss <* psa.styles |
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SURFACE_STYLE_USAGE'
        IN TYPEOF(pss)) |
        NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
        'SURFACE_SIDE_STYLE' IN TYPEOF
        (ssu\surface_style_usage.style)))) = 0))) = 0))) = 0;
  WR9:  SIZEOF(QUERY(si <* QUERY(it <* SELF.items |
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.STYLED_ITEM'
        IN TYPEOF(it)) | NOT (SIZEOF(QUERY(psa <* si\styled_item.styles |
        NOT (SIZEOF(QUERY(ssu <* QUERY(pss <* psa.styles |
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SURFACE_STYLE_USAGE'
        IN TYPEOF(pss)) | NOT (SIZEOF(QUERY(sses <*
        ssu\surface_style_usage.style\surface_side_style.styles |
        NOT (SIZEOF(
        ['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
        'SURFACE_STYLE_PARAMETER_LINE',
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
        'SURFACE_STYLE_CONTROL_GRID',
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
        'SURFACE_STYLE_SILHOUETTE',
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
        'SURFACE_STYLE_SEGMENTATION_CURVE',
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
        'SURFACE_STYLE_FILL_AREA',
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
        'SURFACE_STYLE_BOUNDARY']
        * TYPEOF(sses)) = 1))) = 0))) = 0))) = 0))) = 0;
  WR10: SIZEOF(QUERY(si <* QUERY(it <* SELF.items |
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.STYLED_ITEM'
        IN TYPEOF(it)) | NOT (SIZEOF(QUERY(psa <* si\styled_item.styles |
        NOT (SIZEOF(QUERY(ssu <* QUERY(pss <* psa.styles |
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SURFACE_STYLE_USAGE'
        IN TYPEOF(pss)) | NOT (SIZEOF(QUERY(sspl <* QUERY(sses <*
        ssu\surface_style_usage.style\surface_side_style.styles |
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
        'SURFACE_STYLE_PARAMETER_LINE' IN TYPEOF(sses)) |
        NOT (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CURVE_STYLE'
        IN TYPEOF
        (sspl\surface_style_parameter_line.style_of_parameter_lines))
        AND (SIZEOF(
        ['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.COLOUR_RGB',
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
        'DRAUGHTING_PRE_DEFINED_COLOUR']
        * TYPEOF(sspl\surface_style_parameter_line.
        style_of_parameter_lines\curve_style.curve_colour)) = 1)
        AND (
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
        'POSITIVE_LENGTH_MEASURE' IN TYPEOF
        (sspl\surface_style_parameter_line.
        style_of_parameter_lines\curve_style.curve_width))
        AND (SIZEOF(
        ['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CURVE_STYLE_FONT',
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.'+
        'DRAUGHTING_PRE_DEFINED_CURVE_FONT']
        * TYPEOF(sspl\surface_style_parameter_line.
        style_of_parameter_lines\curve_style.curve_font)) = 1))))
        = 0))) = 0))) = 0))) = 0;
  WR11: SIZEOF(QUERY(si <* QUERY(it <* SELF.items |
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.STYLED_ITEM'
        IN TYPEOF(it)) | NOT (SIZEOF(QUERY(psa <* si\styled_item.styles |
        NOT (SIZEOF(QUERY(ssu <* QUERY(pss <* psa.styles |
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SURFACE_STYLE_USAGE'
        IN TYPEOF(pss)) | NOT (SIZEOF(QUERY(sscg <* QUERY(sses <*
        ssu\surface_style_usage.style\surface_side_style.styles |
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
        'SURFACE_STYLE_CONTROL_GRID' IN TYPEOF(sses)) |
        NOT (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CURVE_STYLE'
        IN TYPEOF (sscg\surface_style_control_grid.style_of_control_grid))
        AND (SIZEOF(
        ['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.COLOUR_RGB',
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
        'DRAUGHTING_PRE_DEFINED_COLOUR']
        * TYPEOF(sscg\surface_style_control_grid.
        style_of_control_grid\curve_style.curve_colour)) = 1)
        AND
        ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
        'POSITIVE_LENGTH_MEASURE' IN TYPEOF 
        (sscg\surface_style_control_grid.
        style_of_control_grid\curve_style.curve_width))
        AND (SIZEOF(
        ['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CURVE_STYLE_FONT',
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
        'DRAUGHTING_PRE_DEFINED_CURVE_FONT']
        * TYPEOF(sscg\surface_style_control_grid.
        style_of_control_grid\curve_style.curve_font)) = 1))))
        = 0))) = 0))) = 0))) = 0;
  WR12: SIZEOF(QUERY(si <* QUERY(it <* SELF.items |
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.STYLED_ITEM'
        IN TYPEOF(it)) |
        NOT (SIZEOF(QUERY(psa <* si\styled_item.styles |
        NOT (SIZEOF(QUERY(ssu <* QUERY(pss <* psa.styles |
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SURFACE_STYLE_USAGE'
        IN TYPEOF(pss)) | NOT (SIZEOF(QUERY(sssh <* QUERY(sses <*
        ssu\surface_style_usage.style\surface_side_style.styles |
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
        'SURFACE_STYLE_SILHOUETTE' IN TYPEOF(sses)) |
        NOT (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CURVE_STYLE'
        IN TYPEOF (sssh\surface_style_silhouette.style_of_silhouette))
        AND (SIZEOF(
        ['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.COLOUR_RGB',
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
        'DRAUGHTING_PRE_DEFINED_COLOUR']
        * TYPEOF(sssh\surface_style_silhouette.
        style_of_silhouette\curve_style.curve_colour)) = 1)
        AND
        ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
        'POSITIVE_LENGTH_MEASURE' IN TYPEOF
        (sssh\surface_style_silhouette.style_of_silhouette\curve_style.
        curve_width))
        AND (SIZEOF(
        ['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CURVE_STYLE_FONT',
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
        'DRAUGHTING_PRE_DEFINED_CURVE_FONT']
        * TYPEOF(sssh\surface_style_silhouette.
        style_of_silhouette\curve_style.curve_font)) = 1))))
        = 0))) = 0))) = 0))) = 0;
  WR13: SIZEOF(QUERY(si <* QUERY(it <* SELF.items |
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.STYLED_ITEM'
        IN TYPEOF(it)) | NOT (SIZEOF(QUERY(psa <* si\styled_item.styles |
        NOT (SIZEOF(QUERY(ssu <* QUERY(pss <* psa.styles |
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SURFACE_STYLE_USAGE'
        IN TYPEOF(pss)) | NOT (SIZEOF(QUERY(sssc <* QUERY(sses <*
        ssu\surface_style_usage.style\surface_side_style.styles |
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
        'SURFACE_STYLE_SEGMENTATION_CURVE' IN TYPEOF(sses)) |
        NOT (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CURVE_STYLE'
        IN TYPEOF
        (sssc\surface_style_segmentation_curve.style_of_segmentation_curve))
        AND (SIZEOF(
        ['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.COLOUR_RGB',
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
        'DRAUGHTING_PRE_DEFINED_COLOUR']
        * TYPEOF(sssc\surface_style_segmentation_curve.
        style_of_segmentation_curve\curve_style.curve_colour)) = 1)
        AND
        ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
        'POSITIVE_LENGTH_MEASURE' IN TYPEOF
        (sssc\surface_style_segmentation_curve.
        style_of_segmentation_curve\curve_style.curve_width))
        AND (SIZEOF(
        ['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CURVE_STYLE_FONT',
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
        'DRAUGHTING_PRE_DEFINED_CURVE_FONT']
        * TYPEOF(sssc\surface_style_segmentation_curve.
        style_of_segmentation_curve\curve_style.curve_font)) = 1))))
        = 0))) = 0))) = 0))) = 0;
  WR14: SIZEOF(QUERY(si <* QUERY(it <* SELF.items |
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.STYLED_ITEM'
        IN TYPEOF(it)) | NOT (SIZEOF(QUERY(psa <* si\styled_item.styles |
        NOT (SIZEOF(QUERY(ssu <* QUERY(pss <* psa.styles |
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SURFACE_STYLE_USAGE'
        IN TYPEOF(pss)) | NOT (SIZEOF(QUERY(ssbd <* QUERY(sses <*
        ssu\surface_style_usage.style\surface_side_style.styles |
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
        'SURFACE_STYLE_BOUNDARY' IN TYPEOF(sses)) |
        NOT (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CURVE_STYLE'
        IN TYPEOF (ssbd\surface_style_boundary.style_of_boundary))
        AND (SIZEOF(
        ['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.COLOUR_RGB',
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
        'DRAUGHTING_PRE_DEFINED_COLOUR']
        * TYPEOF(ssbd\surface_style_boundary.
        style_of_boundary\curve_style.curve_colour)) = 1)
        AND
        ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
        'POSITIVE_LENGTH_MEASURE' IN TYPEOF (ssbd\surface_style_boundary.
        style_of_boundary\curve_style.curve_width))
        AND (SIZEOF(
        ['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CURVE_STYLE_FONT',
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +

        'DRAUGHTING_PRE_DEFINED_CURVE_FONT']
        * TYPEOF(ssbd\surface_style_boundary.
        style_of_boundary\curve_style.curve_font)) = 1)))) = 0)))
        = 0))) = 0))) = 0;
END_ENTITY;



ENTITY approval_date_time;
  date_time : date_time_select;
  dated_approval : approval;
DERIVE
  role : object_role := get_role (SELF);
WHERE
  WR1: SIZEOF (USEDIN (SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'ROLE_ASSOCIATION.ITEM_WITH_ROLE')) <= 1;

END_ENTITY;



ENTITY approval_role;
  role : label;
DERIVE
  description : text := get_description_value (SELF);
WHERE
  WR1: SIZEOF (USEDIN (SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'DESCRIPTION_ATTRIBUTE.DESCRIBED_ITEM')) <= 1;

END_ENTITY;



ENTITY approval_assignment
  ABSTRACT SUPERTYPE;
  assigned_approval : approval;
DERIVE
  role : object_role := get_role (SELF);
WHERE
  WR1: SIZEOF(USEDIN(SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'ROLE_ASSOCIATION.ITEM_WITH_ROLE')) <= 1;

END_ENTITY;



ENTITY leader_curve
  SUBTYPE OF (annotation_curve_occurrence);
WHERE
  WR1: SIZEOF( 
          QUERY(ldc <* USEDIN( SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
                       'DRAUGHTING_CALLOUT.CONTENTS')
                   |   'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +

                       'LEADER_DIRECTED_CALLOUT'  IN TYPEOF(ldc))) >= 1;
END_ENTITY;



ENTITY annotation_subfigure_occurrence
  SUBTYPE OF (annotation_symbol_occurrence);
WHERE
  WR1: SIZEOF (QUERY (sty <* SELF.styles |
         NOT (SIZEOF (sty.styles) = 1)
       )) = 0;
  WR2: SIZEOF (QUERY (sty <* SELF.styles |
         NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.NULL_STYLE'
               IN TYPEOF (sty.styles[1]))       ))=0;
  WR3: ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANNOTATION_SYMBOL'
           IN TYPEOF (SELF.item));
  WR4: ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.DRAUGHTING_SUBFIGURE_REPRESENTATION'

           IN TYPEOF
           (SELF.item\mapped_item.mapping_source.mapped_representation));
END_ENTITY;



ENTITY draughting_annotation_occurrence
  SUBTYPE OF (annotation_occurrence);
WHERE
  WR1:	-- curve_has_curve_style:
    (NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANNOTATION_CURVE_OCCURRENCE'
            IN TYPEOF (SELF))) OR
    (SIZEOF (QUERY (sty <* SELF.styles |
       NOT ((SIZEOF (sty.styles) = 1)
         AND ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CURVE_STYLE'
                 IN TYPEOF (sty.styles[1]))) )) = 0);
  WR2:	-- fill_area_has_fill_style:
    (NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANNOTATION_FILL_AREA_OCCURRENCE'
            IN TYPEOF (SELF))) OR    (SIZEOF (QUERY (sty <* SELF.styles |
      NOT ((SIZEOF (sty.styles) = 1)
        AND ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.FILL_AREA_STYLE'
                IN TYPEOF (sty.styles[1]))) )) = 0);
  WR3:	-- styled_fill_boundaries:
    (NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANNOTATION_FILL_AREA_OCCURRENCE'
            IN TYPEOF (SELF))) OR    (SIZEOF (QUERY (bound <*
                     SELF.item\annotation_fill_area.boundaries |
       NOT (SIZEOF (QUERY (si <*
                   USEDIN (bound, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
                                  'STYLED_ITEM.ITEM') |
         ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
             'ANNOTATION_CURVE_OCCURRENCE' IN TYPEOF (si)))) > 0))) = 0);
  WR4:	-- symbol_has_symbol_style:
    (NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANNOTATION_SYMBOL_OCCURRENCE'
            IN TYPEOF (SELF))) OR    (SIZEOF (QUERY (sty <* SELF.styles |
       NOT ((SIZEOF (sty.styles) = 1)           AND
            (SIZEOF (TYPEOF (sty.styles[1]) *
                ['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SYMBOL_STYLE',
                 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.NULL_STYLE']) = 1)) )) = 0);
  WR5:	-- allowable_symbol_representations:
    (NOT (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANNOTATION_SYMBOL_OCCURRENCE'
             IN TYPEOF (SELF)) AND
         ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANNOTATION_SYMBOL'
             IN TYPEOF(SELF.item)))) OR
         (SIZEOF (['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
                   'DRAUGHTING_SYMBOL_REPRESENTATION',
                  'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
                  'DRAUGHTING_SUBFIGURE_REPRESENTATION'] *
          TYPEOF (SELF.item\mapped_item.mapping_source.
                  mapped_representation)) = 1);
  WR6:	-- text_has_text_style:
    (NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANNOTATION_TEXT_OCCURRENCE'
            IN TYPEOF (SELF))) OR
    (SIZEOF (QUERY (sty <* SELF.styles |
       NOT ((SIZEOF (sty.styles) = 1)
        AND ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.TEXT_STYLE'
                IN TYPEOF (sty.styles[1]))) )) = 0);
  WR7:	-- allowable_text:
     (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANNOTATION_TEXT_OCCURRENCE'
             IN TYPEOF (SELF))) OR
         (SIZEOF (TYPEOF(SELF.item) *
             ['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.COMPOSITE_TEXT',
              'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.TEXT_LITERAL']) = 1);
  WR8:	-- text_not_nested:
    (NOT (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANNOTATION_TEXT_OCCURRENCE'
             IN TYPEOF (SELF)) AND
         ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.COMPOSITE_TEXT'
             IN TYPEOF (SELF.item)))) OR    (SIZEOF (QUERY (tl <*
                   SELF.item\composite_text.collected_text |
             NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.TEXT_LITERAL' 
             IN TYPEOF (tl)) )) = 0);
  WR9:	-- text_alignment_literals:
    (NOT (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANNOTATION_TEXT_OCCURRENCE'
             IN TYPEOF (SELF)) AND
         ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.TEXT_LITERAL'
             IN TYPEOF (SELF.item)))) OR (SELF.item\text_literal.alignment 
             IN ['baseline left', 'baseline centre', 'baseline right']);
  WR10:	-- text_alignment_composites:
    (NOT (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANNOTATION_TEXT_OCCURRENCE'
             IN TYPEOF (SELF)) AND
         ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.COMPOSITE_TEXT'
             IN TYPEOF (SELF.item)))) OR
         (SIZEOF (QUERY (tl <* QUERY (text <* SELF.
                  item\composite_text.collected_text
             |('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.TEXT_LITERAL' IN TYPEOF(text))) |
          NOT (tl\text_literal.alignment IN
         ['baseline left', 'baseline centre', 'baseline right']) )) = 0);
  WR11:	-- single_text_alignment:
    NOT (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANNOTATION_TEXT_OCCURRENCE'
             IN TYPEOF(SELF)) AND
         ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.COMPOSITE_TEXT'
             IN TYPEOF (SELF.item))) OR check_text_alignment(SELF.item);
  WR12:	-- single_text_font:
    NOT (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANNOTATION_TEXT_OCCURRENCE'
             IN TYPEOF(SELF)) AND
         ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.COMPOSITE_TEXT'
             IN TYPEOF (SELF.item))) OR check_text_font(SELF.item);
  WR13:	-- allowable_text_literals:
    (NOT (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANNOTATION_TEXT_OCCURRENCE'
             IN TYPEOF(SELF)) AND
         ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.COMPOSITE_TEXT'
               IN TYPEOF (SELF.item)))) OR
         (SIZEOF (QUERY (tl <* QUERY (text <*
            SELF.item\composite_text.collected_text |
            ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.TEXT_LITERAL' IN TYPEOF (text))) |
             NOT (SIZEOF (TYPEOF(tl) *
                  ['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
                   'TEXT_LITERAL_WITH_BLANKING_BOX',
                   'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
                   'TEXT_LITERAL_WITH_ASSOCIATED_CURVES']) = 0) )) = 0);
  WR14:	-- styled_text_literal_curves:
    (NOT (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANNOTATION_TEXT_OCCURRENCE'
             IN TYPEOF (SELF)) AND
         ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.TEXT_LITERAL_WITH_ASSOCIATED_CURVES'
             IN TYPEOF (SELF.item)))) OR
    (SIZEOF (QUERY (crv <*
                   SELF.item\text_literal_with_associated_curves.
                   associated_curves |
      NOT (SIZEOF (QUERY (si <*  USEDIN (crv, 
             'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.STYLED_ITEM.ITEM') |
        ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANNOTATION_CURVE_OCCURRENCE'
            IN TYPEOF (si)) )) > 0) )) = 0);
  WR15:	-- styled_composite_text_curves:
    (NOT (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANNOTATION_TEXT_OCCURRENCE'
             IN TYPEOF (SELF)) AND
         ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.COMPOSITE_TEXT_WITH_ASSOCIATED_CURVES'
             IN TYPEOF (SELF.item)))) OR
          (SIZEOF (QUERY (crv <*
                SELF.item\composite_text_with_associated_curves.
                associated_curves |
           NOT (SIZEOF (QUERY (si <*  USEDIN (crv,
                'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.STYLED_ITEM.ITEM') |
               ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANNOTATION_CURVE_OCCURRENCE'
           IN TYPEOF (si)) )) > 0) )) = 0);
WR16:	-- curve_style_has_width:
    SIZEOF (QUERY (cs <* QUERY (sty <* SELF.styles |
      ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CURVE_STYLE' IN TYPEOF (sty.styles[1])))
      | NOT (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.LENGTH_MEASURE_WITH_UNIT'
        IN TYPEOF (cs.styles[1]\curve_style.curve_width)) AND
       ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.POSITIVE_LENGTH_MEASURE'
        IN TYPEOF (cs.styles[1]\curve_style.
        curve_width\measure_with_unit.value_component))))) = 0;
WR17:	-- tiling_constraints:
    SIZEOF (QUERY (fas <* QUERY (sty <* SELF.styles |
      ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.FILL_AREA_STYLE'
          IN TYPEOF (sty.styles[1]))) |
      NOT ((SIZEOF (QUERY (fs <* fas.styles[1]\fill_area_style.fill_styles
                    | ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.FILL_AREA_STYLE_TILES'
                       IN TYPEOF (fs)))) <= 1)
       AND (SIZEOF (QUERY (fst <* QUERY (fs <*
                           fas.styles[1]\fill_area_style.fill_styles |
              ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.FILL_AREA_STYLE_TILES'
                  IN TYPEOF (fs))) |
                 NOT (SIZEOF (fst\fill_area_style_tiles.tiles) = 1)
           )) = 0))
    )) = 0;
  WR18:	-- hatching_constraints:
    SIZEOF (QUERY (fas <* QUERY (sty <* SELF.styles |
           ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.FILL_AREA_STYLE' 
            IN TYPEOF (sty.styles[1]))) |
             NOT (SIZEOF (QUERY (fsh <* QUERY (fs <*
                          fas.styles[1]\fill_area_style.fill_styles |
             ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.FILL_AREA_STYLE_HATCHING'
               IN TYPEOF (fs))) |
        NOT (fsh\fill_area_style_hatching.point_of_reference_hatch_line :=:
             fsh\fill_area_style_hatching.pattern_start)  )) = 0)  )) = 0;
  WR19:	-- text_style_constraint:
    SIZEOF (QUERY (ts <* QUERY (sty <* SELF.styles |
         ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.TEXT_STYLE' 
         IN TYPEOF(sty.styles[1]))) |
             NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
                  'TEXT_STYLE_WITH_BOX_CHARACTERISTICS'
             IN TYPEOF (ts.styles[1])))) = 0;
  WR20:	-- text_style_characteristics:
    SIZEOF (QUERY (ts <* QUERY (sty <* SELF.styles |
         ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.TEXT_STYLE_WITH_BOX_CHARACTERISTICS'

             IN TYPEOF (sty.styles[1]))) |
           NOT (SIZEOF (ts.styles[1]\text_style_with_box_characteristics.
                characteristics) = 4) )) = 0;
END_ENTITY;



ENTITY draughting_subfigure_representation
  SUBTYPE OF (symbol_representation);
WHERE
  WR1: SIZEOF (QUERY (item <* SELF\representation.items |
         NOT (SIZEOF (['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANNOTATION_OCCURRENCE',
              'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.DRAUGHTING_CALLOUT',
              'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.AXIS2_PLACEMENT']
               * TYPEOF (item)) = 1))) = 0;
  WR2: SIZEOF (QUERY (item <* SELF\representation.items |
         SIZEOF (['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANNOTATION_OCCURRENCE',
                  'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.DRAUGHTING_CALLOUT'] *
           TYPEOF (item)) = 1)) >= 1;
  WR3: SIZEOF (QUERY (srm <* QUERY (rm <*
          USEDIN (SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
                        'REPRESENTATION_MAP.MAPPED_REPRESENTATION') |
          ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SYMBOL_REPRESENTATION_MAP'
             IN TYPEOF(rm))) | 
            NOT (SIZEOF (QUERY (a_s <* QUERY (mi <* srm.map_usage |
            ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANNOTATION_SYMBOL' IN TYPEOF(mi)))
          | NOT (SIZEOF (QUERY (aso <*
            USEDIN (a_s, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 
                         'STYLED_ITEM.ITEM') |
          NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANNOTATION_SUBFIGURE_OCCURRENCE'

            IN TYPEOF(aso)))) = 0))) = 0))) > 0;
  WR4: NOT (acyclic_mapped_item_usage (SELF));
  WR5: SIZEOF (SELF.context_of_items.representations_in_context) = 1;
END_ENTITY;



ENTITY draughting_symbol_representation
  SUBTYPE of (symbol_representation);
UNIQUE
  UR1: SELF\representation.name;
WHERE
  WR1: 
    SIZEOF (QUERY (item <* SELF\representation.items |
         NOT (SIZEOF (TYPEOF (item) *
            ['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANNOTATION_CURVE_OCCURRENCE',
             'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANNOTATION_SYMBOL_OCCURRENCE',
             'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANNOTATION_FILL_AREA_OCCURRENCE',
             'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANNOTATION_TEXT_OCCURRENCE',
             'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.AXIS2_PLACEMENT']) = 1)
       )) = 0;
  WR2: 
    SIZEOF (QUERY (item <* SELF\representation.items |
         (SIZEOF (TYPEOF (item) *
            ['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANNOTATION_CURVE_OCCURRENCE',
             'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANNOTATION_SYMBOL_OCCURRENCE',
             'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANNOTATION_FILL_AREA_OCCURRENCE',
             'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANNOTATION_TEXT_OCCURRENCE']) = 1)
       )) >= 1;
  WR3: 
    SIZEOF (QUERY (item <* SELF\representation.items |
         'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANNOTATION_SUBFIGURE_OCCURRENCE'
          IN TYPEOF (item))) = 0;
  WR4: 
    SIZEOF (QUERY (srm <* QUERY (rm <*
          USEDIN (SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
                        'REPRESENTATION_MAP.MAPPED_REPRESENTATION') |
          ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SYMBOL_REPRESENTATION_MAP'
             IN TYPEOF(rm))) |
         NOT (SIZEOF (QUERY (a_s <* QUERY (mi <* srm.map_usage |
           ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANNOTATION_SYMBOL' IN TYPEOF(mi))) |
         NOT (SIZEOF (QUERY(aso <*
             USEDIN(a_s, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
                         'STYLED_ITEM.ITEM') |
             NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANNOTATION_SYMBOL_OCCURRENCE'

                  IN TYPEOF(aso))
          )) = 0) )) = 0) )) > 0;
  WR5: 
    NOT (acyclic_mapped_item_usage (SELF));
  WR6: 
    SIZEOF (SELF.context_of_items.representations_in_context) = 1;
END_ENTITY;



ENTITY draughting_text_literal_with_delineation
  SUBTYPE OF (text_literal_with_delineation);
WHERE
  WR1: SELF.delineation IN ['underline', 'overline'];
END_ENTITY;



ENTITY angular_dimension
  SUBTYPE OF (dimension_curve_directed_callout);
END_ENTITY;



ENTITY curve_dimension
  SUBTYPE OF (dimension_curve_directed_callout);
END_ENTITY;



ENTITY datum_feature_callout
  SUBTYPE OF (draughting_callout);
END_ENTITY;



ENTITY datum_target_callout
  SUBTYPE OF (draughting_callout);
END_ENTITY;



ENTITY diameter_dimension
  SUBTYPE OF (dimension_curve_directed_callout);
END_ENTITY;



ENTITY dimension_callout_component_relationship
  SUBTYPE OF (draughting_callout_relationship);
WHERE
  WR1: SELF.name IN ['prefix', 'suffix'];
  WR2: 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.STRUCTURED_DIMENSION_CALLOUT'
           IN TYPEOF (SELF.relating_draughting_callout);
  WR3: SIZEOF (TYPEOF (SELF.related_draughting_callout) *
       ['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.LEADER_DIRECTED_CALLOUT',
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PROJECTION_DIRECTED_CALLOUT',
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.DIMENSION_CURVE_DIRECTED_CALLOUT',
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.STRUCTURED_DIMENSION_CALLOUT']) = 0;
  WR4: SELF.related_draughting_callout.contents *
       SELF.relating_draughting_callout.contents =
       SELF.related_draughting_callout.contents;
  WR5: ((SELF.name = 'prefix') AND
       (SIZEOF (QUERY (ato <* QUERY (con <*
                 SELF.related_draughting_callout.contents |
         ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANNOTATION_TEXT_OCCURRENCE'
             IN TYPEOF(con))) |
         NOT (ato.name = 'prefix text')
       )) = 0));
 
  WR6: ((SELF.name = 'suffix') AND
       (SIZEOF (QUERY (ato <* QUERY (con <*
                 SELF.related_draughting_callout.contents |
         ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANNOTATION_TEXT_OCCURRENCE'

             IN TYPEOF(con))) |
         NOT (ato.name = 'suffix text')
       )) = 0));
END_ENTITY;



ENTITY dimension_callout_relationship
  SUBTYPE OF (draughting_callout_relationship);
WHERE
  WR1: SELF.name IN ['primary', 'secondary'];
  WR2: SIZEOF (TYPEOF (SELF.relating_draughting_callout) * 
       ['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANGULAR_DIMENSION',
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CURVE_DIMENSION',
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.DIAMETER_DIMENSION',
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.LEADER_DIRECTED_DIMENSION',
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.LINEAR_DIMENSION',
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ORDINATE_DIMENSION',
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.RADIUS_DIMENSION'])>=1;
  WR3: SIZEOF (TYPEOF (SELF.related_draughting_callout) *
       ['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.DIMENSION_CURVE_DIRECTED_CALLOUT',
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PROJECTION_DIRECTED_CALLOUT',
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.LEADER_DIRECTED_CALLOUT']) = 0;

  WR4: SELF.related_draughting_callout.contents *
       SELF.relating_draughting_callout.contents =
       SELF.related_draughting_callout.contents;
END_ENTITY;



ENTITY dimension_pair
  SUBTYPE OF (draughting_callout_relationship);
WHERE
  WR1: SELF.name IN ['chained', 'parallel'];
  WR2: SIZEOF (TYPEOF (SELF.relating_draughting_callout) *
       ['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANGULAR_DIMENSION',
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CURVE_DIMENSION',
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.DIAMETER_DIMENSION',
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.LINEAR_DIMENSION',
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ORDINATE_DIMENSION',
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.RADIUS_DIMENSION'])=1;
  WR3: SIZEOF (TYPEOF (SELF.related_draughting_callout) *
       ['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANGULAR_DIMENSION',
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CURVE_DIMENSION',
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.DIAMETER_DIMENSION',
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.LINEAR_DIMENSION',
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ORDINATE_DIMENSION',
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.RADIUS_DIMENSION'])=1;

END_ENTITY;



ENTITY draughting_elements
  SUBTYPE OF (draughting_callout);
WHERE
  WR1: SIZEOF (QUERY (l_c <* QUERY (con <* SELF.contents |
              ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.LEADER_CURVE' IN TYPEOF(con))) |
              NOT (SIZEOF (QUERY (ldc <* USEDIN (l_c,
               'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'DRAUGHTING_CALLOUT.CONTENTS') |
              ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.LEADER_DIRECTED_CALLOUT'
              IN TYPEOF (ldc)))) <= 1)))=0;
  WR2: NOT    ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.DIMENSION_CURVE_DIRECTED_CALLOUT'
              IN TYPEOF(SELF)) OR
              (SIZEOF (QUERY (con <* SELF.contents |
              ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PROJECTION_CURVE' IN
               TYPEOF (con)))) <= 2);
  WR3: SIZEOF (QUERY (rc <* USEDIN (SELF,
              'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.DRAUGHTING_CALLOUT_' +
              'RELATIONSHIP.RELATING_DRAUGHTING_CALLOUT') |
              ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
               'DIMENSION_CALLOUT_RELATIONSHIP' IN TYPEOF (rc)) AND
              (rc.name = 'primary') )) <= 1;
  WR4: SIZEOF (QUERY (rc <* USEDIN (SELF,
              'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.DRAUGHTING_CALLOUT_' +
              'RELATIONSHIP.RELATING_DRAUGHTING_CALLOUT') |
               ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
                'DIMENSION_CALLOUT_RELATIONSHIP' IN TYPEOF (rc)) AND
                (rc.name = 'secondary') )) <= 1;
  WR5: SIZEOF (QUERY (sec <* QUERY (rc <* USEDIN (SELF,
               'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.DRAUGHTING_CALLOUT_' +
               'RELATIONSHIP.RELATING_DRAUGHTING_CALLOUT') |
               ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
                'DIMENSION_CALLOUT_RELATIONSHIP' IN TYPEOF (rc)) AND         
                (rc.name = 'secondary') ) |
         NOT (SIZEOF (QUERY (prim <* USEDIN (SELF,
               'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.DRAUGHTING_CALLOUT_' +
               'RELATIONSHIP.RELATING_DRAUGHTING_CALLOUT') |
               ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +

                'DIMENSION_CALLOUT_RELATIONSHIP' IN TYPEOF (prim)) AND         
                (prim.name = 'primary') )) = 1))) = 0;  
END_ENTITY;



ENTITY geometrical_tolerance_callout
  SUBTYPE OF (draughting_callout);
END_ENTITY;



ENTITY leader_directed_dimension
  SUBTYPE OF (leader_directed_callout);
WHERE
  WR1: SIZEOF (QUERY (con <* SELF.contents |
       'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.LEADER_CURVE' IN TYPEOF (con)))=1;

END_ENTITY;



ENTITY linear_dimension
  SUBTYPE OF (dimension_curve_directed_callout);
END_ENTITY;



ENTITY ordinate_dimension
   SUBTYPE OF (projection_directed_callout);
END_ENTITY;



ENTITY radius_dimension
  SUBTYPE OF (dimension_curve_directed_callout);
WHERE
  WR1: SIZEOF (QUERY (con <* SELF.contents |
       'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PROJECTION_CURVE' IN TYPEOF (con)))<=1;

END_ENTITY;



ENTITY structured_dimension_callout
  SUBTYPE OF (draughting_callout);
WHERE
  WR1: SIZEOF (TYPEOF (SELF) *
       ['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.DATUM_FEATURE_CALLOUT',
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.DATUM_TARGET_CALLOUT',
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.GEOMETRICAL_TOLERANCE_CALLOUT',
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.LEADER_DIRECTED_CALLOUT',
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PROJECTION_DIRECTED_CALLOUT',
        'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.DIMENSION_CURVE_DIRECTED_CALLOUT']) = 0;
  WR2: SIZEOF (QUERY (ato <* QUERY (con <* SELF.contents |
         ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANNOTATION_TEXT_OCCURRENCE'
             IN TYPEOF (con))) |
         NOT (ato.name IN
             ['dimension value', 'tolerance value', 'unit text',
              'prefix text', 'suffix text']))) = 0;
  WR3: SIZEOF (QUERY (ato <* QUERY (con <* SELF.contents |
         ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANNOTATION_TEXT_OCCURRENCE'
             IN TYPEOF (con))) |
         (ato.name = 'dimension value')
       )) >= 1;
  WR4: SIZEOF (QUERY (dcr <* USEDIN (SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
         'DRAUGHTING_CALLOUT_RELATIONSHIP.' +
         'RELATING_DRAUGHTING_CALLOUT') |
         ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
          'DIMENSION_CALLOUT_COMPONENT_RELATIONSHIP' IN TYPEOF (dcr)) AND 
         (dcr.name = 'prefix') )) <= 1;
  WR5: SIZEOF (QUERY (dcr <* USEDIN (SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
         'DRAUGHTING_CALLOUT_RELATIONSHIP.' +
         'RELATING_DRAUGHTING_CALLOUT') |
         ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
          'DIMENSION_CALLOUT_COMPONENT_RELATIONSHIP' IN TYPEOF (dcr)) AND 
         (dcr.name = 'suffix') )) <= 1;
  WR6: NOT((SIZEOF (QUERY (ato <* QUERY (con <* SELF.contents |
         ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANNOTATION_TEXT_OCCURRENCE'
             IN TYPEOF(con)) ) |
         (ato.name = 'prefix text')
       )) > 0)) OR
       (SIZEOF (QUERY (dcr <* USEDIN (SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
                               'DRAUGHTING_CALLOUT_RELATIONSHIP.' +
                               'RELATING_DRAUGHTING_CALLOUT') |
         ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
          'DIMENSION_CALLOUT_COMPONENT_RELATIONSHIP' IN TYPEOF (dcr)) AND  
         (dcr.name = 'prefix') )) = 1);
  WR7: NOT(SIZEOF (QUERY (ato <* QUERY (con <* SELF.contents |
         ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANNOTATION_TEXT_OCCURRENCE'
             IN TYPEOF(con))) |
         (ato.name = 'suffix text')
       )) > 0) OR
       (SIZEOF (QUERY (dcr <* USEDIN (SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
                               'DRAUGHTING_CALLOUT_RELATIONSHIP.' +
                               'RELATING_DRAUGHTING_CALLOUT') |
         ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +

          'DIMENSION_CALLOUT_COMPONENT_RELATIONSHIP' IN TYPEOF (dcr)) AND    
            (dcr.name = 'suffix') )) = 1);
END_ENTITY;



ENTITY annotation_fill_area
  SUBTYPE OF (geometric_representation_item);
  boundaries : SET [1:?] OF curve;
END_ENTITY;



ENTITY defined_symbol
  SUBTYPE OF(geometric_representation_item);
  definition : defined_symbol_select;
  target     : symbol_target;
END_ENTITY;



ENTITY defined_table
  SUBTYPE OF(defined_symbol);
END_ENTITY;



ENTITY symbol_target
  SUBTYPE OF (geometric_representation_item);
  placement         : axis2_placement;
  x_scale           : positive_ratio_measure;
  y_scale           : positive_ratio_measure;
END_ENTITY;



ENTITY pre_defined_symbol
  SUBTYPE OF (pre_defined_item);
END_ENTITY;



ENTITY externally_defined_symbol
  SUBTYPE OF (externally_defined_item);
END_ENTITY;



ENTITY annotation_symbol
  SUBTYPE OF(mapped_item);
WHERE
  WR1: 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SYMBOL_REPRESENTATION_MAP' IN
         TYPEOF (SELF\mapped_item.mapping_source);
  WR2: 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SYMBOL_TARGET' IN
         TYPEOF (SELF\mapped_item.mapping_target);
  WR3: 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.GEOMETRIC_REPRESENTATION_ITEM' IN

         TYPEOF (SELF);
END_ENTITY;



ENTITY annotation_table
  SUBTYPE OF(annotation_symbol);
WHERE
  WR1: 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.TABLE_REPRESENTATION' IN

         TYPEOF (SELF\mapped_item.mapping_source.mapped_representation);
END_ENTITY;



ENTITY symbol_representation_map
  SUBTYPE OF (representation_map);
WHERE
  WR1: 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SYMBOL_REPRESENTATION' IN
         TYPEOF (SELF\representation_map.mapped_representation);
  WR2: 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.AXIS2_PLACEMENT' IN

         TYPEOF (SELF\representation_map.mapping_origin);
END_ENTITY;



ENTITY symbol_representation
  SUBTYPE OF (representation);
END_ENTITY;



ENTITY symbol_representation_with_blanking_box
  SUBTYPE OF (symbol_representation);
  blanking : planar_box;
WHERE
  WR1: item_in_context (SELF.blanking, SELF\representation.context_of_items);
END_ENTITY;



ENTITY table_representation
  SUBTYPE OF (symbol_representation);
END_ENTITY;



ENTITY table_record_representation
  SUBTYPE OF (symbol_representation);
WHERE
  WR1: (SIZEOF(USEDIN(SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.'+ 
                            'REPRESENTATION_RELATIONSHIP.REP_2')) > 0) 
                        OR 
       (SIZEOF(QUERY( map_item <* USEDIN(SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.'+ 
                                               'REPRESENTATION_MAP.'+ 
                                               'MAPPED_REPRESENTATION') | 
         SIZEOF(QUERY( mi <* USEDIN(map_item, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.'+
                                              'MAPPED_ITEM.'+
                                              'MAPPING_SOURCE') |   
                                              'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.'+

                                              'TABLE_REPRESENTATION' IN 
             TYPEOF (using_representations (mi)) )) > 0))  
                    > 0);
END_ENTITY;



ENTITY table_record_field_representation
  SUBTYPE OF (symbol_representation);
WHERE
  WR1: (SIZEOF(USEDIN(SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.'+ 
                            'REPRESENTATION_RELATIONSHIP.REP_2')) > 0) 
                        OR 
       (SIZEOF(QUERY( map_item <* USEDIN(SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.'+ 
                                               'REPRESENTATION_MAP.'+ 
                                               'MAPPED_REPRESENTATION') | 
         SIZEOF(QUERY( mi <* USEDIN(map_item, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.'+
                                              'MAPPED_ITEM.'+
                                              'MAPPING_SOURCE') |   
                                         'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.'+

                                           'TABLE_RECORD_REPRESENTATION' IN 
             TYPEOF (using_representations (mi)) )) > 0))  
                    > 0);
END_ENTITY;



ENTITY table_record_field_representation_with_clipping_box
  SUBTYPE OF (table_record_field_representation);
  clipping_box : planar_box;
WHERE
   WR1: item_in_context (SELF.clipping_box, 
                         SELF\representation.context_of_items);
END_ENTITY;



ENTITY symbol_representation_relationship
  SUBTYPE OF (representation_relationship_with_transformation);
WHERE
  WR1: acyclic_symbol_representation_relationship (SELF,
                                                   [SELF\representation_relationship.
                                                         rep_2]);
  WR2: 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SYMBOL_REPRESENTATION' IN
         TYPEOF (SELF\representation_relationship.rep_1);
  WR3: 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SYMBOL_REPRESENTATION'IN

          TYPEOF (SELF\representation_relationship.rep_2);
END_ENTITY;



ENTITY table_representation_relationship
  SUBTYPE OF (symbol_representation_relationship);
WHERE
  WR1: NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.TABLE_RECORD_REPRESENTATION' IN
            TYPEOF (SELF\representation_relationship.rep_1))   
         XOR
       ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.TABLE_RECORD_FIELD_REPRESENTATION' IN
         TYPEOF (SELF\representation_relationship.rep_2));
  WR2: NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.TABLE_REPRESENTATION' IN
             TYPEOF (SELF\representation_relationship.rep_1))   
         XOR
       ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.TABLE_RECORD_REPRESENTATION' IN
         TYPEOF (SELF\representation_relationship.rep_2));
  WR3: NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.TABLE_RECORD_FIELD_REPRESENTATION' IN
            TYPEOF (SELF\representation_relationship.rep_1)) 
         XOR
       ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.TABLE_RECORD_FIELD_REPRESENTATION' IN

         TYPEOF (SELF\representation_relationship.rep_2));
END_ENTITY;



ENTITY annotation_text
  SUBTYPE OF (mapped_item);
WHERE
  WR1: 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.AXIS2_PLACEMENT' IN
       TYPEOF( SELF\mapped_item.mapping_target);
  WR2: 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.TEXT_STRING_REPRESENTATION' IN
       TYPEOF( SELF\mapped_item.mapping_source.mapped_representation);
  WR3: 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.GEOMETRIC_REPRESENTATION_ITEM' IN

       TYPEOF( SELF);
END_ENTITY;



ENTITY annotation_text_with_extent
  SUBTYPE OF (annotation_text);
  extent : planar_extent;
END_ENTITY;



ENTITY annotation_text_with_delineation
  SUBTYPE OF (annotation_text);
  delineation : text_delineation;
END_ENTITY;



ENTITY annotation_text_with_blanking_box
  SUBTYPE OF (annotation_text);
  blanking : planar_box;
END_ENTITY;



ENTITY annotation_text_with_associated_curves
  SUBTYPE OF (annotation_text);
  associated_curves : SET[1:?] of curve;
END_ENTITY;



ENTITY text_string_representation
  SUBTYPE OF (representation);
WHERE
  WR1: SIZEOF (
         QUERY (item <* SELF\representation.items |
           SIZEOF (['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.TEXT_LITERAL',
                    'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANNOTATION_TEXT',
                    'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANNOTATION_TEXT_CHARACTER',
                    'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.DEFINED_CHARACTER_GLYPH',
                    'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.COMPOSITE_TEXT',
                    'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.AXIS2_PLACEMENT'] * TYPEOF (item)) = 0
         )) = 0;
  WR2: SIZEOF (
         QUERY (item <* SELF\representation.items |
           NOT (SIZEOF (['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.TEXT_LITERAL',
                         'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANNOTATION_TEXT',
                         'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANNOTATION_TEXT_CHARACTER',
                         'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.DEFINED_CHARACTER_GLYPH',
                         'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.COMPOSITE_TEXT'] *
                 TYPEOF (item)) = 0)
         )) >= 1;
  WR3: SIZEOF (
         QUERY (a2p <* 
           QUERY (item <* SELF\representation.items | 
             'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.AXIS2_PLACEMENT' IN TYPEOF (item)) |
           NOT ((SIZEOF (
             QUERY (at <* 
               QUERY (item <* SELF\representation.items | 
                  'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 
                  'ANNOTATION_TEXT' IN TYPEOF (item)) | 
               (at\mapped_item.mapping_target :=: a2p))) >= 1) OR
           (SIZEOF (
             QUERY (atc <* 
               QUERY (item <* SELF\representation.items |
                 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 

                 'ANNOTATION_TEXT_CHARACTER' IN TYPEOF (item)) | 
               (atc\mapped_item.mapping_target :=: a2p))) >= 1)
          ))) = 0;
END_ENTITY;



ENTITY annotation_text_character
  SUBTYPE OF (mapped_item);
  alignment : text_alignment;
WHERE
  WR1: 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CHARACTER_GLYPH_SYMBOL' IN
         TYPEOF (SELF\mapped_item.mapping_source.mapped_representation);
  WR2: 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.AXIS2_PLACEMENT' IN
         TYPEOF (SELF\mapped_item.mapping_target);
  WR3: 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.GEOMETRIC_REPRESENTATION_ITEM' IN

         TYPEOF (SELF);
END_ENTITY;



ENTITY defined_character_glyph
  SUBTYPE OF(geometric_representation_item);
  definition : defined_glyph_select;
  placement  : axis2_placement;
END_ENTITY;



ENTITY externally_defined_character_glyph
  SUBTYPE OF (externally_defined_item);
END_ENTITY;



ENTITY pre_defined_character_glyph
  SUBTYPE OF (pre_defined_item);
END_ENTITY;



ENTITY text_literal
  SUBTYPE OF (geometric_representation_item);
  literal   : presentable_text;
  placement : axis2_placement;
  alignment : text_alignment;
  path      : text_path;
  font      : font_select;
END_ENTITY;



ENTITY text_literal_with_extent
  SUBTYPE OF (text_literal);
  extent : planar_extent;
END_ENTITY;



ENTITY text_literal_with_delineation
  SUBTYPE OF (text_literal);
  delineation : text_delineation;
END_ENTITY;



ENTITY text_literal_with_blanking_box
  SUBTYPE OF (text_literal);
  blanking : planar_box;
END_ENTITY;



ENTITY text_literal_with_associated_curves
  SUBTYPE OF (text_literal);
  associated_curves : SET[1:?] of curve;
END_ENTITY;



ENTITY composite_text
  SUBTYPE OF (geometric_representation_item);
  collected_text : SET[2:?] of text_or_character;
WHERE
  WR1: acyclic_composite_text( SELF, SELF.collected_text);
END_ENTITY;



ENTITY composite_text_with_extent
  SUBTYPE OF (composite_text);
  extent : planar_extent;
END_ENTITY;



ENTITY composite_text_with_delineation
  SUBTYPE OF (composite_text);
  delineation : text_delineation;
END_ENTITY;



ENTITY composite_text_with_blanking_box
  SUBTYPE OF (composite_text);
  blanking : planar_box;
END_ENTITY;



ENTITY composite_text_with_associated_curves
  SUBTYPE OF (composite_text);
  associated_curves : SET[1:?] of curve;
END_ENTITY;



ENTITY annotation_occurrence
  SUPERTYPE OF (ONEOF (
              ANNOTATION_POINT_OCCURRENCE,
              ANNOTATION_CURVE_OCCURRENCE,
              ANNOTATION_FILL_AREA_OCCURRENCE,
              ANNOTATION_TEXT_OCCURRENCE,
              ANNOTATION_SYMBOL_OCCURRENCE))
  SUBTYPE OF (styled_item);
WHERE
  WR1: 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.GEOMETRIC_REPRESENTATION_ITEM' IN

          TYPEOF (SELF);
END_ENTITY;



ENTITY annotation_point_occurrence
  SUBTYPE OF (annotation_occurrence);
WHERE
  WR1: 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.POINT' IN TYPEOF (SELF\styled_item.item);

END_ENTITY;



ENTITY annotation_curve_occurrence
  SUBTYPE OF (annotation_occurrence);
WHERE
  WR1: 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CURVE' IN TYPEOF (SELF\styled_item.item);

END_ENTITY;



ENTITY annotation_fill_area_occurrence
  SUBTYPE OF (annotation_occurrence);
  fill_style_target : point;
WHERE
  WR1: 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANNOTATION_FILL_AREA' IN

         TYPEOF (SELF.item);
END_ENTITY;



ENTITY annotation_text_occurrence
  SUBTYPE OF (annotation_occurrence);
WHERE
  WR1: SIZEOF (
         ['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.TEXT_LITERAL',
          'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANNOTATION_TEXT',
          'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANNOTATION_TEXT_CHARACTER',
          'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.DEFINED_CHARACTER_GLYPH',
          'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.COMPOSITE_TEXT'] *

         TYPEOF (SELF\styled_item.item)) > 0;
END_ENTITY;



ENTITY annotation_symbol_occurrence
  SUBTYPE OF (annotation_occurrence);
WHERE
  WR1: SIZEOF(
         ['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANNOTATION_SYMBOL',
          'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.DEFINED_SYMBOL'] *

         TYPEOF(SELF\styled_item.item)) > 0;
END_ENTITY;



ENTITY annotation_table_occurrence
  SUBTYPE OF (annotation_symbol_occurrence);
WHERE
  WR1: SIZEOF (
         ['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANNOTATION_TABLE',
          'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.DEFINED_TABLE'] *

         TYPEOF (SELF\styled_item.item)) > 0;
END_ENTITY;



ENTITY annotation_occurrence_relationship;
  name                           : label;
  description                    : text;
  relating_annotation_occurrence : annotation_occurrence;
  related_annotation_occurrence  : annotation_occurrence;
END_ENTITY;



ENTITY table_text_relationship
  SUBTYPE OF (annotation_occurrence_relationship);
  field : table_record_field_representation;
WHERE
  WR1: 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANNOTATION_TABLE_OCCURRENCE'
       IN TYPEOF (SELF\annotation_occurrence_relationship.
                  relating_annotation_occurrence);
  WR2: 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANNOTATION_TABLE'
       IN TYPEOF (SELF\annotation_occurrence_relationship.
                  relating_annotation_occurrence\styled_item.item);
  WR3: 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANNOTATION_TEXT_OCCURRENCE'

       IN TYPEOF (SELF\annotation_occurrence_relationship.
                  related_annotation_occurrence);
  WR4: field_in_table (SELF.field,
                       SELF\annotation_occurrence_relationship.
                       relating_annotation_occurrence);
END_ENTITY;



ENTITY certification_assignment
  ABSTRACT SUPERTYPE;
  assigned_certification : certification;
DERIVE
  role : object_role := get_role (SELF);
WHERE
  WR1: SIZEOF(USEDIN(SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'ROLE_ASSOCIATION.ITEM_WITH_ROLE')) <= 1;

END_ENTITY;



ENTITY class
  SUPERTYPE OF (ONEOF (
              CLASS_BY_EXTENSION,
              CLASS_BY_INTENSION))
  SUBTYPE OF (group);
END_ENTITY;



ENTITY class_by_extension
  SUBTYPE OF (class);
END_ENTITY;



ENTITY class_by_intension
  SUBTYPE OF (class);
END_ENTITY;




ENTITY group;
  name : label;
  description : OPTIONAL text;
DERIVE
  id : identifier := get_id_value (SELF);
WHERE
  WR1: SIZEOF (USEDIN (SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'ID_ATTRIBUTE.IDENTIFIED_ITEM')) <= 1;

END_ENTITY;



ENTITY classification_assignment
  ABSTRACT SUPERTYPE;
  assigned_class : group;
  role : classification_role;
END_ENTITY;

  

ENTITY advanced_face 
 SUBTYPE OF ( face_surface );
 WHERE 
WR1 : 
SIZEOF ([ 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ELEMENTARY_SURFACE', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.B_SPLINE_SURFACE', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SWEPT_SURFACE' ] * TYPEOF (face_geometry)) = 1;
WR2 : 
SIZEOF ( 
QUERY ( elp_fbnds <* 
QUERY ( bnds <* bounds| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.EDGE_LOOP' IN TYPEOF (bnds.bound)) )| NOT ( SIZEOF ( 
QUERY ( oe <* elp_fbnds.bound\path.edge_list| NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.EDGE_CURVE' IN TYPEOF (oe\oriented_edge.edge_element)) )) = 0) )) = 0;
WR3 : 
SIZEOF ( 
QUERY ( elp_fbnds <* 
QUERY ( bnds <* bounds| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.EDGE_LOOP' IN TYPEOF (bnds.bound)) )| NOT ( SIZEOF ( 
QUERY ( oe <* elp_fbnds.bound\path.edge_list| NOT ( SIZEOF ([ 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.LINE', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CONIC', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.POLYLINE', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SURFACE_CURVE', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.B_SPLINE_CURVE' ] * TYPEOF (oe.edge_element\edge_curve.edge_geometry)) = 1) )) = 0) )) = 0;
WR4 : 
SIZEOF ( 
QUERY ( elp_fbnds <* 
QUERY ( bnds <* bounds| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.EDGE_LOOP' IN TYPEOF (bnds.bound)) )| NOT ( SIZEOF ( 
QUERY ( oe <* elp_fbnds.bound\path.edge_list| NOT ((('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.VERTEX_POINT' IN TYPEOF (oe\edge.edge_start)) AND ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CARTESIAN_POINT' IN TYPEOF (oe\edge.edge_start\vertex_point.vertex_geometry))) AND (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.VERTEX_POINT' IN TYPEOF (oe\edge.edge_end)) AND ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CARTESIAN_POINT' IN TYPEOF (oe\edge.edge_end\vertex_point.vertex_geometry)))) )) = 0) )) = 0;
WR5 : 
SIZEOF ( 
QUERY ( elp_fbnds <* 
QUERY ( bnds <* bounds| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.EDGE_LOOP' IN TYPEOF (bnds.bound)) )| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ORIENTED_PATH' IN TYPEOF (elp_fbnds.bound)) )) = 0;
WR6 : NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SWEPT_SURFACE' IN TYPEOF (face_geometry)) OR ( SIZEOF ([ 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.LINE', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CONIC', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.POLYLINE', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.B_SPLINE_CURVE' ] * TYPEOF (face_geometry\swept_surface.swept_curve)) = 1);
WR7 : 
SIZEOF ( 
QUERY ( vlp_fbnds <* 
QUERY ( bnds <* bounds| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.VERTEX_LOOP' IN TYPEOF (bnds.bound)) )| NOT (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.VERTEX_POINT' IN TYPEOF (vlp_fbnds\face_bound.bound\vertex_loop.loop_vertex)) AND ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CARTESIAN_POINT' IN TYPEOF (vlp_fbnds\face_bound.bound\vertex_loop.loop_vertex\vertex_point.vertex_geometry))) )) = 0;
WR8 : 
SIZEOF ( 
QUERY ( bnd <* bounds| NOT ( SIZEOF ([ 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.EDGE_LOOP', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.VERTEX_LOOP' ] * TYPEOF (bnd.bound)) = 1) )) = 0;
WR9 : 
SIZEOF ( 
QUERY ( elp_fbnds <* 
QUERY ( bnds <* bounds| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.EDGE_LOOP' IN TYPEOF (bnds.bound)) )| NOT ( SIZEOF ( 
QUERY ( oe <* elp_fbnds.bound\path.edge_list| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SURFACE_CURVE' IN TYPEOF (oe\oriented_edge.edge_element\edge_curve.edge_geometry)) AND NOT ( SIZEOF ( 
QUERY ( sc_ag <* oe.edge_element\edge_curve.edge_geometry\surface_curve.associated_geometry| NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PCURVE' IN TYPEOF (sc_ag)) )) = 0) )) = 0) )) = 0;
WR10 : (NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SWEPT_SURFACE' IN TYPEOF (face_geometry)) OR (NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.POLYLINE' IN TYPEOF (face_geometry\swept_surface.swept_curve)) OR ( SIZEOF (face_geometry\swept_surface.swept_curve\polyline.points) >= 3))) AND ( SIZEOF ( 
QUERY ( elp_fbnds <* 
QUERY ( bnds <* bounds| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.EDGE_LOOP' IN TYPEOF (bnds.bound)) )| NOT ( SIZEOF ( 
QUERY ( oe <* elp_fbnds.bound\path.edge_list| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.POLYLINE' IN TYPEOF (oe\oriented_edge.edge_element\edge_curve.edge_geometry)) AND NOT ( SIZEOF (oe\oriented_edge.edge_element\edge_curve.edge_geometry\polyline.points) >= 3) )) = 0) )) = 0);

 END_ENTITY;



 ENTITY b_spline_curve
   SUPERTYPE OF (ONEOF (
              UNIFORM_CURVE,
              B_SPLINE_CURVE_WITH_KNOTS,
              QUASI_UNIFORM_CURVE,
              BEZIER_CURVE)
              ANDOR 
              RATIONAL_B_SPLINE_CURVE)
  SUBTYPE OF (bounded_curve);
   degree               : INTEGER;
   control_points_list  : LIST [2:?] OF cartesian_point;
   curve_form           : b_spline_curve_form;
   closed_curve         : LOGICAL;
   self_intersect       : LOGICAL;
 DERIVE
   upper_index_on_control_points  : INTEGER 
                                  := (SIZEOF(control_points_list) - 1);
   control_points       : ARRAY [0:upper_index_on_control_points]
                                                         OF cartesian_point 
                                  := list_to_array(control_points_list,0,
                                             upper_index_on_control_points);
 WHERE
   WR1: ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.UNIFORM_CURVE' IN TYPEOF(self)) OR
        ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.QUASI_UNIFORM_CURVE' IN TYPEOF(self)) OR
        ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.BEZIER_CURVE' IN TYPEOF(self)) OR
        ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.B_SPLINE_CURVE_WITH_KNOTS' IN TYPEOF(self));

 END_ENTITY;



 ENTITY b_spline_surface
   SUPERTYPE OF (ONEOF (
              B_SPLINE_SURFACE_WITH_KNOTS,
              UNIFORM_SURFACE,
              QUASI_UNIFORM_SURFACE,
              BEZIER_SURFACE)
              ANDOR 
              RATIONAL_B_SPLINE_SURFACE)
  SUBTYPE OF (bounded_surface);
   u_degree             : INTEGER;
   v_degree             : INTEGER;
   control_points_list  : LIST [2:?] OF
                            LIST [2:?] OF cartesian_point;
   surface_form         : b_spline_surface_form;
   u_closed             : LOGICAL;
   v_closed             : LOGICAL;
   self_intersect       : LOGICAL;
 DERIVE
   u_upper             : INTEGER := SIZEOF(control_points_list) - 1;
   v_upper             : INTEGER := SIZEOF(control_points_list[1]) - 1;
   control_points      : ARRAY [0:u_upper] OF ARRAY [0:v_upper] OF 
                         cartesian_point 
                       := make_array_of_array(control_points_list,
                                              0,u_upper,0,v_upper);
 WHERE
   WR1: ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.UNIFORM_SURFACE' IN TYPEOF(SELF)) OR
        ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.QUASI_UNIFORM_SURFACE' IN TYPEOF(SELF)) OR
        ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.BEZIER_SURFACE' IN TYPEOF(SELF)) OR
        ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.B_SPLINE_SURFACE_WITH_KNOTS' IN TYPEOF(SELF));

 END_ENTITY;



 ENTITY circle
   SUBTYPE OF (conic);
   radius   : positive_length_measure;
 END_ENTITY;



 ENTITY composite_curve
   SUBTYPE OF (bounded_curve);
   segments       : LIST [1:?] OF composite_curve_segment;
   self_intersect : LOGICAL;
 DERIVE
   n_segments     : INTEGER := SIZEOF(segments);
   closed_curve   : LOGICAL 
                  := segments[n_segments].transition <> discontinuous;
 WHERE
   WR1: ((NOT closed_curve) AND (SIZEOF(QUERY(temp <* segments |
                temp.transition = discontinuous)) = 1)) OR
            ((closed_curve) AND (SIZEOF(QUERY(temp <* segments | 
                temp.transition = discontinuous)) = 0));
 END_ENTITY;



 ENTITY
 conical_surface
   SUBTYPE OF (elementary_surface);
   radius     : length_measure;
   semi_angle : plane_angle_measure;
 WHERE
   WR1: radius >= 0.0;
 END_ENTITY;



ENTITY curve
   SUPERTYPE OF (ONEOF (
              LINE,
              CONIC,
              PCURVE,
              SURFACE_CURVE,
              OFFSET_CURVE_2D,
              OFFSET_CURVE_3D,
              CURVE_REPLICA))
  SUBTYPE OF (geometric_representation_item);
END_ENTITY;

 

 ENTITY curve_bounded_surface
    SUBTYPE OF (bounded_surface);
    basis_surface    : surface;
    boundaries       : SET [1:?] OF boundary_curve;
    implicit_outer   : BOOLEAN;
  WHERE
    WR1: (NOT implicit_outer) OR
         (SIZEOF (QUERY (temp <* boundaries |
           'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.OUTER_BOUNDARY_CURVE' IN TYPEOF(temp))) = 0);
    WR2: (NOT(implicit_outer)) OR
                ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.BOUNDED_SURFACE' IN TYPEOF(basis_surface));
    WR3: SIZEOF(QUERY(temp <* boundaries |
                  'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.OUTER_BOUNDARY_CURVE' IN

                                         TYPEOF(temp))) <= 1;
    WR4: SIZEOF(QUERY(temp <* boundaries |
            (temp\composite_curve_on_surface.basis_surface [1] <>
                                         SELF.basis_surface))) = 0;
 END_ENTITY;



 ENTITY curve_replica
   SUBTYPE OF (curve);
   parent_curve   : curve;
   transformation : cartesian_transformation_operator;
 WHERE
   WR1: transformation.dim = parent_curve.dim;
   WR2: acyclic_curve_replica (SELF, parent_curve);
 END_ENTITY;



 ENTITY cylindrical_surface
   SUBTYPE OF (elementary_surface);
   radius : positive_length_measure;
 END_ENTITY;



 ENTITY degenerate_pcurve
   SUBTYPE OF (point);
   basis_surface:  surface;
   reference_to_curve : definitional_representation;
 WHERE
   WR1: SIZEOF(reference_to_curve\representation.items) = 1;
   WR2: 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CURVE' IN TYPEOF

                    (reference_to_curve\representation.items[1]);
   WR3: reference_to_curve\representation.
                   items[1]\geometric_representation_item.dim =2;
 END_ENTITY;



 ENTITY ellipse
   SUBTYPE OF (conic);
   semi_axis_1 : positive_length_measure;
   semi_axis_2 : positive_length_measure;
 END_ENTITY;



 ENTITY hyperbola
   SUBTYPE OF (conic);
   semi_axis      : positive_length_measure;
   semi_imag_axis : positive_length_measure;
 END_ENTITY;



 ENTITY line
   SUBTYPE OF (curve);
   pnt : cartesian_point;
   dir : vector;
 WHERE
   WR1: dir.dim  = pnt.dim;
 END_ENTITY;



 ENTITY offset_curve_2d
   SUBTYPE OF (curve);
   basis_curve    : curve;
   distance       : length_measure;
   self_intersect : LOGICAL;
 WHERE
   WR1: basis_curve.dim = 2;
 END_ENTITY;



 ENTITY offset_curve_3d
   SUBTYPE OF (curve);
   basis_curve    : curve;
   distance       : length_measure;
   self_intersect : LOGICAL;
   ref_direction  : direction;
 WHERE
   WR1 : (basis_curve.dim = 3) AND (ref_direction.dim = 3);
 END_ENTITY;



 ENTITY offset_surface
   SUBTYPE OF (surface);
   basis_surface  : surface;
   distance       : length_measure;
   self_intersect : LOGICAL;
 END_ENTITY;



 ENTITY oriented_surface
   SUBTYPE OF (surface);
   orientation : BOOLEAN;
 END_ENTITY;



 ENTITY parabola
   SUBTYPE OF (conic);
   focal_dist : length_measure;
 WHERE
   WR1: focal_dist <> 0.0;
 END_ENTITY;



 ENTITY pcurve
   SUBTYPE OF (curve);
   basis_surface      : surface;
   reference_to_curve : definitional_representation;
 WHERE
   WR1: SIZEOF(reference_to_curve\representation.items) = 1;
   WR2: 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CURVE' IN TYPEOF

                    (reference_to_curve\representation.items[1]);
   WR3: reference_to_curve\representation.items[1]\
                               geometric_representation_item.dim =2;
 END_ENTITY;



 ENTITY placement
   SUPERTYPE OF (ONEOF (
              AXIS1_PLACEMENT,
              AXIS2_PLACEMENT_2D,
              AXIS2_PLACEMENT_3D))
  SUBTYPE OF (geometric_representation_item);
   location : cartesian_point;
 END_ENTITY;



 ENTITY plane
 SUBTYPE OF (elementary_surface);
 END_ENTITY;



 ENTITY point_on_curve
   SUBTYPE OF (point);
   basis_curve     : curve;
   point_parameter : parameter_value;
 END_ENTITY;



 ENTITY point_on_surface
   SUBTYPE OF (point);
   basis_surface     : surface;
   point_parameter_u : parameter_value;
   point_parameter_v : parameter_value;
 END_ENTITY;



 ENTITY point_replica
   SUBTYPE OF (point);
   parent_pt      : point;
   transformation : cartesian_transformation_operator;
 WHERE
   WR1: transformation.dim = parent_pt.dim;
   WR2: acyclic_point_replica (SELF,parent_pt);
 END_ENTITY;



 ENTITY polyline
   SUBTYPE OF (bounded_curve);
   points : LIST [2:?] OF cartesian_point;
 END_ENTITY;



 ENTITY rectangular_composite_surface
   SUBTYPE OF (bounded_surface);
   segments      : LIST [1:?] OF LIST [1:?] OF surface_patch;
 DERIVE
   n_u : INTEGER := SIZEOF(segments);
   n_v : INTEGER := SIZEOF(segments[1]);
 WHERE
   WR1: SIZEOF(QUERY (s <* segments | n_v <> SIZEOF (s))) = 0;
   WR2: constraints_rectangular_composite_surface(SELF);
 END_ENTITY;



 ENTITY rectangular_trimmed_surface
   SUBTYPE OF (bounded_surface);
   basis_surface : surface;
   u1            : parameter_value;
   u2            : parameter_value;
   v1            : parameter_value;
   v2            : parameter_value;
   usense        : BOOLEAN;
   vsense        : BOOLEAN;
 WHERE
   WR1: u1 <> u2;
   WR2: v1 <> v2;
   WR3: (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ELEMENTARY_SURFACE' IN TYPEOF(basis_surface))
       AND  (NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PLANE' IN TYPEOF(basis_surface)))) OR
      ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SURFACE_OF_REVOLUTION' IN TYPEOF(basis_surface))
          OR (usense = (u2 > u1));
   WR4: (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SPHERICAL_SURFACE' IN TYPEOF(basis_surface))
          OR
         ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.TOROIDAL_SURFACE' IN TYPEOF(basis_surface)))

          OR (vsense = (v2 > v1));
 END_ENTITY;



 ENTITY spherical_surface
   SUBTYPE OF (elementary_surface);
   radius   : positive_length_measure;
 END_ENTITY;



 ENTITY surface
   SUPERTYPE OF (ONEOF (
              ELEMENTARY_SURFACE,
              SWEPT_SURFACE,
              BOUNDED_SURFACE,
              OFFSET_SURFACE,
              SURFACE_REPLICA))
  SUBTYPE OF (geometric_representation_item);
 END_ENTITY;



 ENTITY surface_curve
   SUPERTYPE OF (ONEOF (
              INTERSECTION_CURVE,
              SEAM_CURVE)
              ANDOR 
              BOUNDED_SURFACE_CURVE)
  SUBTYPE OF (curve);
   curve_3d              : curve;
   associated_geometry   : LIST[1:2] OF pcurve_or_surface;
   master_representation : preferred_surface_curve_representation;
 DERIVE
   basis_surface         : SET[1:2] OF surface
                         := get_basis_surface(SELF);
 WHERE
   WR1: curve_3d.dim = 3;
   WR2: ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PCURVE' IN TYPEOF(associated_geometry[1])) OR
                        (master_representation <> pcurve_s1);
   WR3: ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PCURVE' IN TYPEOF(associated_geometry[2])) OR
                        (master_representation <> pcurve_s2);
   WR4: NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PCURVE' IN TYPEOF(curve_3d));

 END_ENTITY;



 ENTITY surface_of_linear_extrusion
   SUBTYPE OF (swept_surface);
   extrusion_axis      : vector;
 END_ENTITY;



 ENTITY surface_of_revolution
  SUBTYPE OF (swept_surface);
   axis_position       : axis1_placement;
 DERIVE
   axis_line : line := representation_item('')||
                     geometric_representation_item()|| curve()||
                     line(axis_position.location, representation_item('')||
                     geometric_representation_item()||
                     vector(axis_position.z, 1.0));
 END_ENTITY;



 ENTITY surface_replica
   SUBTYPE OF (surface);
   parent_surface : surface;
   transformation : cartesian_transformation_operator_3d;
 WHERE
   WR1: acyclic_surface_replica(SELF, parent_surface);
 END_ENTITY;



 ENTITY toroidal_surface
   SUBTYPE OF (elementary_surface);
   major_radius : positive_length_measure;
   minor_radius : positive_length_measure;
 END_ENTITY;



 ENTITY trimmed_curve
   SUBTYPE OF (bounded_curve);
   basis_curve           : curve;
   trim_1                : SET[1:2] OF trimming_select;
   trim_2                : SET[1:2] OF trimming_select;
   sense_agreement       : BOOLEAN;
   master_representation : trimming_preference;
 WHERE
   WR1: (HIINDEX(trim_1) = 1) OR (TYPEOF(trim_1[1]) <> TYPEOF(trim_1[2]));
   WR2: (HIINDEX(trim_2) = 1) OR (TYPEOF(trim_2[1]) <> TYPEOF(trim_2[2]));
 END_ENTITY;



 ENTITY block
   SUBTYPE OF (geometric_representation_item);
   position : axis2_placement_3d;
   x        : positive_length_measure;
   y        : positive_length_measure;
   z        : positive_length_measure;
 END_ENTITY;



 ENTITY boolean_result
   SUBTYPE OF (geometric_representation_item);
   operator        : boolean_operator;
   first_operand   :  boolean_operand;
   second_operand  :  boolean_operand;
 END_ENTITY;



 ENTITY boxed_half_space
   SUBTYPE OF(half_space_solid);
   enclosure : box_domain;
 END_ENTITY;



 ENTITY convex_hexahedron
   SUBTYPE OF (faceted_primitive);
  WHERE
    WR1: SIZEOF(points) = 8 ;
    WR2: above_plane(points[1], points[2], points[3], points[4]) = 0.0;
    WR3: above_plane(points[5], points[8], points[7], points[6]) = 0.0;
    WR4: above_plane(points[1], points[4], points[8], points[5]) = 0.0;
    WR5: above_plane(points[4], points[3], points[7], points[8]) = 0.0;
    WR6: above_plane(points[3], points[2], points[6], points[7]) = 0.0;
    WR7: above_plane(points[1], points[5], points[6], points[2]) = 0.0;
    WR8: same_side([points[1], points[2], points[3]],
                     [points[5], points[6], points[7], points[8]]);
    WR9: same_side([points[1], points[4], points[8]],
                     [points[3], points[7], points[6], points[2]]);
    WR10: same_side([points[1], points[2], points[5]],
                      [points[3], points[7], points[8], points[4]]);
    WR11: same_side([points[5], points[6], points[7]],
                     [points[1], points[2], points[3], points[4]]);
    WR12: same_side([points[3], points[7], points[6]],
                     [points[1], points[4], points[8], points[5]]);
    WR13: same_side([points[3], points[7], points[8]],
                      [points[1], points[5], points[6], points[2]]);
  END_ENTITY;



 ENTITY csg_solid
   SUBTYPE OF (solid_model);
   tree_root_expression : csg_select;
 END_ENTITY;



ENTITY cyclide_segment_solid
   SUBTYPE OF (geometric_representation_item);
   position    : axis2_placement_3d;
   radius1     : positive_length_measure;
   radius2     : positive_length_measure;
   cone_angle1 : plane_angle_measure;
   cone_angle2 : plane_angle_measure;
   turn_angle  : plane_angle_measure;
END_ENTITY;



 ENTITY eccentric_cone
  SUBTYPE OF (geometric_representation_item);
   position    : axis2_placement_3d;
   semi_axis_1 : positive_length_measure;
   semi_axis_2 : positive_length_measure;
   height      : positive_length_measure;
   x_offset    : length_measure;
   y_offset    : length_measure;
   ratio       : REAL;
 WHERE
  WR1 : ratio >= 0.0;
 END_ENTITY;



 ENTITY ellipsoid
   SUBTYPE OF (geometric_representation_item);
     position      : axis2_placement_3d;
     semi_axis_1 : positive_length_measure;
     semi_axis_2 : positive_length_measure;
     semi_axis_3 : positive_length_measure;
 END_ENTITY;



 ENTITY extruded_area_solid
   SUBTYPE OF (swept_area_solid);
   extruded_direction : direction;
   depth              : positive_length_measure;
 WHERE
   WR1: dot_product(
        (SELF\swept_area_solid.swept_area.basis_surface\
        elementary_surface.position.p[3]), extruded_direction) <> 0.0;
 END_ENTITY;



 ENTITY extruded_face_solid
   SUBTYPE OF (swept_face_solid);
   extruded_direction : direction;
   depth              : positive_length_measure;
 WHERE
   WR1: dot_product(
        (SELF\swept_face_solid.swept_face.face_geometry\
        elementary_surface.position.p[3]), extruded_direction) <> 0.0;
 END_ENTITY;



 ENTITY faceted_brep
   SUBTYPE OF (manifold_solid_brep);
 END_ENTITY;



 ENTITY faceted_primitive
   SUPERTYPE OF (ONEOF (
              TETRAHEDRON,
              CONVEX_HEXAHEDRON))
  SUBTYPE OF (geometric_representation_item) ;
     points : LIST[4:?] OF UNIQUE cartesian_point ;
  WHERE
    WR1: points[1].dim = 3 ;
  END_ENTITY;



 ENTITY half_space_solid
   SUBTYPE OF(geometric_representation_item);
   base_surface   : surface;
   agreement_flag : BOOLEAN;
 END_ENTITY;



 ENTITY manifold_solid_brep
   SUBTYPE OF (solid_model);
   outer : closed_shell;
 END_ENTITY;



 ENTITY rectangular_pyramid
   SUBTYPE OF (geometric_representation_item);
   position       : axis2_placement_3d;
   xlength        : positive_length_measure;
   ylength        : positive_length_measure;
   height         : positive_length_measure;
 END_ENTITY;



 ENTITY revolved_area_solid
   SUBTYPE OF (swept_area_solid);
   axis  : axis1_placement;
   angle : plane_angle_measure;
 DERIVE
  axis_line : line := representation_item('')||
                    geometric_representation_item()|| curve()||
                    line(axis.location, representation_item('')||
                    geometric_representation_item()||
                    vector(axis.z, 1.0));
 END_ENTITY;



ENTITY revolved_face_solid
   SUBTYPE OF (swept_face_solid);
   axis  : axis1_placement;
   angle : plane_angle_measure;
 DERIVE
  axis_line : line := representation_item('')||
                    geometric_representation_item()|| curve()||
                    line(axis.location, representation_item('')||
                    geometric_representation_item()||
                    vector(axis.z, 1.0));
 END_ENTITY;



 ENTITY right_angular_wedge
   SUBTYPE OF (geometric_representation_item);
   position : axis2_placement_3d;
   x        : positive_length_measure;
   y        : positive_length_measure;
   z        : positive_length_measure;
   ltx      : length_measure;
 WHERE
   WR1: ((0.0 <= ltx) AND (ltx < x));
 END_ENTITY;



 ENTITY right_circular_cone
   SUBTYPE OF (geometric_representation_item);
   position   : axis1_placement;
   height     : positive_length_measure;
   radius     : length_measure;
   semi_angle : plane_angle_measure;
 WHERE
   WR1: radius >= 0.0;
 END_ENTITY;



 ENTITY right_circular_cylinder
   SUBTYPE OF (geometric_representation_item);
   position   : axis1_placement;
   height     : positive_length_measure;
   radius     : positive_length_measure;
 END_ENTITY;




 ENTITY sphere
   SUBTYPE OF (geometric_representation_item);
   radius : positive_length_measure;
   centre : point;
 END_ENTITY;



 ENTITY solid_model
   SUPERTYPE OF (ONEOF (
              CSG_SOLID,
              MANIFOLD_SOLID_BREP,
              SWEPT_FACE_SOLID,
              SWEPT_AREA_SOLID,
              SOLID_REPLICA))
  SUBTYPE OF (geometric_representation_item);
 END_ENTITY;



 ENTITY solid_replica
   SUBTYPE OF (solid_model);
   parent_solid   : solid_model;
   transformation : cartesian_transformation_operator_3d;
 WHERE
   WR1: acyclic_solid_replica(SELF, parent_solid);
   WR2: parent_solid\geometric_representation_item.dim = 3;
 END_ENTITY;



 ENTITY surface_curve_swept_area_solid
   SUBTYPE OF (swept_area_solid);
      directrix          : curve;
      start_param        : REAL;
      end_param          : REAL;
      reference_surface  : surface;
   WHERE
     WR1 : (NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SURFACE_CURVE' IN TYPEOF(directrix))) OR

          (reference_surface IN (directrix\surface_curve.basis_surface));
 END_ENTITY;



 ENTITY surface_curve_swept_face_solid
   SUBTYPE OF (swept_face_solid);
      directrix          : curve;
      start_param        : REAL;
      end_param          : REAL;
      reference_surface  : surface;
   WHERE
     WR1 : (NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SURFACE_CURVE' IN TYPEOF(directrix))) OR

          (reference_surface IN (directrix\surface_curve.basis_surface));
 END_ENTITY;



 ENTITY swept_area_solid
   SUPERTYPE OF (ONEOF (
              REVOLVED_AREA_SOLID,
              EXTRUDED_AREA_SOLID,
              SURFACE_CURVE_SWEPT_AREA_SOLID))
  SUBTYPE OF (solid_model);
   swept_area :  curve_bounded_surface;
 WHERE
   WR1: 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PLANE' IN TYPEOF(swept_area.basis_surface);

 END_ENTITY;



 ENTITY swept_face_solid
   SUPERTYPE OF (ONEOF (
              EXTRUDED_FACE_SOLID,
              REVOLVED_FACE_SOLID,
              SURFACE_CURVE_SWEPT_FACE_SOLID))
  SUBTYPE OF (solid_model);
   swept_face :  face_surface;
 WHERE
   WR1: 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PLANE' IN TYPEOF(swept_face.face_geometry);

 END_ENTITY;



 ENTITY tetrahedron
   SUBTYPE OF (faceted_primitive);
  WHERE
    WR1: SIZEOF(points) = 4 ;
    WR2: above_plane(points[1], points[2], points[3], points[4]) <> 0.0;
  END_ENTITY;



 ENTITY torus
   SUBTYPE OF (geometric_representation_item);
   position     : axis1_placement;
   major_radius : positive_length_measure;
   minor_radius : positive_length_measure;
 WHERE
   WR1: major_radius > minor_radius;
 END_ENTITY;



ENTITY contract_assignment
  ABSTRACT SUPERTYPE;
  assigned_contract : contract;
DERIVE
  role : object_role := get_role (SELF);
WHERE
  WR1: SIZEOF(USEDIN(SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'ROLE_ASSOCIATION.ITEM_WITH_ROLE')) <= 1;

END_ENTITY;



ENTITY curve_style_font;
  name         : label;
  pattern_list : LIST [1:?] OF curve_style_font_pattern;
END_ENTITY;



ENTITY curve_style_font_pattern;
  visible_segment_length   : positive_length_measure;
  invisible_segment_length : positive_length_measure;
END_ENTITY;



ENTITY externally_defined_curve_font
  SUBTYPE OF (externally_defined_item);
END_ENTITY;



ENTITY pre_defined_curve_font
  SUBTYPE OF (pre_defined_item);
END_ENTITY;



ENTITY pre_defined_marker
  SUBTYPE OF (pre_defined_item);
END_ENTITY;



 ENTITY externally_defined_colour
  SUBTYPE OF (colour_specification,externally_defined_item);
END_ENTITY;



ENTITY externally_defined_item;
  item_id : source_item;
  source  : external_source;
END_ENTITY;



ENTITY colour_rgb
  SUBTYPE OF (colour_specification);
  red   : REAL;
  green : REAL;
  blue  : REAL;
WHERE
  WR1: {0.0 <= red <= 1.0};
  WR2: {0.0 <= green <= 1.0};
  WR3: {0.0 <= blue <= 1.0};
END_ENTITY;



ENTITY colour_specification
  SUBTYPE OF (colour);
  name : label;
END_ENTITY;



ENTITY pre_defined_colour
  SUBTYPE OF (pre_defined_item, colour);
END_ENTITY;



ENTITY calendar_date
  SUBTYPE OF (date);
  day_component : day_in_month_number;
  month_component : month_in_year_number;
WHERE
  WR1: valid_calendar_date (SELF);
END_ENTITY;



ENTITY date_and_time;
  date_component : date;
  time_component : local_time;
END_ENTITY;



ENTITY coordinated_universal_time_offset;
  hour_offset : INTEGER;
  minute_offset : OPTIONAL INTEGER;
  sense : ahead_or_behind;
DERIVE
  actual_minute_offset : INTEGER := NVL(minute_offset,0);
WHERE
  WR1: { 0 <= hour_offset < 24 };
  WR2: { 0 <= actual_minute_offset <= 59 };
  WR3: NOT (((hour_offset <> 0) OR (actual_minute_offset <>0)) AND (sense = exact));
END_ENTITY;



ENTITY date
  SUPERTYPE OF (ONEOF (
              CALENDAR_DATE));
  year_component : year_number;
END_ENTITY;



ENTITY date_and_time_assignment
  ABSTRACT SUPERTYPE;
  assigned_date_and_time : date_and_time;
  role : date_time_role;
END_ENTITY;



ENTITY date_assignment
  ABSTRACT SUPERTYPE;
  assigned_date : date;
  role : date_role;
END_ENTITY;



ENTITY compound_representation_item
  SUBTYPE OF (representation_item);
  item_element : compound_item_definition;
END_ENTITY;



ENTITY apex
  SUBTYPE OF (derived_shape_aspect);
END_ENTITY;



ENTITY centre_of_symmetry 
   SUBTYPE OF (derived_shape_aspect);
WHERE
    WR1: SIZEOF
        (QUERY(sadr<*SELF\derived_shape_aspect.deriving_relationships|
    NOT('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SYMMETRIC_SHAPE_ASPECT'

     IN TYPEOF
     (sadr\shape_aspect_relationship.related_shape_aspect))))=0; 
END_ENTITY;



ENTITY derived_shape_aspect
  SUPERTYPE OF (ONEOF (
              APEX,
              CENTRE_OF_SYMMETRY,
              GEOMETRIC_ALIGNMENT,
              GEOMETRIC_INTERSECTION,
              PARALLEL_OFFSET,
              PERPENDICULAR_TO,
              EXTENSION,
              TANGENT))
  SUBTYPE OF (shape_aspect);
INVERSE
  deriving_relationships : SET [1:?] OF
          shape_aspect_relationship FOR relating_shape_aspect;
WHERE
   WR1: SIZEOF (QUERY (dr <*
          SELF\derived_shape_aspect.deriving_relationships |
          NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +

               'SHAPE_ASPECT_DERIVING_RELATIONSHIP'
          IN TYPEOF (dr)))) = 0;
END_ENTITY;



ENTITY extension
  SUBTYPE OF (derived_shape_aspect);
WHERE
  WR1: SIZEOF (SELF\derived_shape_aspect.deriving_relationships)= 1;
END_ENTITY;



ENTITY geometric_alignment
  SUBTYPE OF (derived_shape_aspect);
WHERE
  WR1: SIZEOF (SELF\derived_shape_aspect.deriving_relationships)> 1;
END_ENTITY;



ENTITY geometric_intersection
  SUBTYPE OF (derived_shape_aspect);
WHERE
  WR1: SIZEOF (SELF\derived_shape_aspect.deriving_relationships)> 1;
END_ENTITY;



ENTITY parallel_offset
  SUBTYPE OF (derived_shape_aspect);
  offset               : measure_with_unit;
WHERE
  WR1: SIZEOF (SELF\derived_shape_aspect.deriving_relationships)= 1;
END_ENTITY;



ENTITY perpendicular_to
  SUBTYPE OF (derived_shape_aspect);
WHERE
  WR1: SIZEOF (SELF\derived_shape_aspect.deriving_relationships)= 1;
END_ENTITY;



ENTITY shape_aspect_deriving_relationship
       SUBTYPE OF (shape_aspect_relationship);
     WHERE
       WR1: 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.DERIVED_SHAPE_ASPECT' IN

TYPEOF
            (SELF\SHAPE_ASPECT_RELATIONSHIP.RELATING_SHAPE_ASPECT);
     END_ENTITY;



ENTITY tangent
  SUBTYPE OF (derived_shape_aspect);
WHERE
  WR1: SIZEOF (SELF\derived_shape_aspect.deriving_relationships)= 1;
END_ENTITY;



ENTITY double_toleranced_measure_item
  SUBTYPE OF (compound_representation_item);
  SELF\compound_representation_item.item_element : list_of_two_representation_items;
END_ENTITY;



ENTITY value_range
  SUBTYPE OF (compound_representation_item);
WHERE
  WR1: ( 'value_with_unit_mim.'+ 'SET_REPRESENTATION_ITEM' IN TYPEOF ( item_element ) ) AND value_range_wr1 ( item_element );
  WR2: value_range_wr2 ( item_element );
  WR3: value_range_wr3 ( item_element );
END_ENTITY;



ENTITY measure_qualification;
  name : label;
  description : text;
  qualified_measure : measure_with_unit;
  qualifiers : SET [1:?] OF value_qualifier;
WHERE
  WR1: SIZEOF(QUERY(temp <* qualifiers |
             'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PRECISION_QUALIFIER'

             IN TYPEOF(temp))) < 2;
END_ENTITY;



ENTITY angular_location
  SUBTYPE OF (dimensional_location);
  angle_selection : angle_relator;
END_ENTITY;



ENTITY angular_size
  SUBTYPE OF (dimensional_size);
  angle_selection : angle_relator;
END_ENTITY;



ENTITY dimensional_characteristic_representation;
  dimension      : dimensional_characteristic; 
  representation : shape_dimension_representation;
END_ENTITY;



ENTITY dimensional_location
  SUPERTYPE OF (ONEOF (
              ANGULAR_LOCATION,
              DIMENSIONAL_LOCATION_WITH_PATH))
  SUBTYPE OF (shape_aspect_relationship);
END_ENTITY;



ENTITY dimensional_location_with_path
  SUBTYPE OF (dimensional_location);
  path : shape_aspect;
END_ENTITY;



ENTITY dimensional_size
  SUPERTYPE OF (ONEOF (
              ANGULAR_SIZE,
              DIMENSIONAL_SIZE_WITH_PATH));
  applies_to : shape_aspect;
  name       : label;
WHERE
  WR1: applies_to.product_definitional = TRUE;
END_ENTITY;



ENTITY dimensional_size_with_path
  SUBTYPE OF (dimensional_size);
  path : shape_aspect;
END_ENTITY;



ENTITY shape_dimension_representation
                SUBTYPE OF (shape_representation);
  WHERE
   WR1: SIZEOF (QUERY (temp <* SELF\representation.items | 
    NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MEASURE_REPRESENTATION_ITEM' 

        IN TYPEOF (temp)))) = 0;
   WR2: SIZEOF (SELF\representation.items) <= 3;
   WR3: SIZEOF (QUERY (pos_mri <* QUERY (real_mri <*
        SELF\representation.items | 'REAL' IN TYPEOF
        (real_mri\measure_with_unit.value_component) ) |        
     NOT  (pos_mri\measure_with_unit.value_component > 0.0 ))) = 0;
END_ENTITY;



ENTITY limits_and_fits;
  form_variance   : label;
  zone_variance   : label;
  grade           : label;
  source          : text;
END_ENTITY;



ENTITY  plus_minus_tolerance;
  range                : tolerance_method_definition; 
  toleranced_dimension : dimensional_characteristic;
UNIQUE
  UR1: toleranced_dimension;
END_ENTITY;



ENTITY tolerance_value; 
   lower_bound : measure_with_unit; 
   upper_bound : measure_with_unit;
WHERE 
   WR1: upper_bound\measure_with_unit.value_component >
        lower_bound\measure_with_unit.value_component;  
   WR2: upper_bound\measure_with_unit.unit_component =
        lower_bound\measure_with_unit.unit_component;
END_ENTITY;



ENTITY document_product_association;
  name : label;
  description : OPTIONAL text;
  relating_document : document;
  related_product : product_or_formation_or_definition;
END_ENTITY;



ENTITY document_reference
  ABSTRACT SUPERTYPE;
  assigned_document : document;
  source : label;
DERIVE
  role : object_role := get_role (SELF);
WHERE
  WR1: SIZEOF(USEDIN(SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'ROLE_ASSOCIATION.ITEM_WITH_ROLE')) <= 1;

END_ENTITY;



ENTITY document_usage_constraint_assignment
  ABSTRACT SUPERTYPE;
  assigned_document_usage : document_usage_constraint;
  role : document_usage_role;
END_ENTITY;



ENTITY product_definition_with_associated_documents
  SUBTYPE OF (product_definition);
  documentation_ids : SET[1:?] OF document;
END_ENTITY;



ENTITY document_usage_role;
  name : label;
  description : OPTIONAL text;
END_ENTITY;

  

ENTITY edge_based_wireframe_shape_representation 
 SUBTYPE OF ( shape_representation );
 WHERE 
WR1 : 
SIZEOF ( 
QUERY ( it <* SELF.items| NOT ( SIZEOF ([ 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.EDGE_BASED_WIREFRAME_MODEL', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MAPPED_ITEM', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.AXIS2_PLACEMENT_3D' ] * TYPEOF (it)) = 1) )) = 0;
WR2 : 
SIZEOF ( 
QUERY ( it <* SELF.items| ( SIZEOF ([ 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.EDGE_BASED_WIREFRAME_MODEL', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MAPPED_ITEM' ] * TYPEOF (it)) = 1) )) >= 1;
WR3 : 
SIZEOF ( 
QUERY ( ebwm <* 
QUERY ( it <* SELF.items| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.EDGE_BASED_WIREFRAME_MODEL' IN TYPEOF (it)) )| NOT ( SIZEOF ( 
QUERY ( eb <* ebwm\edge_based_wireframe_model.ebwm_boundary| NOT ( SIZEOF ( 
QUERY ( edges <* eb.ces_edges| NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.EDGE_CURVE' IN TYPEOF (edges)) )) = 0) )) = 0) )) = 0;
WR4 : 
SIZEOF ( 
QUERY ( ebwm <* 
QUERY ( it <* SELF.items| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.EDGE_BASED_WIREFRAME_MODEL' IN TYPEOF (it)) )| NOT ( SIZEOF ( 
QUERY ( eb <* ebwm\edge_based_wireframe_model.ebwm_boundary| NOT ( SIZEOF ( 
QUERY ( pline_edges <* 
QUERY ( edges <* eb.ces_edges| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.POLYLINE' IN TYPEOF (edges\edge_curve.edge_geometry)) )| NOT ( SIZEOF (pline_edges\edge_curve.edge_geometry\polyline.points) > 2) )) = 0) )) = 0) )) = 0;
WR5 : 
SIZEOF ( 
QUERY ( ebwm <* 
QUERY ( it <* SELF.items| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.EDGE_BASED_WIREFRAME_MODEL' IN TYPEOF (it)) )| NOT ( SIZEOF ( 
QUERY ( eb <* ebwm\edge_based_wireframe_model.ebwm_boundary| NOT ( SIZEOF ( 
QUERY ( edges <* eb.ces_edges| NOT (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.VERTEX_POINT' IN TYPEOF (edges.edge_start)) AND ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.VERTEX_POINT' IN TYPEOF (edges.edge_end))) )) = 0) )) = 0) )) = 0;
WR6 : 
SIZEOF ( 
QUERY ( ebwm <* 
QUERY ( it <* SELF.items| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.EDGE_BASED_WIREFRAME_MODEL' IN TYPEOF (it)) )| NOT ( SIZEOF ( 
QUERY ( eb <* ebwm\edge_based_wireframe_model.ebwm_boundary| NOT ( SIZEOF ( 
QUERY ( edges <* eb.ces_edges| NOT valid_wireframe_edge_curve(edges\edge_curve.edge_geometry) )) = 0) )) = 0) )) = 0;
WR7 : 
SIZEOF ( 
QUERY ( ebwm <* 
QUERY ( it <* SELF.items| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.EDGE_BASED_WIREFRAME_MODEL' IN TYPEOF (it)) )| NOT ( SIZEOF ( 
QUERY ( eb <* ebwm\edge_based_wireframe_model.ebwm_boundary| NOT ( SIZEOF ( 
QUERY ( edges <* eb.ces_edges| NOT (valid_wireframe_vertex_point(edges.edge_start\vertex_point.vertex_geometry) AND valid_wireframe_vertex_point(edges.edge_end\vertex_point.vertex_geometry)) )) = 0) )) = 0) )) = 0;
WR8 : 
SIZEOF ( 
QUERY ( mi <* 
QUERY ( it <* SELF.items| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MAPPED_ITEM' IN TYPEOF (it)) )| NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'EDGE_BASED_WIREFRAME_SHAPE_REPRESENTATION' IN TYPEOF (mi\mapped_item.mapping_source.mapped_representation)) )) = 0;

WR9 : SELF.context_of_items\geometric_representation_context.coordinate_space_dimension = 3;
 END_ENTITY;




ENTITY dated_effectivity
  SUBTYPE OF (effectivity);
  effectivity_end_date : OPTIONAL date_time_or_event_occurrence;
  effectivity_start_date : date_time_or_event_occurrence;
END_ENTITY;



ENTITY lot_effectivity
  SUBTYPE OF (effectivity);
  effectivity_lot_id : identifier;
  effectivity_lot_size : measure_with_unit;
END_ENTITY;



ENTITY serial_numbered_effectivity
  SUBTYPE OF (effectivity);
  effectivity_start_id : identifier;
  effectivity_end_id : OPTIONAL identifier;
END_ENTITY;



ENTITY effectivity_assignment
  ABSTRACT SUPERTYPE;
  assigned_effectivity : effectivity;
DERIVE
  role : object_role := get_role(SELF);
WHERE
  WR1: SIZEOF(USEDIN(SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'ROLE_ASSOCIATION.ITEM_WITH_ROLE')) <= 1;

END_ENTITY;



 ENTITY cartesian_point
   
  SUBTYPE OF (point);
    coordinates  : LIST [1:3] OF length_measure;
 END_ENTITY;



 ENTITY direction
   SUBTYPE OF (geometric_representation_item);
   direction_ratios : LIST [2:3] OF REAL;
 WHERE
   WR1: SIZEOF(QUERY(tmp <* direction_ratios | tmp <> 0.0)) > 0;
 END_ENTITY;



 ENTITY axis2_placement_2d
   SUBTYPE OF (placement);
   ref_direction : OPTIONAL direction;
 DERIVE
   p             : LIST [2:2] OF direction := build_2axes(ref_direction);
 WHERE
   WR1: SELF\geometric_representation_item.dim = 2;
 END_ENTITY;



 ENTITY axis2_placement_3d
   SUBTYPE OF (placement);
   axis          : OPTIONAL direction;
   ref_direction : OPTIONAL direction;
 DERIVE
   p             : LIST [3:3] OF direction := build_axes(axis,ref_direction);
 WHERE
   WR1: SELF\placement.location.dim = 3;
   WR2: (NOT (EXISTS (axis))) OR (axis.dim = 3);
   WR3: (NOT (EXISTS (ref_direction))) OR (ref_direction.dim = 3);
   WR4: (NOT (EXISTS (axis))) OR (NOT (EXISTS (ref_direction))) OR
          (cross_product(axis,ref_direction).magnitude > 0.0);
 END_ENTITY;



ENTITY geometric_representation_context
  SUBTYPE OF (representation_context);
  coordinate_space_dimension : dimension_count;
END_ENTITY;



 ENTITY cartesian_transformation_operator_2d
   SUBTYPE OF (cartesian_transformation_operator);
 DERIVE
   u : LIST[2:2] OF direction := 
       base_axis(2,SELF\cartesian_transformation_operator.axis1,
                   SELF\cartesian_transformation_operator.axis2,?);
 WHERE
   WR1: SELF\geometric_representation_item.dim = 2;
 END_ENTITY;



 ENTITY cartesian_transformation_operator_3d
   SUBTYPE OF (cartesian_transformation_operator);
   axis3 : OPTIONAL direction;
 DERIVE
   u     : LIST[3:3] OF direction 
         := base_axis(3,SELF\cartesian_transformation_operator.axis1,
                        SELF\cartesian_transformation_operator.axis2,axis3);
 WHERE
   WR1: SELF\geometric_representation_item.dim = 3;
 END_ENTITY;



ENTITY shape_representation_relationship
  SUBTYPE OF (representation_relationship);
WHERE
  WR1: 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SHAPE_REPRESENTATION' IN (TYPEOF(SELF\representation_relationship.rep_1) + TYPEOF(SELF\representation_relationship.rep_2));

END_ENTITY;



ENTITY item_defined_transformation;
  name             : label;
  description      : OPTIONAL text;
  transform_item_1 : representation_item;
  transform_item_2 : representation_item;
END_ENTITY;



ENTITY value_representation_item
SUBTYPE OF (representation_item);
  value_component : measure_value;
WHERE
  WR1: SIZEOF (QUERY (rep <* using_representations (SELF) |
       NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.GLOBAL_UNIT_ASSIGNED_CONTEXT'

       IN TYPEOF (rep.context_of_items)
       ))) = 0;
END_ENTITY;



ENTITY event_occurrence_relationship;
  name : label;
  description : OPTIONAL text;
  relating_event : event_occurrence;
  related_event : event_occurrence;
END_ENTITY;



ENTITY relative_event_occurrence
  SUBTYPE OF (event_occurrence);
  base_event : event_occurrence;
  offset : time_measure_with_unit;
END_ENTITY;



ENTITY event_occurrence_assignment
  ABSTRACT SUPERTYPE;
  assigned_event_occurrence : event_occurrence;
  role : event_occurrence_role;
END_ENTITY;



ENTITY external_identification_assignment
  ABSTRACT SUPERTYPE
  SUBTYPE OF (identification_assignment);
  source : external_source;
END_ENTITY;



ENTITY property_definition_representation;
  definition : represented_definition;
  used_representation : representation;
DERIVE
  description : text := get_description_value (SELF);
  name : label := get_name_value (SELF);
WHERE
  WR1: SIZEOF (USEDIN (SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'DESCRIPTION_ATTRIBUTE.DESCRIBED_ITEM')) <= 1;
  WR2: SIZEOF (USEDIN (SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'NAME_ATTRIBUTE.NAMED_ITEM')) <= 1;

END_ENTITY;

  

ENTITY faceted_brep_shape_representation 
 SUBTYPE OF ( shape_representation );
 WHERE 
WR1 : 
SIZEOF ( 
QUERY ( it <* items| NOT ( SIZEOF ([ 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.FACETED_BREP', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MAPPED_ITEM', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.AXIS2_PLACEMENT_3D' ] * TYPEOF (it)) = 1) )) = 0;
WR2 : 
SIZEOF ( 
QUERY ( it <* items| ( SIZEOF ([ 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.FACETED_BREP', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MAPPED_ITEM' ] * TYPEOF (it)) = 1) )) > 0;
WR3 : 
SIZEOF ( 
QUERY ( fbrep <* 
QUERY ( it <* items| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.FACETED_BREP' IN TYPEOF (it)) )| NOT ( SIZEOF ( 
QUERY ( csh <* msb_shells(fbrep)| NOT ( SIZEOF ( 
QUERY ( fcs <* csh\connected_face_set.cfs_faces| NOT (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.FACE_SURFACE' IN TYPEOF (fcs)) AND (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PLANE' IN TYPEOF (fcs\face_surface.face_geometry)) AND ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CARTESIAN_POINT' IN TYPEOF (fcs\face_surface.face_geometry\elementary_surface.position.location)))) )) = 0) )) = 0) )) = 0;
WR4 : 
SIZEOF ( 
QUERY ( fbrep <* 
QUERY ( it <* items| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.FACETED_BREP' IN TYPEOF (it)) )| NOT ( SIZEOF ( 
QUERY ( csh <* msb_shells(fbrep)| NOT ( SIZEOF ( 
QUERY ( fcs <* csh\connected_face_set.cfs_faces| NOT ( SIZEOF ( 
QUERY ( bnds <* fcs.bounds| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.FACE_OUTER_BOUND' IN TYPEOF (bnds)) )) = 1) )) = 0) )) = 0) )) = 0;
WR5 : 
SIZEOF ( 
QUERY ( msb <* 
QUERY ( it <* items| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MANIFOLD_SOLID_BREP' IN TYPEOF (it)) )| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ORIENTED_CLOSED_SHELL' IN TYPEOF (msb\manifold_solid_brep.outer)) )) = 0;
WR6 : 
SIZEOF ( 
QUERY ( brv <* 
QUERY ( it <* items| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.BREP_WITH_VOIDS' IN TYPEOF (it)) )| NOT ( SIZEOF ( 
QUERY ( csh <* brv\brep_with_voids.voids| csh\oriented_closed_shell.orientation )) = 0) )) = 0;
WR7 : 
SIZEOF ( 
QUERY ( mi <* 
QUERY ( it <* items| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MAPPED_ITEM' IN TYPEOF (it)) )| NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.FACETED_BREP_SHAPE_REPRESENTATION' IN TYPEOF (mi\mapped_item.mapping_source.mapped_representation)) )) = 0;

 END_ENTITY;



ENTITY document;
  id : identifier;
  name : label;
  description : OPTIONAL text;
  kind : document_type;
INVERSE
  representation_types : SET[0:?] OF document_representation_type FOR represented_document;
END_ENTITY;



ENTITY document_representation_type;
  name : label;
  represented_document : document;
END_ENTITY;



ENTITY characterized_object;
  name : label;
  description : OPTIONAL text;
END_ENTITY;



ENTITY global_unit_assigned_context
  SUBTYPE OF (representation_context);
  units : SET[1:?] OF unit;
END_ENTITY;



ENTITY global_uncertainty_assigned_context
  SUBTYPE OF (representation_context);
  uncertainty : SET [1:?] OF uncertainty_measure_with_unit;
END_ENTITY;



ENTITY representation_context;
  context_identifier : identifier;
  context_type       : text;
INVERSE
  representations_in_context : SET [1:?] OF representation
    FOR context_of_items;
END_ENTITY;



ENTITY representation_item;
  name : label;
WHERE
  WR1: SIZEOF(using_representations(SELF)) > 0;
END_ENTITY;

  

ENTITY angularity_tolerance 
 SUBTYPE OF ( geometric_tolerance_with_datum_reference );
 WHERE 
WR1 : 
SIZEOF (SELF\geometric_tolerance_with_datum_reference.datum_system) < 3;
 END_ENTITY;

ENTITY circular_runout_tolerance 
 SUBTYPE OF ( geometric_tolerance_with_datum_reference );
 WHERE 
WR1 : 
SIZEOF (SELF\geometric_tolerance_with_datum_reference.datum_system) <= 2;
 END_ENTITY;

ENTITY coaxiality_tolerance 
 SUBTYPE OF ( geometric_tolerance_with_datum_reference );
 WHERE 
WR1 : 
SIZEOF (SELF\geometric_tolerance_with_datum_reference.datum_system) <= 2;
 END_ENTITY;

ENTITY common_datum 
 SUBTYPE OF ( composite_shape_aspect , datum );
 WHERE 
WR1 : 
SIZEOF (SELF.component_relationships) = 2;
WR2 : 
SIZEOF ( 
QUERY ( sar <* SELF.component_relationships| NOT (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.DATUM' IN TYPEOF (sar.related_shape_aspect)) AND NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.COMMON_DATUM' IN TYPEOF (sar.related_shape_aspect))) )) = 0;

 END_ENTITY;

ENTITY concentricity_tolerance 
 SUBTYPE OF ( geometric_tolerance_with_datum_reference );
 WHERE 
WR1 : 
SIZEOF (SELF\geometric_tolerance_with_datum_reference.datum_system) = 1;
 END_ENTITY;

ENTITY cylindricity_tolerance 
 SUBTYPE OF ( geometric_tolerance );
 WHERE 
WR1 : NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'GEOMETRIC_TOLERANCE_WITH_DATUM_REFERENCE' IN TYPEOF (SELF));

 END_ENTITY;

ENTITY flatness_tolerance 
 SUBTYPE OF ( geometric_tolerance );
 WHERE 
WR1 : NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'GEOMETRIC_TOLERANCE_WITH_DATUM_REFERENCE' IN TYPEOF (SELF));

 END_ENTITY;

ENTITY line_profile_tolerance 
 SUBTYPE OF ( geometric_tolerance );
 WHERE 
WR1 : NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'GEOMETRIC_TOLERANCE_WITH_DATUM_REFERENCE' IN TYPEOF (SELF)) OR ( SIZEOF (SELF\geometric_tolerance_with_datum_reference.datum_system) <= 3);
WR2 : 
SIZEOF ( 
QUERY ( sar <* USEDIN (SELF\geometric_tolerance.toleranced_shape_aspect, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'SHAPE_ASPECT_RELATIONSHIP.RELATING_SHAPE_ASPECT')| (sar.name IN [ 'affected plane association', 'resulting intersection curve association' ]) )) = 1;

 END_ENTITY;

ENTITY parallelism_tolerance 
 SUBTYPE OF ( geometric_tolerance_with_datum_reference );
 WHERE 
WR1 : 
SIZEOF (SELF\geometric_tolerance_with_datum_reference.datum_system) < 3;
 END_ENTITY;

ENTITY perpendicularity_tolerance 
 SUBTYPE OF ( geometric_tolerance_with_datum_reference );
 WHERE 
WR1 : 
SIZEOF (SELF\geometric_tolerance_with_datum_reference.datum_system) <= 3;
 END_ENTITY;

ENTITY position_tolerance 
 SUBTYPE OF ( geometric_tolerance );
 WHERE 
WR1 : NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'GEOMETRIC_TOLERANCE_WITH_DATUM_REFERENCE' IN TYPEOF (SELF)) OR ( SIZEOF (SELF\geometric_tolerance_with_datum_reference.datum_system) <= 3);

 END_ENTITY;

ENTITY roundness_tolerance 
 SUBTYPE OF ( geometric_tolerance );
 WHERE 
WR1 : NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'GEOMETRIC_TOLERANCE_WITH_DATUM_REFERENCE' IN TYPEOF (SELF));

 END_ENTITY;

ENTITY straightness_tolerance 
 SUBTYPE OF ( geometric_tolerance );
 WHERE 
WR1 : NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'GEOMETRIC_TOLERANCE_WITH_DATUM_REFERENCE' IN TYPEOF (SELF));

 END_ENTITY;

ENTITY surface_profile_tolerance 
 SUBTYPE OF ( geometric_tolerance );
 WHERE 
WR1 : NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'GEOMETRIC_TOLERANCE_WITH_DATUM_REFERENCE' IN TYPEOF (SELF)) OR ( SIZEOF (SELF\geometric_tolerance_with_datum_reference.datum_system) <= 3);

 END_ENTITY;

ENTITY symmetry_tolerance 
 SUBTYPE OF ( geometric_tolerance_with_datum_reference );
 WHERE 
WR1 : 
SIZEOF (SELF\geometric_tolerance_with_datum_reference.datum_system) <= 3;
 END_ENTITY;

ENTITY total_runout_tolerance 
 SUBTYPE OF ( geometric_tolerance_with_datum_reference );
 WHERE 
WR1 : 
SIZEOF (SELF\geometric_tolerance_with_datum_reference.datum_system) <= 2;
 END_ENTITY;



ENTITY precision_qualifier;
  precision_value : INTEGER;
END_ENTITY;



ENTITY type_qualifier;
  name : label;
END_ENTITY;



ENTITY datum_target
  SUBTYPE OF (shape_aspect);
  target_id             : identifier; 
INVERSE
  target_basis_relationship : shape_aspect_relationship FOR
                              relating_shape_aspect;
WHERE
   WR1: SIZEOF (QUERY (sar<* bag_to_set (USEDIN (SELF,
     'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SHAPE_ASPECT_RELATIONSHIP.' +
       'RELATING_SHAPE_ASPECT'))
      | NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.DATUM' IN TYPEOF 

      (sar\shape_aspect_relationship.related_shape_aspect))))=0;
   WR2: SELF\shape_aspect.product_definitional = TRUE;
END_ENTITY;



ENTITY shape_definition_representation
  SUBTYPE OF (property_definition_representation);
WHERE
  WR1: ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PRODUCT_DEFINITION_SHAPE' IN TYPEOF (SELF.definition)) OR ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SHAPE_DEFINITION' IN TYPEOF (SELF.definition.definition));
  WR2: 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SHAPE_REPRESENTATION' IN TYPEOF(SELF.used_representation);

END_ENTITY;

  

ENTITY geometrically_bounded_surface_shape_representation 
 SUBTYPE OF ( shape_representation );
 WHERE 
WR1 : 
SIZEOF ( 
QUERY ( it <* SELF.items| NOT ( SIZEOF ([ 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.GEOMETRIC_SET', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MAPPED_ITEM', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.AXIS2_PLACEMENT_3D' ] * TYPEOF (it)) = 1) )) = 0;
WR2 : 
SIZEOF ( 
QUERY ( it <* SELF.items| ( SIZEOF ([ 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.GEOMETRIC_SET', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MAPPED_ITEM' ] * TYPEOF (it)) = 1) )) > 0;
WR3 : 
SIZEOF ( 
QUERY ( mi <* 
QUERY ( it <* SELF.items| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MAPPED_ITEM' IN TYPEOF (it)) )| NOT (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'GEOMETRICALLY_BOUNDED_SURFACE_SHAPE_REPRESENTATION' IN TYPEOF (mi\mapped_item.mapping_source.mapped_representation)) AND ( SIZEOF ( 
QUERY ( mr_it <* mi\mapped_item.mapping_source.mapped_representation.items| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.GEOMETRIC_SET' IN TYPEOF (mr_it)) )) > 0)) )) = 0;
WR4 : 
SIZEOF ( 
QUERY ( gs <* 
QUERY ( it <* SELF.items| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.GEOMETRIC_SET' IN TYPEOF (it)) )| NOT ( SIZEOF ( 
QUERY ( pnt <* 
QUERY ( gsel <* gs\geometric_set.elements| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.POINT' IN TYPEOF (gsel)) )| NOT gbsf_check_point(pnt) )) = 0) )) = 0;
WR5 : 
SIZEOF ( 
QUERY ( gs <* 
QUERY ( it <* SELF.items| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.GEOMETRIC_SET' IN TYPEOF (it)) )| NOT ( SIZEOF ( 
QUERY ( cv <* 
QUERY ( gsel <* gs\geometric_set.elements| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CURVE' IN TYPEOF (gsel)) )| NOT gbsf_check_curve(cv) )) = 0) )) = 0;
WR6 : 
SIZEOF ( 
QUERY ( gs <* 
QUERY ( it <* SELF.items| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.GEOMETRIC_SET' IN TYPEOF (it)) )| NOT ( SIZEOF ( 
QUERY ( sf <* 
QUERY ( gsel <* gs\geometric_set.elements| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SURFACE' IN TYPEOF (gsel)) )| NOT gbsf_check_surface(sf) )) = 0) )) = 0;
WR7 : 
SIZEOF ( 
QUERY ( gs <* 
QUERY ( it <* SELF.items| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.GEOMETRIC_SET' IN TYPEOF (it)) )| ( SIZEOF ( 
QUERY ( gsel <* gs\geometric_set.elements| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SURFACE' IN TYPEOF (gsel)) )) > 0) )) > 0;

 END_ENTITY;

  

ENTITY geometrically_bounded_wireframe_shape_representation 
 SUBTYPE OF ( shape_representation );
 WHERE 
WR1 : 
SIZEOF ( 
QUERY ( it <* SELF.items| NOT ( SIZEOF ( TYPEOF (it) * [ 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.GEOMETRIC_CURVE_SET', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.AXIS2_PLACEMENT_3D', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MAPPED_ITEM' ]) = 1) )) = 0;
WR2 : 
SIZEOF ( 
QUERY ( it <* SELF.items| ( SIZEOF ( TYPEOF (it) * [ 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.GEOMETRIC_CURVE_SET', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MAPPED_ITEM' ]) = 1) )) >= 1;
WR3 : 
SIZEOF ( 
QUERY ( gcs <* 
QUERY ( it <* SELF.items| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.GEOMETRIC_CURVE_SET' IN TYPEOF (it)) )| NOT ( SIZEOF ( 
QUERY ( crv <* 
QUERY ( elem <* gcs\geometric_set.elements| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CURVE' IN TYPEOF (elem)) )| NOT valid_geometrically_bounded_wf_curve(crv) )) = 0) )) = 0;
WR4 : 
SIZEOF ( 
QUERY ( gcs <* 
QUERY ( it <* SELF.items| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.GEOMETRIC_CURVE_SET' IN TYPEOF (it)) )| NOT ( SIZEOF ( 
QUERY ( pnts <* 
QUERY ( elem <* gcs\geometric_set.elements| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.POINT' IN TYPEOF (elem)) )| NOT valid_geometrically_bounded_wf_point(pnts) )) = 0) )) = 0;
WR5 : 
SIZEOF ( 
QUERY ( gcs <* 
QUERY ( it <* SELF.items| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.GEOMETRIC_CURVE_SET' IN TYPEOF (it)) )| NOT ( SIZEOF ( 
QUERY ( cnc <* 
QUERY ( elem <* gcs\geometric_set.elements| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CONIC' IN TYPEOF (elem)) )| NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.AXIS2_PLACEMENT_3D' IN TYPEOF (cnc\conic.position)) )) = 0) )) = 0;
WR6 : 
SIZEOF ( 
QUERY ( gcs <* 
QUERY ( it <* SELF.items| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.GEOMETRIC_CURVE_SET' IN TYPEOF (it)) )| NOT ( SIZEOF ( 
QUERY ( pline <* 
QUERY ( elem <* gcs\geometric_set.elements| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.POLYLINE' IN TYPEOF (elem)) )| NOT ( SIZEOF (pline\polyline.points) > 2) )) = 0) )) = 0;
WR7 : 
SIZEOF ( 
QUERY ( mi <* 
QUERY ( it <* SELF.items| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MAPPED_ITEM' IN TYPEOF (it)) )| NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'GEOMETRICALLY_BOUNDED_WIREFRAME_SHAPE_REPRESENTATION' IN TYPEOF (mi\mapped_item.mapping_source.mapped_representation)) )) = 0;

 END_ENTITY;



ENTITY identification_assignment
  ABSTRACT SUPERTYPE;
  assigned_id : identifier;
  role : identification_role;
END_ENTITY;



ENTITY certification_type;
  description : label;
END_ENTITY;



ENTITY organizational_project_role;
  name : label;
  description : OPTIONAL text;
END_ENTITY;



ENTITY person_and_organization;
  the_person : person;
  the_organization : organization;
DERIVE
  description : text := get_description_value(SELF);
  name : label := get_name_value (SELF);
WHERE
  WR1: SIZEOF (USEDIN (SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'NAME_ATTRIBUTE.NAMED_ITEM')) <= 1;
  WR2: SIZEOF (USEDIN (SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'DESCRIPTION_ATTRIBUTE.DESCRIBED_ITEM')) <= 1;

END_ENTITY;



ENTITY manifold_surface_shape_representation 
   SUBTYPE OF (shape_representation); 
WHERE 
  WR1: SIZEOF (QUERY (it <* SELF.items |
       NOT (SIZEOF (['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SHELL_BASED_SURFACE_MODEL',
       'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MAPPED_ITEM',
       'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.AXIS2_PLACEMENT_3D'] * TYPEOF (it)) = 1))) = 0;
  WR2: SIZEOF (QUERY (it <* SELF.items |
       SIZEOF (['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SHELL_BASED_SURFACE_MODEL',
       'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MAPPED_ITEM'] * TYPEOF (it)) = 1)) > 0;
  WR3: SIZEOF (QUERY (mi <* QUERY (it <* SELF.items |
       'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MAPPED_ITEM' IN TYPEOF (it)) |
       NOT (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MANIFOLD_SURFACE_SHAPE_REPRESENTATION'
       IN TYPEOF (mi\mapped_item.mapping_source.mapped_representation))
       AND
       (SIZEOF(QUERY (mr_it <*
       mi\mapped_item.mapping_source.mapped_representation.items |
       ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SHELL_BASED_SURFACE_MODEL'
       IN TYPEOF (mr_it)))) > 0 )))) = 0;
  WR4: SIZEOF (QUERY (sbsm <* QUERY (it <* SELF.items |
       'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SHELL_BASED_SURFACE_MODEL' IN TYPEOF (it)) |
       NOT (SIZEOF (QUERY (sh <*
       sbsm\shell_based_surface_model.sbsm_boundary |
       NOT (SIZEOF (['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.OPEN_SHELL',
       'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ORIENTED_CLOSED_SHELL',
       'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CLOSED_SHELL']
       * TYPEOF (sh)) = 1))) = 0))) = 0;
  WR5: SIZEOF (QUERY (sbsm <* QUERY (it <* SELF.items |
       'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SHELL_BASED_SURFACE_MODEL' IN TYPEOF (it)) |
       NOT (SIZEOF (QUERY (cfs <*
       sbsm\shell_based_surface_model.sbsm_boundary |
       NOT (SIZEOF (QUERY (fa <* cfs\connected_face_set.cfs_faces |
       NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.FACE_SURFACE' IN TYPEOF (fa)) )) = 0)))
       = 0))) = 0;
  WR6: SIZEOF (QUERY (sbsm <* QUERY (it <* SELF.items |
       'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SHELL_BASED_SURFACE_MODEL' IN TYPEOF (it)) |
       NOT (SIZEOF (QUERY (cfs <*
       sbsm\shell_based_surface_model.sbsm_boundary |
       NOT (SIZEOF (QUERY (fa <* cfs\connected_face_set.cfs_faces |
       NOT (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ADVANCED_FACE' IN TYPEOF (fa))
       OR
       (msf_surface_check(fa\face_surface.face_geometry))))) = 0))) 
       = 0))) = 0;
  WR7: SIZEOF (QUERY (sbsm <* QUERY (it <* SELF.items |
       'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SHELL_BASED_SURFACE_MODEL' IN TYPEOF (it)) |
       NOT (SIZEOF (QUERY (cfs <*
       sbsm\shell_based_surface_model.sbsm_boundary |
       NOT (SIZEOF (QUERY (fa <* cfs\connected_face_set.cfs_faces |
       NOT (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ADVANCED_FACE' IN TYPEOF (fa))
       OR
       (SIZEOF (QUERY (bnds <* fa.bounds |
       NOT (SIZEOF (['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.EDGE_LOOP',
       'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.VERTEX_LOOP']
       * TYPEOF (bnds.bound)) = 1))) = 0)))) = 0))) = 0))) = 0;
  WR8: SIZEOF (QUERY (sbsm <* QUERY (it <* SELF.items|
       'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SHELL_BASED_SURFACE_MODEL' IN TYPEOF (it)) |
       NOT (SIZEOF (QUERY (cfs <*
       sbsm\shell_based_surface_model.sbsm_boundary |
       NOT (SIZEOF (QUERY (fa <* cfs\connected_face_set.cfs_faces |
       NOT (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ADVANCED_FACE' IN TYPEOF (fa))
       OR
       (SIZEOF (QUERY (elp_fbnds <* QUERY (bnds <* fa.bounds |
       'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.EDGE_LOOP' IN TYPEOF (bnds.bound)) |
       NOT (SIZEOF (QUERY (oe <* elp_fbnds\path.edge_list |
       NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.EDGE_CURVE' IN TYPEOF 
       (oe.edge_element)))) = 0))) = 0)))) = 0))) = 0))) = 0;
  WR9: SIZEOF (QUERY (sbsm <* QUERY (it <* SELF.items |
       'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SHELL_BASED_SURFACE_MODEL' IN TYPEOF (it)) |
       NOT (SIZEOF (QUERY (cfs <*
       sbsm\shell_based_surface_model.sbsm_boundary |
       NOT (SIZEOF (QUERY (fa <* cfs\connected_face_set.cfs_faces |
       NOT (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ADVANCED_FACE' IN TYPEOF (fa))
       OR
       (SIZEOF (QUERY (elp_fbnds <* QUERY (bnds <* fa.bounds |
       'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.EDGE_LOOP' IN TYPEOF (bnds.bound)) |
       NOT (SIZEOF (QUERY (oe_cv <* QUERY (oe <* 
       elp_fbnds\path.edge_list |
       'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.EDGE_CURVE' IN TYPEOF (oe.edge_element)) |
       NOT (SIZEOF (['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.B_SPLINE_CURVE',
       'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CONIC',
       'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CURVE_REPLICA',
       'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.LINE',
       'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.OFFSET_CURVE_3D',
       'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PCURVE',
       'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.POLYLINE',
       'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SURFACE_CURVE'] * 
       TYPEOF (oe_cv.edge_element\edge_curve.edge_geometry)) 
       = 1))) = 0))) = 0)))) = 0))) = 0))) = 0;
 WR10: SIZEOF (QUERY (sbsm <* QUERY (it <* SELF.items |
       'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SHELL_BASED_SURFACE_MODEL' IN TYPEOF (it)) |
       NOT (SIZEOF (QUERY (cfs <*
       sbsm\shell_based_surface_model.sbsm_boundary |
       NOT (SIZEOF (QUERY (fa <* cfs\connected_face_set.cfs_faces |
       NOT (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ADVANCED_FACE' IN TYPEOF (fa))
       OR
       (SIZEOF (QUERY (elp_fbnds <* QUERY (bnds <* fa.bounds |
       'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.EDGE_LOOP' IN TYPEOF (bnds.bound)) |
       NOT (SIZEOF (QUERY (oe <* elp_fbnds\path.edge_list |
       NOT (msf_curve_check (oe.edge_element\edge_curve.edge_geometry)))) 
       = 0))) = 0)))) = 0))) = 0))) = 0;
 WR11: SIZEOF (QUERY(sbsm <* QUERY (it <* SELF.items |
       'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SHELL_BASED_SURFACE_MODEL' IN TYPEOF (it)) |
       NOT (SIZEOF (QUERY (cfs <*
       sbsm\shell_based_surface_model.sbsm_boundary |
       NOT (SIZEOF (QUERY (fa <* cfs\connected_face_set.cfs_faces |
       NOT (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ADVANCED_FACE' IN TYPEOF (fa))
       OR
       (SIZEOF (QUERY (elp_fbnds <* QUERY (bnds <* fa.bounds |
       'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.EDGE_LOOP' IN TYPEOF (bnds.bound)) |
       NOT (SIZEOF (QUERY (oe <* elp_fbnds\path.edge_list|
       NOT (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.VERTEX_POINT' IN TYPEOF
       (oe.edge_element.edge_start))
       AND
       ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.VERTEX_POINT' IN
       TYPEOF (oe.edge_element.edge_end))))) 
       = 0))) = 0)))) = 0))) = 0))) = 0;
 WR12: SIZEOF (QUERY (sbsm <* QUERY (it <* SELF.items |
       'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SHELL_BASED_SURFACE_MODEL' IN TYPEOF (it)) |
       NOT (SIZEOF (QUERY (cfs <*
       sbsm\shell_based_surface_model.sbsm_boundary |
       NOT (SIZEOF (QUERY (fa <* cfs\connected_face_set.cfs_faces |
       NOT (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ADVANCED_FACE' IN TYPEOF (fa))
       OR
       (SIZEOF (QUERY (elp_fbnds <* QUERY (bnds <* fa.bounds |
       'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.EDGE_LOOP' IN TYPEOF (bnds.bound)) |
       NOT (SIZEOF (QUERY (oe <* elp_fbnds\path.edge_list |
       NOT ((SIZEOF (['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CARTESIAN_POINT',
       'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.DEGENERATE_PCURVE',
       'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.POINT_ON_CURVE',
       'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.POINT_ON_SURFACE'] * TYPEOF
       (oe.edge_element.edge_start\vertex_point.vertex_geometry)) = 1)
       AND
       (SIZEOF (['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CARTESIAN_POINT',
       'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.DEGENERATE_PCURVE',
       'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.POINT_ON_CURVE',
       'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.POINT_ON_SURFACE'] * TYPEOF
       (oe.edge_element.edge_end\vertex_point.vertex_geometry)) = 1
       )))) = 0))) = 0)))) = 0))) = 0))) = 0;
 WR13: SIZEOF (QUERY (sbsm <* QUERY (it <* SELF.items |
       'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SHELL_BASED_SURFACE_MODEL' IN TYPEOF (it)) |
       NOT (SIZEOF (QUERY (cfs <* 
       sbsm\shell_based_surface_model.sbsm_boundary |
       NOT (SIZEOF (QUERY (fa <* cfs\connected_face_set.cfs_faces |
       NOT (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ADVANCED_FACE' IN TYPEOF (fa))
       OR
       (SIZEOF (QUERY (vlp_fbnds <* QUERY (bnds <* fa.bounds |
       'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.VERTEX_LOOP' IN TYPEOF (bnds.bound)) |
       NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.VERTEX_POINT' IN TYPEOF
       (vlp_fbnds\vertex_loop.loop_vertex)))) = 0)))) = 0))) 
       = 0))) = 0;
 WR14: SIZEOF (QUERY (sbsm <* QUERY (it <* SELF.items |
       'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SHELL_BASED_SURFACE_MODEL' IN TYPEOF (it)) |
       NOT (SIZEOF (QUERY (cfs <* 
       sbsm\shell_based_surface_model.sbsm_boundary |
       NOT (SIZEOF (QUERY (fa <* cfs\connected_face_set.cfs_faces |
       NOT (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ADVANCED_FACE' IN TYPEOF (fa))
       OR
       (SIZEOF (QUERY (vlp_fbnds <* QUERY (bnds <* fa.bounds |
       'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.VERTEX_LOOP' IN TYPEOF (bnds.bound)) |
       NOT (SIZEOF (['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CARTESIAN_POINT',
       'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.DEGENERATE_PCURVE',
       'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.POINT_ON_CURVE',
       'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.POINT_ON_SURFACE'] * TYPEOF

       (vlp_fbnds\vertex_loop.loop_vertex\vertex_point.vertex_geometry)) 
       = 1))) = 0)))) = 0))) = 0))) = 0;
END_ENTITY;



ENTITY attribute_classification_assignment
  ABSTRACT SUPERTYPE;
  assigned_class : group;
  attribute_name : label;
  role : classification_role;
END_ENTITY;



ENTITY address;
  internal_location : OPTIONAL label;
  street_number : OPTIONAL label;
  street : OPTIONAL label;
  postal_box : OPTIONAL label;
  town : OPTIONAL label;
  region : OPTIONAL label;
  postal_code : OPTIONAL label;
  country : OPTIONAL label;
  facsimile_number : OPTIONAL label;
  telephone_number : OPTIONAL label;
  electronic_mail_address : OPTIONAL label;
  telex_number : OPTIONAL label;
DERIVE
  name : label := get_name_value(SELF);
  url : identifier := get_id_value(SELF);
WHERE
  WR1: EXISTS(internal_location) OR EXISTS(street_number) OR EXISTS(street) OR EXISTS(postal_box) OR EXISTS(town) OR EXISTS(region) OR EXISTS(postal_code) OR EXISTS(country) OR EXISTS(facsimile_number) OR EXISTS(telephone_number) OR EXISTS(electronic_mail_address) OR EXISTS(telex_number);
END_ENTITY;



ENTITY person;
  id : identifier;
  last_name : OPTIONAL label;
  first_name : OPTIONAL label;
  middle_names : OPTIONAL LIST[1:?] OF label;
  prefix_titles : OPTIONAL LIST[1:?] OF label;
  suffix_titles : OPTIONAL LIST[1:?] OF label;
WHERE
  WR1: EXISTS(last_name) OR EXISTS(first_name);
END_ENTITY;



ENTITY personal_address
  SUBTYPE OF (address);
  people : SET[1:?] OF person;
  description : OPTIONAL text;
END_ENTITY;



ENTITY organizational_address
  SUBTYPE OF (address);
  organizations : SET[1:?] OF organization;
  description : OPTIONAL text;
END_ENTITY;



ENTITY organization_assignment
  ABSTRACT SUPERTYPE;
  assigned_organization : organization;
  role : organization_role;
END_ENTITY;



ENTITY person_and_organization_assignment
  ABSTRACT SUPERTYPE;
  assigned_person_and_organization : person_and_organization;
  role : person_and_organization_role;
END_ENTITY;



ENTITY action_property_representation;
  name           : label;
  description    : text;
  property       : action_property;
  representation : representation;
END_ENTITY;



ENTITY action_property;
  name        : label;
  description : text;
  definition  : characterized_action_definition;
END_ENTITY;



ENTITY general_property_association;
  name : label;
  description : OPTIONAL text;
  base_definition : general_property;
  derived_definition : derived_property_select;
WHERE
  WR1: SIZEOF( USEDIN( derived_definition, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'GENERAL_PROPERTY_ASSOCIATION.' + 'DERIVED_DEFINITION')) = 1;

  WR2: derived_definition.name = base_definition.name;
END_ENTITY;



ENTITY product_category_relationship;
  name : label;
  description : OPTIONAL text;
  category : product_category;
  sub_category : product_category;
WHERE
  WR1: acyclic_product_category_relationship (SELF, [SELF.sub_category]);
END_ENTITY;



ENTITY product_concept_context
  SUBTYPE OF (application_context_element);
  market_segment_type : label;
END_ENTITY;



ENTITY next_assembly_usage_occurrence
  SUBTYPE OF (assembly_component_usage);
END_ENTITY;



ENTITY promissory_usage_occurrence
  SUBTYPE OF (assembly_component_usage);
END_ENTITY;



ENTITY quantified_assembly_component_usage
  SUBTYPE OF (assembly_component_usage);
  quantity   : measure_with_unit;
WHERE
  WR1: (NOT ('NUMBER' IN TYPEOF(quantity.value_component)))
       OR (quantity.value_component > 0);
END_ENTITY;



ENTITY specified_higher_usage_occurrence
  SUBTYPE OF (assembly_component_usage);
  upper_usage   : assembly_component_usage;
  next_usage    : next_assembly_usage_occurrence;
UNIQUE
  UR1: upper_usage, next_usage;
WHERE
  WR1: SELF :<>: upper_usage;
  WR2: SELF\product_definition_relationship.relating_product_definition
       :=: upper_usage.relating_product_definition;
  WR3: SELF\product_definition_relationship.related_product_definition
       :=: next_usage.related_product_definition;
  WR4: (upper_usage.related_product_definition :=:
       next_usage.relating_product_definition) OR
       (SIZEOF (QUERY (pdr <* USEDIN (upper_usage.related_product_definition,
       'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PRODUCT_DEFINITION_RELATIONSHIP.' +
       'RELATED_PRODUCT_DEFINITION') |
        pdr.relating_product_definition :=: 
        next_usage.relating_product_definition)) = 1);
  WR5: SIZEOF (['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.NEXT_ASSEMBLY_USAGE_OCCURRENCE',
       'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SPECIFIED_HIGHER_USAGE_OCCURRENCE']

       * TYPEOF(upper_usage)) = 1;
END_ENTITY;



ENTITY context_dependent_shape_representation;
  representation_relation : shape_representation_relationship;
  represented_product_relation : product_definition_shape;
DERIVE
  description : text := get_description_value (SELF);
  name : label := get_name_value (SELF);
WHERE
  WR1: 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PRODUCT_DEFINITION_RELATIONSHIP' IN TYPEOF (SELF.represented_product_relation.definition);
  WR2: SIZEOF (USEDIN (SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'DESCRIPTION_ATTRIBUTE.DESCRIBED_ITEM')) <= 1;
  WR3: SIZEOF (USEDIN (SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'NAME_ATTRIBUTE.NAMED_ITEM')) <= 1;

END_ENTITY;



ENTITY functionally_defined_transformation;
  name        : label;
  description : OPTIONAL text;
END_ENTITY;



ENTITY representation_relationship_with_transformation
  SUBTYPE OF (representation_relationship);
  transformation_operator : transformation;
WHERE
  WR1:
   SELF\representation_relationship.rep_1.context_of_items
   :<>: SELF\representation_relationship.rep_2.context_of_items;
END_ENTITY;



ENTITY product_definition_context_association;
  definition : product_definition;
  frame_of_reference : product_definition_context;
  role : product_definition_context_role;
END_ENTITY;



ENTITY organizational_project_assignment
  ABSTRACT SUPERTYPE;
  assigned_organizational_project : organizational_project;
  role : organizational_project_role;
END_ENTITY;



ENTITY qualified_representation_item
  SUBTYPE OF (representation_item);
  qualifiers : SET [1:?] OF value_qualifier;
WHERE
  WR1: SIZEOF(QUERY(temp <* qualifiers |
             'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PRECISION_QUALIFIER'

             IN TYPEOF(temp))) < 2;
END_ENTITY;



ENTITY standard_uncertainty
  
  SUBTYPE OF (uncertainty_qualifier);
  uncertainty_value : REAL;
END_ENTITY;



ENTITY uncertainty_assigned_representation
  SUBTYPE OF (representation);
  uncertainty : SET [1:?] OF uncertainty_measure_with_unit;
END_ENTITY;



ENTITY fill_area_style_colour;
  name        : label;
  fill_colour : colour;
END_ENTITY;



ENTITY fill_area_style_tile_curve_with_style
  SUBTYPE OF (geometric_representation_item);
  styled_curve : annotation_curve_occurrence;
END_ENTITY;



ENTITY fill_area_style_tile_coloured_region
  SUBTYPE OF (geometric_representation_item);
  closed_curve  : curve_or_annotation_curve_occurrence;
  region_colour : colour;
END_ENTITY;



ENTITY fill_area_style_tile_symbol_with_style
  SUBTYPE OF (geometric_representation_item);
  symbol : annotation_symbol_occurrence;
END_ENTITY;



ENTITY pre_defined_tile
  SUBTYPE OF (pre_defined_item);
END_ENTITY;



ENTITY externally_defined_tile
  SUBTYPE OF (externally_defined_item);
END_ENTITY;



ENTITY surface_side_style;
  name   : label;
  styles : SET [1:7] OF surface_style_element_select;
WHERE
  WR1: SIZEOF(QUERY( style1 <* SELF.styles |
         SIZEOF(QUERY( style2 <* SELF.styles - style1 |
           TYPEOF(style1) = TYPEOF(style2)
           )) > 0
         )) = 0;
END_ENTITY;



ENTITY surface_style_boundary;
  style_of_boundary : curve_or_render;
END_ENTITY;



ENTITY surface_style_control_grid;
  style_of_control_grid : curve_or_render;
END_ENTITY;



ENTITY surface_style_fill_area;
  fill_area : fill_area_style;
END_ENTITY;



ENTITY surface_style_parameter_line;
  style_of_parameter_lines : curve_or_render;
  direction_counts         : SET [1:2] OF direction_count_select;
WHERE
  WR1: (HIINDEX(SELF.direction_counts) = 1)
                        XOR
       (TYPEOF(SELF.direction_counts[1]) <>
          TYPEOF(SELF.direction_counts[2]));
END_ENTITY;



ENTITY surface_style_segmentation_curve;
  style_of_segmentation_curve : curve_or_render;
END_ENTITY;



ENTITY surface_style_silhouette;
  style_of_silhouette : curve_or_render;
END_ENTITY;



ENTITY surface_style_usage;
  side  : surface_side;
  style : surface_side_style_select;
END_ENTITY;



ENTITY presentation_layer_assignment;
  name           : label;
  description    : text;
  assigned_items : SET [1:?] OF layered_item;
END_ENTITY;

  

ENTITY shell_based_wireframe_shape_representation 
 SUBTYPE OF ( shape_representation );
 WHERE 
WR1 : 
SIZEOF ( 
QUERY ( it <* SELF.items| NOT ( SIZEOF ([ 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SHELL_BASED_WIREFRAME_MODEL', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MAPPED_ITEM', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.AXIS2_PLACEMENT_3D' ] * TYPEOF (it)) = 1) )) = 0;
WR2 : 
SIZEOF ( 
QUERY ( it <* SELF.items| ( SIZEOF ([ 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SHELL_BASED_WIREFRAME_MODEL', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MAPPED_ITEM' ] * TYPEOF (it)) = 1) )) >= 1;
WR3 : 
SIZEOF ( 
QUERY ( sbwm <* 
QUERY ( it <* SELF.items| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SHELL_BASED_WIREFRAME_MODEL' IN TYPEOF (it)) )| NOT ( SIZEOF ( 
QUERY ( ws <* 
QUERY ( sb <* sbwm\shell_based_wireframe_model.sbwm_boundary| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.WIRE_SHELL' IN TYPEOF (sb)) )| NOT ( SIZEOF ( 
QUERY ( eloop <* 
QUERY ( wsb <* ws\wire_shell.wire_shell_extent| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.EDGE_LOOP' IN TYPEOF (wsb)) )| NOT ( SIZEOF ( 
QUERY ( el <* eloop\path.edge_list| NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.EDGE_CURVE' IN TYPEOF (el.edge_element)) )) = 0) )) = 0) )) = 0) )) = 0;
WR4 : 
SIZEOF ( 
QUERY ( sbwm <* 
QUERY ( it <* SELF.items| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SHELL_BASED_WIREFRAME_MODEL' IN TYPEOF (it)) )| NOT ( SIZEOF ( 
QUERY ( ws <* 
QUERY ( sb <* sbwm\shell_based_wireframe_model.sbwm_boundary| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.WIRE_SHELL' IN TYPEOF (sb)) )| NOT ( SIZEOF ( 
QUERY ( eloop <* 
QUERY ( wsb <* ws\wire_shell.wire_shell_extent| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.EDGE_LOOP' IN TYPEOF (wsb)) )| NOT ( SIZEOF ( 
QUERY ( pline_el <* 
QUERY ( el <* eloop\path.edge_list| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.POLYLINE' IN TYPEOF (el.edge_element\edge_curve.edge_geometry)) )| NOT ( SIZEOF (pline_el.edge_element\edge_curve.edge_geometry\polyline.points) > 2) )) = 0) )) = 0) )) = 0) )) = 0;
WR5 : 
SIZEOF ( 
QUERY ( sbwm <* 
QUERY ( it <* SELF.items| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SHELL_BASED_WIREFRAME_MODEL' IN TYPEOF (it)) )| NOT ( SIZEOF ( 
QUERY ( ws <* 
QUERY ( sb <* sbwm\shell_based_wireframe_model.sbwm_boundary| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.WIRE_SHELL' IN TYPEOF (sb)) )| NOT ( SIZEOF ( 
QUERY ( eloop <* 
QUERY ( wsb <* ws\wire_shell.wire_shell_extent| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.EDGE_LOOP' IN TYPEOF (wsb)) )| NOT ( SIZEOF ( 
QUERY ( el <* eloop\path.edge_list| NOT valid_wireframe_edge_curve(el.edge_element\edge_curve.edge_geometry) )) = 0) )) = 0) )) = 0) )) = 0;
WR6 : 
SIZEOF ( 
QUERY ( sbwm <* 
QUERY ( it <* SELF.items| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SHELL_BASED_WIREFRAME_MODEL' IN TYPEOF (it)) )| NOT ( SIZEOF ( 
QUERY ( ws <* 
QUERY ( sb <* sbwm\shell_based_wireframe_model.sbwm_boundary| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.WIRE_SHELL' IN TYPEOF (sb)) )| NOT ( SIZEOF ( 
QUERY ( eloop <* 
QUERY ( wsb <* ws\wire_shell.wire_shell_extent| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.EDGE_LOOP' IN TYPEOF (wsb)) )| NOT ( SIZEOF ( 
QUERY ( el <* eloop\path.edge_list| NOT (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.VERTEX_POINT' IN TYPEOF (el.edge_element.edge_start)) AND ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.VERTEX_POINT' IN TYPEOF (el.edge_element.edge_end))) )) = 0) )) = 0) )) = 0) )) = 0;
WR7 : 
SIZEOF ( 
QUERY ( sbwm <* 
QUERY ( it <* SELF.items| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SHELL_BASED_WIREFRAME_MODEL' IN TYPEOF (it)) )| NOT ( SIZEOF ( 
QUERY ( ws <* 
QUERY ( sb <* sbwm\shell_based_wireframe_model.sbwm_boundary| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.WIRE_SHELL' IN TYPEOF (sb)) )| NOT ( SIZEOF ( 
QUERY ( eloop <* 
QUERY ( wsb <* ws\wire_shell.wire_shell_extent| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.EDGE_LOOP' IN TYPEOF (wsb)) )| NOT ( SIZEOF ( 
QUERY ( el <* eloop\path.edge_list| NOT (valid_wireframe_vertex_point(el.edge_element.edge_start\vertex_point.vertex_geometry) AND valid_wireframe_vertex_point(el.edge_element.edge_end\vertex_point.vertex_geometry)) )) = 0) )) = 0) )) = 0) )) = 0;
WR8 : 
SIZEOF ( 
QUERY ( sbwm <* 
QUERY ( it <* SELF.items| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SHELL_BASED_WIREFRAME_MODEL' IN TYPEOF (it)) )| NOT ( SIZEOF ( 
QUERY ( ws <* 
QUERY ( sb <* sbwm\shell_based_wireframe_model.sbwm_boundary| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.WIRE_SHELL' IN TYPEOF (sb)) )| NOT ( SIZEOF ( 
QUERY ( vloop <* 
QUERY ( wsb <* ws\wire_shell.wire_shell_extent| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.VERTEX_LOOP' IN TYPEOF (wsb)) )| NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.VERTEX_POINT' IN TYPEOF (vloop\vertex_loop.loop_vertex)) )) = 0) )) = 0) )) = 0;
WR9 : 
SIZEOF ( 
QUERY ( sbwm <* 
QUERY ( it <* SELF.items| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SHELL_BASED_WIREFRAME_MODEL' IN TYPEOF (it)) )| NOT ( SIZEOF ( 
QUERY ( ws <* 
QUERY ( sb <* sbwm\shell_based_wireframe_model.sbwm_boundary| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.WIRE_SHELL' IN TYPEOF (sb)) )| NOT ( SIZEOF ( 
QUERY ( vloop <* 
QUERY ( wsb <* ws\wire_shell.wire_shell_extent| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.VERTEX_LOOP' IN TYPEOF (wsb)) )| NOT valid_wireframe_vertex_point(vloop\vertex_loop.loop_vertex\vertex_point.vertex_geometry) )) = 0) )) = 0) )) = 0;
WR10 : 
SIZEOF ( 
QUERY ( sbwm <* 
QUERY ( it <* SELF.items| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SHELL_BASED_WIREFRAME_MODEL' IN TYPEOF (it)) )| NOT ( SIZEOF ( 
QUERY ( vs <* 
QUERY ( sb <* sbwm\shell_based_wireframe_model.sbwm_boundary| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.VERTEX_SHELL' IN TYPEOF (sb)) )| NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.VERTEX_POINT' IN TYPEOF (vs\vertex_shell.vertex_shell_extent.loop_vertex)) )) = 0) )) = 0;
WR11 : 
SIZEOF ( 
QUERY ( sbwm <* 
QUERY ( it <* SELF.items| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SHELL_BASED_WIREFRAME_MODEL' IN TYPEOF (it)) )| NOT ( SIZEOF ( 
QUERY ( vs <* 
QUERY ( sb <* sbwm\shell_based_wireframe_model.sbwm_boundary| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.VERTEX_SHELL' IN TYPEOF (sb)) )| NOT valid_wireframe_vertex_point(vs\vertex_shell.vertex_shell_extent.loop_vertex\vertex_point.vertex_geometry) )) = 0) )) = 0;
WR12 : 
SIZEOF ( 
QUERY ( mi <* 
QUERY ( it <* SELF.items| ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MAPPED_ITEM' IN TYPEOF (it)) )| NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'SHELL_BASED_WIREFRAME_SHAPE_REPRESENTATION' IN TYPEOF (mi\mapped_item.mapping_source.mapped_representation)) )) = 0;

WR13 : SELF.context_of_items\geometric_representation_context.coordinate_space_dimension = 3;
 END_ENTITY;



ENTITY time_interval_assignment
  ABSTRACT SUPERTYPE;
  assigned_time_interval : time_interval;
  role : time_interval_role;
END_ENTITY;



ENTITY time_interval;
  id : identifier;
  name : label;
  description : OPTIONAL text;
END_ENTITY;



ENTITY time_interval_relationship;
  name : label;
  description : OPTIONAL text;
  relating_time_interval : time_interval;
  related_time_interval : time_interval;
END_ENTITY;



ENTITY time_interval_with_bounds
  SUBTYPE OF (time_interval);
  primary_bound : OPTIONAL date_time_or_event_occurrence;
  secondary_bound : OPTIONAL date_time_or_event_occurrence;
  duration : OPTIONAL time_measure_with_unit;
WHERE
  WR1: NOT (EXISTS(secondary_bound) AND EXISTS(duration));
  WR2: EXISTS(primary_bound) OR EXISTS(secondary_bound);
END_ENTITY;



ENTITY amount_of_substance_measure_with_unit
  SUBTYPE OF (measure_with_unit);
WHERE
  WR1: 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.AMOUNT_OF_SUBSTANCE_UNIT' IN TYPEOF (SELF\measure_with_unit.unit_component);

END_ENTITY;



ENTITY amount_of_substance_unit
  SUBTYPE OF (named_unit);
WHERE
  WR1: (SELF\named_unit.dimensions.length_exponent = 0.0) AND (SELF\named_unit.dimensions.mass_exponent = 0.0) AND (SELF\named_unit.dimensions.time_exponent = 0.0) AND (SELF\named_unit.dimensions.electric_current_exponent = 0.0) AND (SELF\named_unit.dimensions.thermodynamic_temperature_exponent = 0.0) AND (SELF\named_unit.dimensions.amount_of_substance_exponent = 1.0) AND (SELF\named_unit.dimensions.luminous_intensity_exponent = 0.0);
END_ENTITY;



ENTITY area_measure_with_unit
  SUBTYPE OF (measure_with_unit);
WHERE
  WR1: 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.AREA_UNIT' IN TYPEOF (SELF\measure_with_unit.unit_component);

END_ENTITY;



ENTITY area_unit
  SUBTYPE OF (named_unit);
WHERE
  WR1: (SELF\named_unit.dimensions.length_exponent = 2.0) AND (SELF\named_unit.dimensions.mass_exponent = 0.0) AND (SELF\named_unit.dimensions.time_exponent = 0.0) AND (SELF\named_unit.dimensions.electric_current_exponent = 0.0) AND (SELF\named_unit.dimensions.thermodynamic_temperature_exponent = 0.0) AND (SELF\named_unit.dimensions.amount_of_substance_exponent = 0.0) AND (SELF\named_unit.dimensions.luminous_intensity_exponent = 0.0);
END_ENTITY;



ENTITY celsius_temperature_measure_with_unit
  SUBTYPE OF (measure_with_unit);
WHERE
  WR1: 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.THERMODYNAMIC_TEMPERATURE_UNIT' IN TYPEOF (SELF\measure_with_unit.unit_component);

END_ENTITY;



ENTITY context_dependent_unit
  SUBTYPE OF (named_unit);
  name : label;
END_ENTITY;



ENTITY conversion_based_unit
  SUBTYPE OF (named_unit);
  name : label;
  conversion_factor : measure_with_unit;
END_ENTITY;



ENTITY derived_unit;
  elements : SET[1:?] OF derived_unit_element;
DERIVE
  name : label := get_name_value (SELF);
WHERE
  WR1: (SIZEOF (elements) > 1) OR ((SIZEOF (elements) = 1) AND (elements[1].exponent <> 1.0));
  WR2: SIZEOF (USEDIN (SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'NAME_ATTRIBUTE.NAMED_ITEM')) <= 1;

END_ENTITY;



ENTITY derived_unit_element;
  unit : named_unit;
  exponent : REAL;
END_ENTITY;



ENTITY dimensional_exponents;
  length_exponent : REAL;
  mass_exponent : REAL;
  time_exponent : REAL;
  electric_current_exponent : REAL;
  thermodynamic_temperature_exponent : REAL;
  amount_of_substance_exponent : REAL;
  luminous_intensity_exponent : REAL;
END_ENTITY;



ENTITY electric_current_measure_with_unit
  SUBTYPE OF (measure_with_unit);
WHERE
  WR1: 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ELECTRIC_CURRENT_UNIT' IN TYPEOF (SELF\measure_with_unit.unit_component);

END_ENTITY;



ENTITY electric_current_unit
  SUBTYPE OF (named_unit);
WHERE
  WR1: (SELF\named_unit.dimensions.length_exponent = 0.0) AND (SELF\named_unit.dimensions.mass_exponent = 0.0) AND (SELF\named_unit.dimensions.time_exponent = 0.0) AND (SELF\named_unit.dimensions.electric_current_exponent = 1.0) AND (SELF\named_unit.dimensions.thermodynamic_temperature_exponent = 0.0) AND (SELF\named_unit.dimensions.amount_of_substance_exponent = 0.0) AND (SELF\named_unit.dimensions.luminous_intensity_exponent = 0.0);
END_ENTITY;



ENTITY length_measure_with_unit
  SUBTYPE OF (measure_with_unit);
WHERE
  WR1: 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.LENGTH_UNIT' IN TYPEOF (SELF\measure_with_unit.unit_component);

END_ENTITY;



ENTITY length_unit
  SUBTYPE OF (named_unit);
WHERE
  WR1: (SELF\named_unit.dimensions.length_exponent = 1.0) AND (SELF\named_unit.dimensions.mass_exponent = 0.0) AND (SELF\named_unit.dimensions.time_exponent = 0.0) AND (SELF\named_unit.dimensions.electric_current_exponent = 0.0) AND (SELF\named_unit.dimensions.thermodynamic_temperature_exponent = 0.0) AND (SELF\named_unit.dimensions.amount_of_substance_exponent = 0.0) AND (SELF\named_unit.dimensions.luminous_intensity_exponent = 0.0);
END_ENTITY;



ENTITY luminous_intensity_measure_with_unit
  SUBTYPE OF (measure_with_unit);
WHERE
  WR1: 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.LUMINOUS_INTENSITY_UNIT' IN TYPEOF(SELF\measure_with_unit.unit_component);

END_ENTITY;



ENTITY luminous_intensity_unit
  SUBTYPE OF (named_unit);
WHERE
  WR1: (SELF\named_unit.dimensions.length_exponent = 0.0) AND (SELF\named_unit.dimensions.mass_exponent = 0.0) AND (SELF\named_unit.dimensions.time_exponent = 0.0) AND (SELF\named_unit.dimensions.electric_current_exponent = 0.0) AND (SELF\named_unit.dimensions.thermodynamic_temperature_exponent = 0.0) AND (SELF\named_unit.dimensions.amount_of_substance_exponent = 0.0) AND (SELF\named_unit.dimensions.luminous_intensity_exponent = 1.0);
END_ENTITY;



ENTITY mass_measure_with_unit
  SUBTYPE OF (measure_with_unit);
WHERE
  WR1: 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MASS_UNIT' IN TYPEOF (SELF\measure_with_unit.unit_component);

END_ENTITY;



ENTITY mass_unit
  SUBTYPE OF (named_unit);
WHERE
  WR1: (SELF\named_unit.dimensions.length_exponent = 0.0) AND (SELF\named_unit.dimensions.mass_exponent = 1.0) AND (SELF\named_unit.dimensions.time_exponent = 0.0) AND (SELF\named_unit.dimensions.electric_current_exponent = 0.0) AND (SELF\named_unit.dimensions.thermodynamic_temperature_exponent = 0.0) AND (SELF\named_unit.dimensions.amount_of_substance_exponent = 0.0) AND (SELF\named_unit.dimensions.luminous_intensity_exponent = 0.0);
END_ENTITY;



ENTITY measure_with_unit
  SUPERTYPE OF (ONEOF (
              LENGTH_MEASURE_WITH_UNIT,
              MASS_MEASURE_WITH_UNIT,
              TIME_MEASURE_WITH_UNIT,
              ELECTRIC_CURRENT_MEASURE_WITH_UNIT,
              THERMODYNAMIC_TEMPERATURE_MEASURE_WITH_UNIT,
              CELSIUS_TEMPERATURE_MEASURE_WITH_UNIT,
              AMOUNT_OF_SUBSTANCE_MEASURE_WITH_UNIT,
              LUMINOUS_INTENSITY_MEASURE_WITH_UNIT,
              PLANE_ANGLE_MEASURE_WITH_UNIT,
              SOLID_ANGLE_MEASURE_WITH_UNIT,
              AREA_MEASURE_WITH_UNIT,
              VOLUME_MEASURE_WITH_UNIT,
              RATIO_MEASURE_WITH_UNIT));
  value_component : measure_value;
  unit_component : unit;
WHERE
  WR1: valid_units (SELF);
END_ENTITY;



ENTITY named_unit
  SUPERTYPE OF (ONEOF (
              SI_UNIT,
              CONVERSION_BASED_UNIT,
              CONTEXT_DEPENDENT_UNIT)
              ANDOR ONEOF (
              LENGTH_UNIT,
              MASS_UNIT,
              TIME_UNIT,
              ELECTRIC_CURRENT_UNIT,
              THERMODYNAMIC_TEMPERATURE_UNIT,
              AMOUNT_OF_SUBSTANCE_UNIT,
              LUMINOUS_INTENSITY_UNIT,
              PLANE_ANGLE_UNIT,
              SOLID_ANGLE_UNIT,
              AREA_UNIT,
              VOLUME_UNIT,
              RATIO_UNIT));
  dimensions : dimensional_exponents;
END_ENTITY;



ENTITY plane_angle_measure_with_unit
  SUBTYPE OF (measure_with_unit);
WHERE
  WR1: 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PLANE_ANGLE_UNIT' IN TYPEOF (SELF\measure_with_unit.unit_component);

END_ENTITY;



ENTITY plane_angle_unit
  SUBTYPE OF (named_unit);
WHERE
  WR1: (SELF\named_unit.dimensions.length_exponent = 0.0) AND (SELF\named_unit.dimensions.mass_exponent = 0.0) AND (SELF\named_unit.dimensions.time_exponent = 0.0) AND (SELF\named_unit.dimensions.electric_current_exponent = 0.0) AND (SELF\named_unit.dimensions.thermodynamic_temperature_exponent = 0.0) AND (SELF\named_unit.dimensions.amount_of_substance_exponent = 0.0) AND (SELF\named_unit.dimensions.luminous_intensity_exponent = 0.0);
END_ENTITY;



ENTITY ratio_measure_with_unit
  SUBTYPE OF (measure_with_unit);
WHERE
  WR1: 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.RATIO_UNIT' IN TYPEOF (SELF\measure_with_unit.unit_component);

END_ENTITY;



ENTITY ratio_unit
  SUBTYPE OF (named_unit);
WHERE
  WR1: (SELF\named_unit.dimensions.length_exponent = 0.0) AND (SELF\named_unit.dimensions.mass_exponent = 0.0) AND (SELF\named_unit.dimensions.time_exponent = 0.0) AND (SELF\named_unit.dimensions.electric_current_exponent = 0.0) AND (SELF\named_unit.dimensions.thermodynamic_temperature_exponent = 0.0) AND (SELF\named_unit.dimensions.amount_of_substance_exponent = 0.0) AND (SELF\named_unit.dimensions.luminous_intensity_exponent = 0.0);
END_ENTITY;



ENTITY si_unit
  SUBTYPE OF (named_unit);
  prefix : OPTIONAL si_prefix;
  name : si_unit_name;
DERIVE
  SELF\named_unit.dimensions : dimensional_exponents := dimensions_for_si_unit (name);
END_ENTITY;



ENTITY solid_angle_measure_with_unit
  SUBTYPE OF (measure_with_unit);
WHERE
  WR1: 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SOLID_ANGLE_UNIT' IN TYPEOF (SELF\measure_with_unit.unit_component);

END_ENTITY;



ENTITY solid_angle_unit
  SUBTYPE OF (named_unit);
WHERE
  WR1: (SELF\named_unit.dimensions.length_exponent = 0.0) AND (SELF\named_unit.dimensions.mass_exponent = 0.0) AND (SELF\named_unit.dimensions.time_exponent = 0.0) AND (SELF\named_unit.dimensions.electric_current_exponent = 0.0) AND (SELF\named_unit.dimensions.thermodynamic_temperature_exponent = 0.0) AND (SELF\named_unit.dimensions.amount_of_substance_exponent = 0.0) AND (SELF\named_unit.dimensions.luminous_intensity_exponent = 0.0);
END_ENTITY;



ENTITY thermodynamic_temperature_measure_with_unit
  SUBTYPE OF (measure_with_unit);
WHERE
  WR1: 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.THERMODYNAMIC_TEMPERATURE_UNIT' IN TYPEOF (SELF\measure_with_unit.unit_component);

END_ENTITY;



ENTITY thermodynamic_temperature_unit
  SUBTYPE OF (named_unit);
WHERE
  WR1: (SELF\named_unit.dimensions.length_exponent = 0.0) AND (SELF\named_unit.dimensions.mass_exponent = 0.0) AND (SELF\named_unit.dimensions.time_exponent = 0.0) AND (SELF\named_unit.dimensions.electric_current_exponent = 0.0) AND (SELF\named_unit.dimensions.thermodynamic_temperature_exponent = 1.0) AND (SELF\named_unit.dimensions.amount_of_substance_exponent = 0.0) AND (SELF\named_unit.dimensions.luminous_intensity_exponent = 0.0);
END_ENTITY;



ENTITY time_measure_with_unit
  SUBTYPE OF (measure_with_unit);
WHERE
  WR1: 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.TIME_UNIT' IN TYPEOF (SELF\measure_with_unit.unit_component);

END_ENTITY;



ENTITY time_unit
  SUBTYPE OF (named_unit);
WHERE
  WR1: (SELF\named_unit.dimensions.length_exponent = 0.0) AND (SELF\named_unit.dimensions.mass_exponent = 0.0) AND (SELF\named_unit.dimensions.time_exponent = 1.0) AND (SELF\named_unit.dimensions.electric_current_exponent = 0.0) AND (SELF\named_unit.dimensions.thermodynamic_temperature_exponent = 0.0) AND (SELF\named_unit.dimensions.amount_of_substance_exponent = 0.0) AND (SELF\named_unit.dimensions.luminous_intensity_exponent = 0.0);
END_ENTITY;



ENTITY volume_measure_with_unit
  SUBTYPE OF (measure_with_unit);
WHERE
  WR1: 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.VOLUME_UNIT' IN TYPEOF (SELF\measure_with_unit.unit_component);

END_ENTITY;



ENTITY volume_unit
  SUBTYPE OF (named_unit);
WHERE
  WR1: (SELF\named_unit.dimensions.length_exponent = 3.000000) AND (SELF\named_unit.dimensions.mass_exponent = 0.000000) AND (SELF\named_unit.dimensions.time_exponent = 0.000000) AND (SELF\named_unit.dimensions.electric_current_exponent = 0.000000) AND (SELF\named_unit.dimensions.thermodynamic_temperature_exponent = 0.000000) AND (SELF\named_unit.dimensions.amount_of_substance_exponent = 0.000000) AND (SELF\named_unit.dimensions.luminous_intensity_exponent = 0.000000);
END_ENTITY;



ENTITY action_directive;
  name : label;
  description : OPTIONAL text;
  analysis : text;
  comment : text;
  requests : SET[1:?] OF versioned_action_request;
END_ENTITY;



ENTITY directed_action
  SUBTYPE OF (executed_action);
  directive : action_directive;
END_ENTITY;



ENTITY action_request_solution;
  method : action_method;
  request : versioned_action_request;
DERIVE
  description : text := get_description_value (SELF);
  name : label := get_name_value (SELF);
WHERE
  WR1: SIZEOF (USEDIN (SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'DESCRIPTION_ATTRIBUTE.DESCRIBED_ITEM')) <= 1;
  WR2: SIZEOF (USEDIN (SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'NAME_ATTRIBUTE.NAMED_ITEM')) <= 1;

END_ENTITY;



ENTITY action_request_status;
  status : label;
  assigned_request : versioned_action_request;
END_ENTITY;



ENTITY action_request_assignment
  ABSTRACT SUPERTYPE;
  assigned_action_request : versioned_action_request;
DERIVE
  role : object_role := get_role (SELF);
WHERE
  WR1: SIZEOF (USEDIN (SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'ROLE_ASSOCIATION.ITEM_WITH_ROLE')) <= 1;

END_ENTITY;



 ENTITY brep_with_voids
   SUBTYPE OF (manifold_solid_brep);
   voids : SET [1:?] OF oriented_closed_shell;
 END_ENTITY;



ENTITY representation_map;
  mapping_origin        : representation_item;
  mapped_representation : representation;
INVERSE
  map_usage : SET[1:?] OF mapped_item FOR mapping_source;
WHERE
  WR1: item_in_context(SELF.mapping_origin,
       SELF.mapped_representation.context_of_items);
END_ENTITY;



ENTITY measure_representation_item
  SUBTYPE OF (representation_item, measure_with_unit);
END_ENTITY;



ENTITY camera_model
  SUPERTYPE OF (ONEOF (
              CAMERA_MODEL_D3))
  SUBTYPE OF (geometric_representation_item);
WHERE
  WR1: (SIZEOF (USEDIN (SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
                              'ITEM_DEFINED_TRANSFORMATION.' +
                              'TRANSFORM_ITEM_1')) +
        SIZEOF (USEDIN (SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
                              'REPRESENTATION_MAP.MAPPING_ORIGIN'))
       ) > 0;
  WR2: SIZEOF(USEDIN(SELF,'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.'+

                          'STYLED_ITEM.ITEM')) = 0;
END_ENTITY;



ENTITY draughting_callout
  SUBTYPE OF (geometric_representation_item);
  contents : SET [1:?] OF draughting_callout_element; 
END_ENTITY;



ENTITY projection_curve
  SUBTYPE OF (annotation_curve_occurrence);
END_ENTITY;



ENTITY background_colour
  SUBTYPE OF (colour);
  presentation : area_or_view;
UNIQUE
  UR1:  presentation;
END_ENTITY;



ENTITY camera_image
  SUBTYPE OF (mapped_item);
WHERE
  WR1: 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CAMERA_USAGE'
       IN TYPEOF (SELF\mapped_item.mapping_source);
  WR2: 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PLANAR_BOX'
       IN TYPEOF (SELF\mapped_item.mapping_target);
  WR3: 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.GEOMETRIC_REPRESENTATION_ITEM'

       IN TYPEOF (SELF);
END_ENTITY;



ENTITY camera_model_d3
  SUBTYPE OF (camera_model);
  view_reference_system : axis2_placement_3d;
  perspective_of_volume : view_volume;
WHERE
  WR1: (dot_product (SELF.view_reference_system.p[3],
         SELF.perspective_of_volume.view_window.placement.p[3]) = 1.0)
         AND
       (SELF.view_reference_system.location.coordinates[3] =
        SELF.perspective_of_volume.view_window.
             placement.location.coordinates[3]);
  WR2: SELF\geometric_representation_item.dim = 3;
END_ENTITY;



ENTITY camera_usage
  SUBTYPE OF (representation_map);
WHERE
  WR1: NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PRESENTATION_REPRESENTATION'
       IN TYPEOF(SELF\representation_map.mapped_representation));
  WR2: 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CAMERA_MODEL'

       IN TYPEOF (SELF\representation_map.mapping_origin);
END_ENTITY;



ENTITY presentation_area
  SUBTYPE OF (presentation_representation);
WHERE
  WR1: ((SIZEOF (QUERY (ais <* USEDIN (SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
                                             'AREA_IN_SET.AREA') | 
           SIZEOF (USEDIN (ais, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
                                'PRESENTATION_SIZE.UNIT')) =1)) > 0) OR
         (SIZEOF (USEDIN (SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +

                                'PRESENTATION_SIZE.UNIT')) =1));
END_ENTITY;



ENTITY presentation_representation
  SUBTYPE OF (representation);
WHERE
  WR1: SELF\representation.
            context_of_items\geometric_representation_context.
            coordinate_space_dimension = 2;
  WR2: 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.GEOMETRIC_REPRESENTATION_CONTEXT'

       IN TYPEOF (SELF\representation.context_of_items);
END_ENTITY;



ENTITY presentation_size;
  unit : presentation_size_assignment_select;
  size : planar_box;
WHERE
  WR1: (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PRESENTATION_REPRESENTATION'
         IN TYPEOF (SELF.unit)) AND
         item_in_context (SELF.size, 
                          SELF.unit\representation.context_of_items)
       )
            OR
       (
        ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.AREA_IN_SET'

          IN TYPEOF (SELF.unit)) AND
        (SIZEOF (QUERY ( ais <* SELF.unit\area_in_set.in_set.areas |
                NOT item_in_context (SELF.size, ais.area\representation.
                                                context_of_items) )) = 0)
       ); 
END_ENTITY;



ENTITY presentation_view
  SUBTYPE OF (presentation_representation);
END_ENTITY;



ENTITY planar_box
  SUBTYPE OF (planar_extent);
  placement:  axis2_placement;
END_ENTITY;



ENTITY planar_extent
  SUBTYPE OF (geometric_representation_item);
   size_in_x : length_measure;
   size_in_y : length_measure;
END_ENTITY;



ENTITY character_glyph_style_stroke;
  stroke_style : curve_style;
END_ENTITY;



ENTITY character_glyph_style_outline;
  outline_style : curve_style;
END_ENTITY;



ENTITY text_style;
  name                 : label;
  character_appearance : character_style_select;
END_ENTITY;



ENTITY text_style_for_defined_font;
  text_colour : colour;
END_ENTITY;



ENTITY text_style_with_box_characteristics
  SUBTYPE OF (text_style);
  characteristics : SET [1:4] OF box_characteristic_select;
WHERE
  WR1: SIZEOF( QUERY( c1 <* SELF.characteristics |
         SIZEOF( QUERY( c2 <* SELF.characteristics - c1 |
           TYPEOF (c1) = TYPEOF (c2)
           )) > 0
       )) = 0;
END_ENTITY;



ENTITY text_style_with_mirror
  SUBTYPE OF (text_style);
  mirror_placement : axis2_placement;
END_ENTITY;



ENTITY text_style_with_spacing
  SUBTYPE OF (text_style);
  character_spacing : character_spacing_select;
END_ENTITY;



ENTITY externally_defined_text_font
  SUBTYPE OF (externally_defined_item);
END_ENTITY;



ENTITY pre_defined_text_font
  SUBTYPE OF (pre_defined_item);
END_ENTITY;



ENTITY terminator_symbol
  SUBTYPE OF (annotation_symbol_occurrence);
  annotated_curve : annotation_curve_occurrence;
END_ENTITY;



ENTITY context_dependent_invisibility
  SUBTYPE OF (invisibility);
  presentation_context : invisibility_context;
END_ENTITY;



ENTITY externally_defined_hatch_style
  SUBTYPE OF (externally_defined_item, geometric_representation_item);
END_ENTITY;



ENTITY externally_defined_tile_style
  SUBTYPE OF (externally_defined_item, geometric_representation_item);
END_ENTITY;



ENTITY fill_area_style;
  name       : label;
  fill_styles : SET [1:?] OF fill_style_select;
WHERE
  WR1: SIZEOF(QUERY(fill_style <* SELF.fill_styles |
         'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.'+

         'FILL_AREA_STYLE_COLOUR' IN
         TYPEOF(fill_style)
         )) <= 1;
END_ENTITY;



ENTITY fill_area_style_hatching
  SUBTYPE OF (geometric_representation_item);
  hatch_line_appearance         : curve_style;
  start_of_next_hatch_line      : one_direction_repeat_factor;
  point_of_reference_hatch_line : cartesian_point;
  pattern_start                 : cartesian_point;
  hatch_line_angle              : plane_angle_measure;
END_ENTITY;



ENTITY fill_area_style_tiles
  SUBTYPE OF (geometric_representation_item);
  tiling_pattern : two_direction_repeat_factor;
  tiles          : SET [1:?] OF fill_area_style_tile_shape_select;
  tiling_scale   : positive_ratio_measure;
END_ENTITY;



ENTITY symbol_colour;
  colour_of_symbol : colour;
END_ENTITY;



ENTITY symbol_style;
  name            : label; 
  style_of_symbol : symbol_style_select;
END_ENTITY;



ENTITY dimension_curve
  SUBTYPE OF (annotation_curve_occurrence);
WHERE
  wr1: (SIZEOF(
          QUERY(dct <* USEDIN(SELF,'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
                'TERMINATOR_SYMBOL.ANNOTATED_CURVE')
               | (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.'+
                  'DIMENSION_CURVE_TERMINATOR' IN TYPEOF(dct))
                  ))
          ) <= 2);
   wr2:  SIZEOF(
            QUERY( dcdc <* USEDIN(SELF,'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
                   'DRAUGHTING_CALLOUT.CONTENTS') |
                   ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.'+
                    'DIMENSION_CURVE_DIRECTED_CALLOUT' IN TYPEOF(dcdc)))
       )>= 1;
   wr3: (SIZEOF(
            QUERY(dct1 <* USEDIN(SELF,'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
                  'TERMINATOR_SYMBOL.ANNOTATED_CURVE') 
               | (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.'+
                  'DIMENSION_CURVE_TERMINATOR' IN TYPEOF(dct1)) 
                  AND (dct1.role = origin)))
        ) <= 1)
     AND 
        (SIZEOF(
            QUERY (dct2 <* USEDIN(SELF,'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.'+
                   'TERMINATOR_SYMBOL.ANNOTATED_CURVE') 
                 | (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.'+

                   'DIMENSION_CURVE_TERMINATOR' IN TYPEOF(dct2))
                   AND (dct2.role = target)))
       ) <= 1);
END_ENTITY;



ENTITY dimension_curve_directed_callout
  SUBTYPE OF (draughting_callout);
WHERE
  WR1: SIZEOF(QUERY(d_c<*SELF\draughting_callout.contents | 
      'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.DIMENSION_CURVE' IN (TYPEOF(d_c))))=1;

  WR2: SIZEOF(SELF\draughting_callout.contents) >= 2;
END_ENTITY;



ENTITY dimension_curve_terminator
  SUBTYPE OF (terminator_symbol);
  role  : dimension_extent_usage;
WHERE
  WR1: 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.DIMENSION_CURVE' IN TYPEOF

       (SELF\terminator_symbol.annotated_curve);
END_ENTITY;



ENTITY draughting_callout_relationship;
  name : label;
  description : text;
  relating_draughting_callout : draughting_callout;
  related_draughting_callout : draughting_callout;
END_ENTITY;



ENTITY leader_directed_callout
  SUBTYPE OF (draughting_callout);
WHERE
  WR1: SIZEOF (QUERY (l_1 <* SELF\draughting_callout.contents |
       'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.LEADER_CURVE' IN (TYPEOF(l_1)))) >= 1;

  WR2: SIZEOF(SELF\draughting_callout.contents) >=2;
END_ENTITY;



ENTITY leader_terminator
  SUBTYPE OF (terminator_symbol);
WHERE
  WR1: 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.LEADER_CURVE' IN TYPEOF

       (SELF\terminator_symbol.annotated_curve);
END_ENTITY;



ENTITY projection_directed_callout
  SUBTYPE OF (draughting_callout);
WHERE
  WR1: SIZEOF(QUERY(p_1<*SELF\draughting_callout.contents | 
      'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PROJECTION_CURVE' IN (TYPEOF(p_1))))=1;

  WR2: SIZEOF(SELF\draughting_callout.contents) >=2;
END_ENTITY;



 ENTITY bezier_curve
   SUBTYPE OF (b_spline_curve);
 END_ENTITY;



 ENTITY bezier_surface
   SUBTYPE OF (b_spline_surface);
 END_ENTITY;



 ENTITY b_spline_curve_with_knots
   SUBTYPE OF (b_spline_curve);
   knot_multiplicities  : LIST [2:?] OF INTEGER;
   knots                : LIST [2:?] OF parameter_value;
   knot_spec            : knot_type;
 DERIVE
   upper_index_on_knots : INTEGER := SIZEOF(knots);
 WHERE
   WR1: constraints_param_b_spline(degree, upper_index_on_knots,
                               upper_index_on_control_points,
                               knot_multiplicities, knots);
    WR2: SIZEOF(knot_multiplicities) = upper_index_on_knots;
END_ENTITY;



 ENTITY b_spline_surface_with_knots
   SUBTYPE OF (b_spline_surface);
   u_multiplicities  : LIST [2:?] OF INTEGER;
   v_multiplicities  : LIST [2:?] OF INTEGER;
   u_knots           : LIST [2:?] OF parameter_value;
   v_knots           : LIST [2:?] OF parameter_value;
   knot_spec         : knot_type;
 DERIVE
   knot_u_upper      : INTEGER := SIZEOF(u_knots);
   knot_v_upper      : INTEGER := SIZEOF(v_knots);
 WHERE
    WR1: constraints_param_b_spline(SELF\b_spline_surface.u_degree,
                   knot_u_upper, SELF\b_spline_surface.u_upper,
                               u_multiplicities, u_knots);
    WR2: constraints_param_b_spline(SELF\b_spline_surface.v_degree,
                   knot_v_upper, SELF\b_spline_surface.v_upper,
                               v_multiplicities, v_knots);
    WR3: SIZEOF(u_multiplicities) = knot_u_upper;
    WR4: SIZEOF(v_multiplicities) = knot_v_upper;
 END_ENTITY;



 ENTITY composite_curve_on_surface
   SUPERTYPE OF (
              BOUNDARY_CURVE)
  SUBTYPE OF (composite_curve);

 DERIVE
   basis_surface : SET[0:2] OF surface :=
                get_basis_surface(SELF);
 WHERE
   WR1: SIZEOF(basis_surface) > 0;
   WR2: constraints_composite_curve_on_surface(SELF);
 END_ENTITY;



 ENTITY degenerate_toroidal_surface
   SUBTYPE OF (toroidal_surface);
   select_outer : BOOLEAN;
 WHERE
  WR1: major_radius <   minor_radius;
 END_ENTITY;



 ENTITY quasi_uniform_curve
   SUBTYPE OF (b_spline_curve);
 END_ENTITY;



 ENTITY quasi_uniform_surface
   SUBTYPE OF (b_spline_surface);
 END_ENTITY;



 ENTITY rational_b_spline_curve
   SUBTYPE OF (b_spline_curve);
   weights_data : LIST [2:?] OF REAL;
                                
 DERIVE
   weights           : ARRAY [0:upper_index_on_control_points] OF REAL
                               := list_to_array(weights_data,0,
                                      upper_index_on_control_points);
 WHERE
   WR1:  SIZEOF(weights_data) = SIZEOF(SELF\b_spline_curve.
                                           control_points_list);
   WR2:  curve_weights_positive(SELF);
 END_ENTITY;



 ENTITY rational_b_spline_surface
   SUBTYPE OF (b_spline_surface);
   weights_data : LIST [2:?] OF
                    LIST [2:?] OF REAL;
                                
 DERIVE
   weights       : ARRAY [0:u_upper] OF
                      ARRAY [0:v_upper] OF REAL
                 := make_array_of_array(weights_data,0,u_upper,0,v_upper);
 WHERE
   WR1: (SIZEOF(weights_data) =
                     SIZEOF(SELF\b_spline_surface.control_points_list))
           AND (SIZEOF(weights_data[1]) =
                  SIZEOF(SELF\b_spline_surface.control_points_list[1]));
   WR2: surface_weights_positive(SELF);
 END_ENTITY;



 ENTITY swept_surface
   SUPERTYPE OF (ONEOF (
              SURFACE_OF_LINEAR_EXTRUSION,
              SURFACE_OF_REVOLUTION))
  SUBTYPE OF (surface);
   swept_curve : curve;
 END_ENTITY;



 ENTITY uniform_curve
   SUBTYPE OF (b_spline_curve);
 END_ENTITY;



 ENTITY uniform_surface
   SUBTYPE OF (b_spline_surface);
 END_ENTITY;



 ENTITY vector
   SUBTYPE OF (geometric_representation_item);
   orientation : direction;
   magnitude   : length_measure;
 WHERE
   WR1 : magnitude >= 0.0;
 END_ENTITY;



ENTITY definitional_representation
  SUBTYPE OF (representation);
WHERE
  WR1: 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PARAMETRIC_REPRESENTATION_CONTEXT' IN

        TYPEOF (SELF\representation.context_of_items );
END_ENTITY;



ENTITY parametric_representation_context
  SUBTYPE OF (representation_context);
END_ENTITY;



 ENTITY edge_based_wireframe_model
   SUBTYPE OF (geometric_representation_item);
   ebwm_boundary  : SET [1:?] OF connected_edge_set;
 END_ENTITY;



 ENTITY conic
   SUPERTYPE OF (ONEOF (
              CIRCLE,
              ELLIPSE,
              HYPERBOLA,
              PARABOLA))
  SUBTYPE OF (curve);
   position: axis2_placement;
 END_ENTITY;



ENTITY point
   SUPERTYPE OF (ONEOF (
              CARTESIAN_POINT,
              POINT_ON_CURVE,
              POINT_ON_SURFACE,
              POINT_REPLICA,
              DEGENERATE_PCURVE))
  SUBTYPE OF (geometric_representation_item);
 END_ENTITY;



 ENTITY elementary_surface
   SUPERTYPE OF (ONEOF (
              PLANE,
              CYLINDRICAL_SURFACE,
              CONICAL_SURFACE,
              SPHERICAL_SURFACE,
              TOROIDAL_SURFACE))
  SUBTYPE OF (surface);
   position : axis2_placement_3d;
 END_ENTITY;



ENTITY composite_shape_aspect
  SUBTYPE OF (shape_aspect);
INVERSE
  component_relationships : SET [2:?] OF shape_aspect_relationship
                            FOR relating_shape_aspect;
END_ENTITY;



ENTITY datum
  SUBTYPE OF (shape_aspect);
  identification               :identifier;
INVERSE
  established_by_relationships : SET [1:?] OF shape_aspect_relationship
                                 FOR related_shape_aspect;
WHERE
  WR1: SIZEOF (QUERY (x<*SELF\datum.established_by_relationships |
       SIZEOF (TYPEOF(x\shape_aspect_relationship.relating_shape_aspect)* 
       ['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.DATUM_FEATURE', 
       'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.DATUM_TARGET']) <> 1))=0;

END_ENTITY;



ENTITY datum_feature
   SUBTYPE OF (shape_aspect);
INVERSE 
   feature_basis_relationship : shape_aspect_relationship
                              FOR relating_shape_aspect;
WHERE
   WR1: SIZEOF (QUERY (sar<* bag_to_set (USEDIN (SELF,
     'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SHAPE_ASPECT_RELATIONSHIP.'+
       'RELATING_SHAPE_ASPECT'))
       | NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.DATUM' IN TYPEOF

       (sar\shape_aspect_relationship.related_shape_aspect))))=0;
  WR2: SELF\shape_aspect.product_definitional = TRUE;
END_ENTITY;



ENTITY datum_reference;
  precedence       : INTEGER;
  referenced_datum : datum;
WHERE
  WR1: precedence > 0;
END_ENTITY;



ENTITY referenced_modified_datum
  SUBTYPE OF (datum_reference);
  modifier : limit_condition;
END_ENTITY;



ENTITY symmetric_shape_aspect
  SUBTYPE OF (shape_aspect);
INVERSE
  basis_relationships : SET [1:?] OF shape_aspect_relationship
                        FOR relating_shape_aspect;
WHERE
  WR1: SIZEOF (QUERY (x<*SELF\symmetric_shape_aspect.basis_relationships |
       'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CENTRE_OF_SYMMETRY' IN TYPEOF 

       (x\shape_aspect_relationship.related_shape_aspect)))>=1;
END_ENTITY;



ENTITY dimension_related_tolerance_zone_element;
  related_dimension : dimensional_location; 
  related_element   : tolerance_zone_definition;
END_ENTITY;



ENTITY geometric_tolerance_relationship;
                                   name                         :label;
                                   description                  :text;
                                   relating_geometric_tolerance : geometric_tolerance; 
                                   related_geometric_tolerance  : geometric_tolerance; 
END_ENTITY;



ENTITY geometric_tolerance_with_datum_reference
   SUBTYPE OF (geometric_tolerance);
   datum_system : SET [1:?] OF  datum_reference;
END_ENTITY;



ENTITY geometric_tolerance_with_defined_unit
  SUBTYPE OF (geometric_tolerance);
  unit_size : measure_with_unit;
WHERE
  WR1: ('NUMBER' IN TYPEOF
       (unit_size\measure_with_unit.value_component)) AND
       (unit_size\measure_with_unit.value_component > 0.0);
END_ENTITY;



ENTITY modified_geometric_tolerance
  SUBTYPE OF (geometric_tolerance);
  modifier : limit_condition;
END_ENTITY;



ENTITY projected_zone_definition 
  SUBTYPE OF (tolerance_zone_definition);  
  projection_end   : shape_aspect; 
  projected_length : measure_with_unit;
WHERE 
  WR1: ('NUMBER' IN TYPEOF
       (projected_length\measure_with_unit.value_component)) AND
       (projected_length\measure_with_unit.value_component > 0.0);
  WR2: (derive_dimensional_exponents
       (projected_length\measure_with_unit.unit_component)=
        dimensional_exponents(1,0,0,0,0,0,0));
END_ENTITY;



ENTITY runout_zone_definition
  SUBTYPE OF (tolerance_zone_definition); 
  orientation  : runout_zone_orientation;
END_ENTITY;



ENTITY runout_zone_orientation_reference_direction
  SUBTYPE OF (runout_zone_orientation); 
  orientation_defining_relationship: shape_aspect_relationship;
END_ENTITY;



ENTITY tolerance_zone
  SUBTYPE OF (shape_aspect);
  defining_tolerance : SET [1:?] OF geometric_tolerance; 
  form               : tolerance_zone_form;
END_ENTITY;



ENTITY tolerance_zone_definition
  SUPERTYPE OF (ONEOF (
              PROJECTED_ZONE_DEFINITION,
              RUNOUT_ZONE_DEFINITION));
  zone : tolerance_zone;
  boundaries: SET [1:?] OF shape_aspect;
END_ENTITY;



 ENTITY geometric_set
   SUPERTYPE OF (ONEOF (
              GEOMETRIC_CURVE_SET))
  SUBTYPE OF (geometric_representation_item);
   elements :  SET [1:?] OF geometric_set_select;
 END_ENTITY;



 ENTITY axis1_placement
 SUBTYPE OF (placement);
   axis     : OPTIONAL direction;
 DERIVE
   z : direction := NVL(normalise(axis), dummy_gri ||
                                 direction([0.0,0.0,1.0]));
 WHERE
   WR1: SELF\geometric_representation_item.dim  = 3;
 END_ENTITY;



 ENTITY boundary_curve
   SUBTYPE OF (composite_curve_on_surface);
 WHERE
   WR1: SELF\composite_curve.closed_curve;
 END_ENTITY;



 ENTITY bounded_pcurve
   SUBTYPE OF (pcurve, bounded_curve);
  WHERE
    WR1: ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.BOUNDED_CURVE' IN

                   TYPEOF(SELF\pcurve.reference_to_curve.items[1]));
  END_ENTITY;



 ENTITY bounded_surface_curve
   SUBTYPE OF (surface_curve, bounded_curve);
 WHERE
   WR1: ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.BOUNDED_CURVE' IN

             TYPEOF(SELF\surface_curve.curve_3d));
 END_ENTITY;



 ENTITY composite_curve_segment
 SUBTYPE OF (founded_item);
   transition    : transition_code;
   same_sense    : BOOLEAN;
   parent_curve  : curve;
 INVERSE
   using_curves  : BAG[1:?] OF composite_curve FOR segments;
 WHERE
   WR1 : ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.BOUNDED_CURVE' IN TYPEOF(parent_curve));

 END_ENTITY;



 ENTITY evaluated_degenerate_pcurve
   SUBTYPE OF (degenerate_pcurve);
   equivalent_point : cartesian_point;
 END_ENTITY;



 ENTITY intersection_curve
   SUBTYPE OF (surface_curve);
 WHERE
   WR1: SIZEOF(SELF\surface_curve.associated_geometry) = 2;
   WR2: associated_surface(SELF\surface_curve.associated_geometry[1]) <>
             associated_surface(SELF\surface_curve.associated_geometry[2]);
 END_ENTITY;



 ENTITY outer_boundary_curve
   SUBTYPE OF (boundary_curve);
 END_ENTITY;



 ENTITY reparametrised_composite_curve_segment
   SUBTYPE OF (composite_curve_segment);
   param_length : parameter_value;
 WHERE
   WR1: param_length > 0.0;
 END_ENTITY;



 ENTITY seam_curve
   SUBTYPE OF (surface_curve);
 WHERE
   WR1: SIZEOF(SELF\surface_curve.associated_geometry) = 2;
   WR2: associated_surface(SELF\surface_curve.associated_geometry[1]) =
           associated_surface(SELF\surface_curve.associated_geometry[2]);
   WR3: 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PCURVE' IN
           TYPEOF(SELF\surface_curve.associated_geometry[1]);
   WR4: 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PCURVE' IN

            TYPEOF(SELF\surface_curve.associated_geometry[2]);
 END_ENTITY;



 ENTITY surface_patch
 SUBTYPE OF (founded_item);
   parent_surface : bounded_surface;
   u_transition   : transition_code;
   v_transition   : transition_code;
   u_sense        : BOOLEAN;
   v_sense        : BOOLEAN;
 INVERSE
   using_surfaces : BAG[1:?] OF rectangular_composite_surface FOR segments;
 WHERE
   WR1: (NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CURVE_BOUNDED_SURFACE' 

                 IN TYPEOF(parent_surface)));
 END_ENTITY;



 ENTITY geometric_curve_set
   SUBTYPE OF (geometric_set);
 WHERE
   WR1: SIZEOF(QUERY(temp <* SELF\geometric_set.elements |
                            'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SURFACE' IN TYPEOF(temp))) = 0;

 END_ENTITY;



 ENTITY shell_based_surface_model
   SUBTYPE OF (geometric_representation_item);
   sbsm_boundary  : SET [1:?] OF shell;
 WHERE
   WR1: constraints_geometry_shell_based_surface_model(SELF);
 END_ENTITY;



 ENTITY shell_based_wireframe_model
   SUBTYPE OF (geometric_representation_item);
   sbwm_boundary  : SET [1:?] OF shell;
 WHERE
   WR1: constraints_geometry_shell_based_wireframe_model(SELF);
 END_ENTITY;



ENTITY description_attribute;
  attribute_value : text;
  described_item : description_attribute_select;
END_ENTITY;



ENTITY application_context_element
  SUPERTYPE OF (ONEOF (
              PRODUCT_CONCEPT_CONTEXT,
              PRODUCT_CONTEXT,
              PRODUCT_DEFINITION_CONTEXT));
  name : label;
  frame_of_reference : application_context;
END_ENTITY;



ENTITY name_attribute;
  attribute_value : label;
  named_item : name_attribute_select;
END_ENTITY;



ENTITY product_definition_effectivity
  SUBTYPE OF (effectivity);
  usage : product_definition_relationship;
WHERE
  WR1: SIZEOF (USEDIN (SELF, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'EFFECTIVITY_ASSIGNMENT.ASSIGNED_EFFECTIVITY')) = 0;

END_ENTITY;



ENTITY contract_type;
  description : label;
END_ENTITY;



ENTITY attribute_value_role;
  name : label;
  description : OPTIONAL text;
END_ENTITY;



ENTITY role_association;
  role : object_role;
  item_with_role : role_select;
END_ENTITY;



ENTITY product_context
  SUBTYPE OF (application_context_element);
  discipline_type : label;
END_ENTITY;



ENTITY pre_defined_item;
  name : label;
END_ENTITY;



ENTITY classification_role;
  name : label;
  description : OPTIONAL text;
END_ENTITY;



 ENTITY bounded_curve
   SUPERTYPE OF (ONEOF (
              POLYLINE,
              B_SPLINE_CURVE,
              TRIMMED_CURVE,
              BOUNDED_PCURVE,
              BOUNDED_SURFACE_CURVE,
              COMPOSITE_CURVE))
  SUBTYPE OF (curve);
 END_ENTITY;



 ENTITY bounded_surface
   SUPERTYPE OF (ONEOF (
              B_SPLINE_SURFACE,
              RECTANGULAR_TRIMMED_SURFACE,
              CURVE_BOUNDED_SURFACE,
              RECTANGULAR_COMPOSITE_SURFACE))
  SUBTYPE OF (surface);
 END_ENTITY;



 ENTITY cartesian_transformation_operator
   SUPERTYPE OF (ONEOF (
              CARTESIAN_TRANSFORMATION_OPERATOR_2D,
              CARTESIAN_TRANSFORMATION_OPERATOR_3D))
  SUBTYPE OF (geometric_representation_item,
                            functionally_defined_transformation);
   axis1        : OPTIONAL direction;
   axis2        : OPTIONAL direction;
   local_origin : cartesian_point;
   scale        : OPTIONAL REAL;
 DERIVE
   scl          : REAL := NVL(scale, 1.0);
 WHERE
   WR1: scl > 0.0;
 END_ENTITY;



 ENTITY box_domain
   SUBTYPE OF (founded_item);
   corner  : cartesian_point;
   xlength : positive_length_measure;
   ylength : positive_length_measure;
   zlength : positive_length_measure;
 WHERE
   WR1: SIZEOF(QUERY(item <* USEDIN(SELF,'')|
             NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.BOXED_HALF_SPACE'

                    IN TYPEOF(item)))) = 0;
 END_ENTITY;



ENTITY founded_item;
END_ENTITY;



ENTITY local_time;
  hour_component : hour_in_day;
  minute_component : OPTIONAL minute_in_hour;
  second_component : OPTIONAL second_in_minute;
  zone : coordinated_universal_time_offset;
WHERE
  WR1: valid_time (SELF);
END_ENTITY;



ENTITY document_usage_constraint;
  source : document;
  subject_element : label;
  subject_element_value : text;
END_ENTITY;



ENTITY event_occurrence_role;
  name : label;
  description : OPTIONAL text;
END_ENTITY;



ENTITY document_type;
  product_data_type : label;
END_ENTITY;



ENTITY product_definition_context_role;
  name : label;
  description : OPTIONAL text;
END_ENTITY;



ENTITY view_volume
  SUBTYPE OF (founded_item);
  projection_type            : central_or_parallel;
  projection_point           : cartesian_point;
  view_plane_distance        : length_measure;
  front_plane_distance       : length_measure;
  front_plane_clipping       : BOOLEAN;
  back_plane_distance        : length_measure;
  back_plane_clipping        : BOOLEAN;
  view_volume_sides_clipping : BOOLEAN;
  view_window                : planar_box;
END_ENTITY;



ENTITY area_in_set;
  area   : presentation_area;
  in_set : presentation_set;
END_ENTITY;



ENTITY presentation_set;
INVERSE
  areas : SET [1:?] OF area_in_set FOR in_set;
END_ENTITY;



ENTITY one_direction_repeat_factor
  SUBTYPE OF (geometric_representation_item);
  repeat_factor : vector;
END_ENTITY;



ENTITY two_direction_repeat_factor
  SUBTYPE OF (one_direction_repeat_factor);
  second_repeat_factor : vector;
END_ENTITY;



ENTITY runout_zone_orientation;
  angle : measure_with_unit;
END_ENTITY;



ENTITY tolerance_zone_form;
  name : label;
END_ENTITY;



FUNCTION get_id_value
 (obj : id_attribute_select) : identifier; 
LOCAL
      id_bag : BAG OF id_attribute := (USEDIN(obj, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'ID_ATTRIBUTE.' + 'IDENTIFIED_ITEM'));

END_LOCAL;
IF SIZEOF(id_bag) = 1 THEN
      RETURN (id_bag[1].attribute_value);
ELSE
      RETURN (?);
END_IF;

END_FUNCTION;



FUNCTION get_description_value
 (obj : description_attribute_select) : text; 
  LOCAL
    description_bag : BAG OF description_attribute := (USEDIN(obj, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'DESCRIPTION_ATTRIBUTE.' + 'DESCRIBED_ITEM'));

  END_LOCAL;

  IF SIZEOF(description_bag) = 1 THEN
    RETURN (description_bag[1].attribute_value);
  ELSE
    RETURN (?);
  END_IF;

END_FUNCTION;



FUNCTION get_name_value
 (obj : name_attribute_select) : label; 
  LOCAL
    name_bag : BAG OF name_attribute := (USEDIN(obj, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'NAME_ATTRIBUTE.' + 'NAMED_ITEM'));

  END_LOCAL;

  IF SIZEOF(name_bag) = 1 THEN
    RETURN (name_bag[1].attribute_value);
  ELSE
    RETURN (?);
  END_IF;

END_FUNCTION;



FUNCTION default_tolerance_table_cell_wr2
 (agg : compound_item_definition) : BOOLEAN; 
BEGIN 
IF SIZEOF(agg) <= 5 THEN 
  RETURN(TRUE); 
ELSE 
  RETURN(FALSE); 
END_IF; 
END; 

      END_FUNCTION;



FUNCTION default_tolerance_table_cell_wr3
 (agg : compound_item_definition) : BOOLEAN; 
BEGIN 
IF (SIZEOF(QUERY ( i <* agg | (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MEASURE_REPRESENTATION_ITEM' IN TYPEOF(i)) 
  AND (i\representation_item.name = 'significant number of digits')) )) = 1) OR 
((SIZEOF(QUERY ( i <* agg | (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MEASURE_REPRESENTATION_ITEM' IN TYPEOF(i)) AND 
  (i\representation_item.name = 'lower limit')) )) = 1) AND 
(SIZEOF( QUERY ( i <* agg | (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MEASURE_REPRESENTATION_ITEM' IN TYPEOF(i)) AND 

  (i\representation_item.name = 'upper limit')) )) = 1)) THEN 
  RETURN(TRUE); 
ELSE 
  RETURN(FALSE); 
END_IF; 
END; 

      END_FUNCTION;



FUNCTION default_tolerance_table_cell_wr4
 (agg : compound_item_definition) : BOOLEAN; 
BEGIN 
IF (SIZEOF(QUERY ( i <* agg | (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MEASURE_REPRESENTATION_ITEM' IN TYPEOF(i)) AND 
  (i\representation_item.name = 'plus minus tolerance value')) )) = 1) OR 
((SIZEOF(QUERY ( i <* agg | (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MEASURE_REPRESENTATION_ITEM' IN TYPEOF(i)) AND (
  i\representation_item.name = 'lower tolerance value')) )) = 1) AND 
(SIZEOF( QUERY ( i <* agg | (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MEASURE_REPRESENTATION_ITEM' IN TYPEOF(i)) AND (

  i\representation_item.name = 'upper tolerance value')) )) = 1)) THEN 
  RETURN(TRUE); 
ELSE 
  RETURN(FALSE); 
END_IF; 
END; 

      END_FUNCTION;



FUNCTION default_tolerance_table_cell_wr5
 (agg : compound_item_definition) : BOOLEAN; 
BEGIN 
IF (SIZEOF(QUERY ( i <* agg | ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.DESCRIPTIVE_REPRESENTATION_ITEM' IN TYPEOF(i)) )) <= 1) AND 
(SIZEOF(QUERY ( i <* agg | ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.DESCRIPTIVE_REPRESENTATION_ITEM' IN TYPEOF(i)) )) = 
  SIZEOF(QUERY ( i <* agg | (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.DESCRIPTIVE_REPRESENTATION_ITEM' IN TYPEOF(i)) AND 

  (i\representation_item.name = 'cell description'))) )) 
THEN 
  RETURN(TRUE); 
ELSE 
  RETURN(FALSE); 
END_IF; 
END; 

      END_FUNCTION;



FUNCTION get_shape_aspect_property_definition_representations
 (s_a_instance : shape_aspect) : SET OF property_definition_representation; 
LOCAL
pd_set : SET OF property_definition := [];
pdr_set : SET OF property_definition_representation := [] ;
END_LOCAL;
pd_set := bag_to_set(USEDIN(s_a_instance, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PROPERTY_DEFINITION.DEFINITION'));
IF (SIZEOF(pd_set) < 1) THEN
RETURN (pdr_set);
END_IF;
REPEAT i := 1 TO HIINDEX(pd_set);
pdr_set := pdr_set + (QUERY(pdr <* USEDIN(pd_set[i], 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'PROPERTY_DEFINITION_REPRESENTATION.' + 'DEFINITION') |
'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SHAPE_DEFINITION_REPRESENTATION' IN TYPEOF(pdr)));

END_REPEAT;
RETURN (pdr_set);      

END_FUNCTION;



FUNCTION valid_datum_target_parameters
 (pdf : placed_datum_target_feature) : BOOLEAN; 
LOCAL
parameter_representations: SET OF representation;
END_LOCAL;

parameter_representations := QUERY(pdr <* pdf.representation_associations |
('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SHAPE_REPRESENTATION_WITH_PARAMETERS' IN
TYPEOF(pdr.used_representation)));

IF (SIZEOF( QUERY( srwp <* parameter_representations |
          (SIZEOF( QUERY( i <* srwp.items |
          (i.name='orientation') AND
          ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PLACEMENT' IN TYPEOF(i)))) = 1))) <> 1) THEN
   RETURN(FALSE);
END_IF;

CASE pdf\shape_aspect.description OF
'point': RETURN(SIZEOF(QUERY( srwp <* parameter_representations |
              (SIZEOF(srwp.items) = 1))) = 1);

'circle': RETURN((SIZEOF( QUERY( srwp <* parameter_representations |
              (SIZEOF(srwp.items) = 2))) = 1) AND
             (SIZEOF( QUERY( srwp <* parameter_representations |
              (SIZEOF( QUERY( i <* srwp.items |
                (i.name='target diameter') AND
                (SIZEOF(['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MEASURE_REPRESENTATION_ITEM',
		   'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.LENGTH_MEASURE_WITH_UNIT']*TYPEOF(i)
                 ) = 2) )) = 1))) = 1));

'line': RETURN(SIZEOF( QUERY( srwp <* parameter_representations |
              (SIZEOF( QUERY( i <* srwp.items |
                (i.name='target length') AND
                (SIZEOF(['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MEASURE_REPRESENTATION_ITEM',
		'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.LENGTH_MEASURE_WITH_UNIT']*TYPEOF(i)
                 ) = 2) )) = 1))) = 1);

'rectangle': RETURN((SIZEOF( QUERY( srwp <* parameter_representations |
              (SIZEOF(srwp.items)= 3))) = 1) AND
             (SIZEOF( QUERY( srwp <* parameter_representations |
              (SIZEOF( QUERY( i <* srwp.items |
                (i.name='target length') AND
                (SIZEOF(['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MEASURE_REPRESENTATION_ITEM',
		'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.LENGTH_MEASURE_WITH_UNIT']*TYPEOF(i)
                 ) = 2))) = 1))) = 1) AND
              (SIZEOF( QUERY( srwp <* parameter_representations |
               (SIZEOF( QUERY( i <* srwp.items |
                 (i.name='target width') AND
                 (SIZEOF(['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MEASURE_REPRESENTATION_ITEM',
 		'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.LENGTH_MEASURE_WITH_UNIT']*TYPEOF(i)

                  ) = 2))) = 1) )) = 1));
OTHERWISE : RETURN(FALSE);
END_CASE;

   END_FUNCTION;



FUNCTION dimension_of(item : geometric_representation_item) :
  dimension_count;
  LOCAL
    x   : SET OF representation;
    y   : representation_context;
    dim : dimension_count;
  END_LOCAL;
  -- For cartesian_point, direction, or vector dimension is determined by
  -- counting components.
    IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CARTESIAN_POINT' IN TYPEOF(item) THEN
       dim := SIZEOF(item\cartesian_point.coordinates);
       RETURN(dim);
    END_IF;
    IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.DIRECTION' IN TYPEOF(item) THEN
       dim := SIZEOF(item\direction.direction_ratios);
       RETURN(dim);
    END_IF;
    IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.VECTOR' IN TYPEOF(item) THEN

       dim := SIZEOF(item\vector.orientation\direction.direction_ratios);
       RETURN(dim);
    END_IF;
  -- For all other types of geometric_representation_item dim is obtained
  -- via context.
  -- Find the set of representation in which the item is used. 

  x := using_representations(item);

  -- Determines the dimension_count of the 
  -- geometric_representation_context. Note that the 
  -- RULE compatible_dimension ensures that the context_of_items
  -- is of type geometric_representation_context and has
  -- the same dimension_count for all values of x.
  -- The SET x is non-empty since this is required by WR1 of
  -- representation_item.
    y := x[1].context_of_items;
    dim := y\geometric_representation_context.coordinate_space_dimension;
    RETURN (dim);


END_FUNCTION;



FUNCTION using_representations (item : founded_item_select)
  : SET OF representation;
  LOCAL
    results            : SET OF representation;
    result_bag         : BAG OF representation;
    intermediate_items : SET OF founded_item_select;
  END_LOCAL;
  -- Find the representations in which the item is used and add to the
  -- results set.
  results := [];
  result_bag :=
USEDIN(item,'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.REPRESENTATION.ITEMS');
  IF SIZEOF(result_bag) > 0 THEN
    REPEAT i := 1 TO HIINDEX(result_bag);
      results := results + result_bag[i];
    END_REPEAT;
  END_IF;
  -- Find all representation_items or founded_items
  -- by which item is referenced directly or indirectly.
  intermediate_items := using_items(item,[]);
  -- If the set of intermediate items is not empty;
  IF SIZEOF(intermediate_items) > 0 THEN
    -- For each element in the set, add the
    -- representations of that element.
    REPEAT i := 1 TO HIINDEX(intermediate_items);
      result_bag := USEDIN(intermediate_items[i],
                    'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.REPRESENTATION.ITEMS');

      IF SIZEOF(result_bag) > 0 THEN
        REPEAT j := 1 TO HIINDEX(result_bag);
          results := results + result_bag[j];
        END_REPEAT;
      END_IF;
    END_REPEAT;
  END_IF;
  -- Return the set of representation in which the input item is
  -- used directly and indirectly (through intervening
  -- representation_items or founded items).
  RETURN (results);

END_FUNCTION;



FUNCTION using_items (item : founded_item_select;
                      checked_items: SET OF founded_item_select)
                    : SET OF founded_item_select;
  LOCAL
    new_check_items    : SET OF founded_item_select;
    result_items       : SET OF founded_item_select;
    next_items         : SET OF founded_item_select;
  END_LOCAL;
  result_items := [];
  new_check_items := checked_items + item;
  -- Find the set of representation_items or founded_items
  -- in which item is used directly.
  next_items := QUERY(z <* bag_to_set( USEDIN(item , '')) |
    ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.REPRESENTATION_ITEM' IN TYPEOF(z)) OR
    ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.FOUNDED_ITEM'        IN TYPEOF(z)));

  -- If the set of next_items is not empty;
  IF SIZEOF(next_items) > 0 THEN
    -- For each element in the set, find the using_items recursively
    REPEAT i := 1 TO HIINDEX(next_items);
      -- Check for loop in data model, i.e. one of the next_items
      -- occurred earlier in the set of check_items;
      IF NOT(next_items[i] IN new_check_items) THEN
        result_items := result_items + next_items[i] +
                        using_items(next_items[i],new_check_items);
      END_IF;
    END_REPEAT;
  END_IF;
  -- return the set of representation_items or founded_items
  -- in which the input item is used directly and indirectly.
  RETURN (result_items);

END_FUNCTION;



FUNCTION bag_to_set
 (the_bag : BAG OF GENERIC : intype) : SET OF GENERIC : intype; 
   LOCAL
    the_set: SET OF GENERIC : intype := [];
  END_LOCAL;
  IF SIZEOF (the_bag) > 0 THEN
    REPEAT i := 1 to HIINDEX (the_bag);
      the_set := the_set + the_bag [i];
    END_REPEAT;
  END_IF;
  RETURN (the_set);

END_FUNCTION;



FUNCTION get_role
 (obj : role_select) : object_role; 
  LOCAL
    role_bag : BAG OF role_association := (USEDIN(obj, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'ROLE_ASSOCIATION.' + 'ITEM_WITH_ROLE'));

  END_LOCAL;

  IF SIZEOF(role_bag) = 1 THEN
    RETURN (role_bag[1].role);
  ELSE
    RETURN (?);
  END_IF;

END_FUNCTION;



FUNCTION acyclic_product_definition_relationship
 (relation : product_definition_relationship; relatives : SET[1:?] OF product_definition; specific_relation : STRING) : BOOLEAN; 
LOCAL
      x : SET OF product_definition_relationship;
    END_LOCAL;

    IF relation.relating_product_definition IN relatives THEN
      RETURN (FALSE);
    END_IF;
    x := QUERY(pd <* bag_to_set(USEDIN(relation.relating_product_definition, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'PRODUCT_DEFINITION_RELATIONSHIP.' + 'RELATED_PRODUCT_DEFINITION')) | specific_relation IN TYPEOF(pd));

    REPEAT i := 1 TO HIINDEX(x);
      IF NOT acyclic_product_definition_relationship(x[i], relatives + relation.relating_product_definition, specific_relation) THEN
        RETURN (FALSE);
      END_IF;
    END_REPEAT;
RETURN (TRUE);

END_FUNCTION;



FUNCTION acyclic_mapped_representation
  (parent_set   : SET OF representation;
   children_set : SET OF representation_item) : BOOLEAN;
  LOCAL
    x,y : SET OF representation_item;
  END_LOCAL;
  -- Determine the subset of children_set that are mapped_items
  x := QUERY(z <* children_set | 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MAPPED_ITEM'
       IN TYPEOF(z));
  -- Determine that the subset has elements
  IF SIZEOF(x) > 0 THEN
    -- Check each element of the set
    REPEAT i := 1 TO HIINDEX(x);
      -- If the selected element maps a representation in the
      -- parent_set, then return false
      IF x[i]\mapped_item.mapping_source.mapped_representation
        IN parent_set THEN
        RETURN (FALSE);
      END_IF;
      -- Recursive check of the items of mapped_representation
      IF NOT acyclic_mapped_representation
        (parent_set +
        x[i]\mapped_item.mapping_source.mapped_representation,
        x[i]\mapped_item.mapping_source.mapped_representation.items) THEN
        RETURN (FALSE);
      END_IF;
    END_REPEAT;
  END_IF;
  -- Determine the subset of children_set that are not
  -- mapped_items
  x := children_set - x;
  -- Determine that the subset has elements
  IF SIZEOF(x) > 0 THEN
    -- For each element of the set:
    REPEAT i := 1 TO HIINDEX(x);
      -- Determine the set of representation_items referenced
      y := QUERY(z <* bag_to_set( USEDIN(x[i], '')) |
           'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.REPRESENTATION_ITEM' IN TYPEOF(z));

      -- Recursively check for an offending mapped_item
      -- Return false for any errors encountered
      IF NOT acyclic_mapped_representation(parent_set, y) THEN
        RETURN (FALSE);
      END_IF;
    END_REPEAT;
  END_IF;
  -- Return true when all elements are checked and
  -- no error conditions found
  RETURN (TRUE);

END_FUNCTION;



FUNCTION valid_measure_value
  (m : measure_value) : BOOLEAN;
  IF ('REAL' IN TYPEOF (m)) THEN
  RETURN (m > 0.0);
  ELSE
    IF ('INTEGER' IN TYPEOF (m)) THEN
    RETURN (m > 0);
    ELSE
      RETURN (TRUE);
    END_IF;
  END_IF;

END_FUNCTION;



 FUNCTION mixed_loop_type_set(l: SET[0:?] OF loop): LOGICAL;
    LOCAL
      poly_loop_type: LOGICAL;
    END_LOCAL;
    IF(SIZEOF(l) <= 1) THEN
      RETURN(FALSE);
    END_IF;
    poly_loop_type := ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.POLY_LOOP' IN TYPEOF(l[1]));
    REPEAT i := 2 TO SIZEOF(l);
      IF(('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.POLY_LOOP' IN TYPEOF(l[i])) <> poly_loop_type)

          THEN
          RETURN(TRUE);
       END_IF;
    END_REPEAT;
    RETURN(FALSE);

  END_FUNCTION;



 FUNCTION list_to_set(l : LIST [0:?] OF GENERIC:T) : SET OF GENERIC:T;
   LOCAL
     s : SET OF GENERIC:T := [];
   END_LOCAL;
      
   REPEAT i := 1 TO SIZEOF(l);
     s := s + l[i];
   END_REPEAT;
   
   RETURN(s);

 END_FUNCTION;



 FUNCTION list_face_loops(f: face) : LIST[0:?] OF loop;
   LOCAL
     loops : LIST[0:?] OF loop := [];
   END_LOCAL;
   
   REPEAT i := 1 TO SIZEOF(f.bounds);
     loops := loops +(f.bounds[i].bound);
   END_REPEAT;
      
   RETURN(loops);

 END_FUNCTION;



 FUNCTION conditional_reverse (p       : BOOLEAN;
                               an_item : reversible_topology)
                                       : reversible_topology;
   IF p THEN
     RETURN (an_item);
   ELSE
     RETURN (topology_reversed (an_item));
   END_IF;

 END_FUNCTION;



 FUNCTION topology_reversed (an_item : reversible_topology)
                                     : reversible_topology;

   IF ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.EDGE' IN TYPEOF (an_item)) THEN
     RETURN (edge_reversed (an_item));
   END_IF;

   IF ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PATH' IN TYPEOF (an_item)) THEN
     RETURN (path_reversed (an_item));
   END_IF;

   IF ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.FACE_BOUND' IN TYPEOF (an_item)) THEN
     RETURN (face_bound_reversed (an_item));
   END_IF;
  
   IF ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.FACE' IN TYPEOF (an_item)) THEN
     RETURN (face_reversed (an_item));
   END_IF;

   IF ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SHELL' IN TYPEOF (an_item)) THEN

     RETURN (shell_reversed (an_item));
   END_IF;

   IF ('SET' IN TYPEOF (an_item)) THEN
     RETURN (set_of_topology_reversed (an_item));
   END_IF;

   IF ('LIST' IN TYPEOF (an_item)) THEN
     RETURN (list_of_topology_reversed (an_item));
   END_IF;

   RETURN (?);

 END_FUNCTION;



 FUNCTION edge_reversed (an_edge : edge) : oriented_edge;
   LOCAL
     the_reverse : oriented_edge;
   END_LOCAL;

   IF ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ORIENTED_EDGE' IN TYPEOF (an_edge) ) THEN

     the_reverse  := dummy_tri ||
             edge(an_edge.edge_end, an_edge.edge_start) ||
             oriented_edge(an_edge\oriented_edge.edge_element,
                        NOT (an_edge\oriented_edge.orientation)) ;
   ELSE
     the_reverse := dummy_tri ||
             edge(an_edge.edge_end, an_edge.edge_start) ||
             oriented_edge(an_edge, FALSE);
   END_IF;
   RETURN (the_reverse);

 END_FUNCTION;



FUNCTION path_reversed (a_path : path) : oriented_path;
  LOCAL
    the_reverse : oriented_path ;
  END_LOCAL;
  IF ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ORIENTED_PATH' IN TYPEOF (a_path) ) THEN

    the_reverse := dummy_tri ||
       path(list_of_topology_reversed (a_path.edge_list)) ||
          oriented_path(a_path\oriented_path.path_element,
                          NOT(a_path\oriented_path.orientation)) ;
  ELSE
    the_reverse := dummy_tri ||
                   path(list_of_topology_reversed (a_path.edge_list)) ||
                       oriented_path(a_path, FALSE);
  END_IF;

  RETURN (the_reverse);

END_FUNCTION;



 FUNCTION list_of_topology_reversed (a_list
                                  : list_of_reversible_topology_item)
                                  : list_of_reversible_topology_item;
   LOCAL
     the_reverse : list_of_reversible_topology_item;
   END_LOCAL;
    
   the_reverse := [];
   REPEAT i := 1 TO SIZEOF (a_list);
     the_reverse := topology_reversed (a_list [i]) + the_reverse;
   END_REPEAT;
  
   RETURN (the_reverse);

 END_FUNCTION;



 FUNCTION face_bound_reversed (a_face_bound : face_bound) : face_bound;
   LOCAL
     the_reverse : face_bound ;
   END_LOCAL;
   IF ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.FACE_OUTER_BOUND' IN TYPEOF (a_face_bound) ) THEN

     the_reverse := dummy_tri ||
                      face_bound(a_face_bound\face_bound.bound,
                           NOT (a_face_bound\face_bound.orientation))
                            || face_outer_bound() ;
   ELSE
     the_reverse := dummy_tri ||
         face_bound(a_face_bound.bound, NOT(a_face_bound.orientation));
   END_IF;
  RETURN (the_reverse);

 END_FUNCTION;



 FUNCTION face_reversed (a_face : face) : oriented_face;
   LOCAL
     the_reverse : oriented_face ;
   END_LOCAL;
   IF ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ORIENTED_FACE' IN TYPEOF (a_face) ) THEN

     the_reverse := dummy_tri ||
       face(set_of_topology_reversed(a_face.bounds)) ||
          oriented_face(a_face\oriented_face.face_element,
                           NOT (a_face\oriented_face.orientation)) ;
   ELSE
     the_reverse := dummy_tri ||
       face(set_of_topology_reversed(a_face.bounds)) ||
                               oriented_face(a_face, FALSE) ;
   END_IF;
      RETURN (the_reverse);

 END_FUNCTION;



 FUNCTION set_of_topology_reversed (a_set : set_of_reversible_topology_item)
                                          : set_of_reversible_topology_item;
   LOCAL
     the_reverse : set_of_reversible_topology_item;
   END_LOCAL;
   
   the_reverse := [];
   REPEAT i := 1 TO SIZEOF (a_set);
     the_reverse := the_reverse + topology_reversed (a_set [i]);
   END_REPEAT;
   
   RETURN (the_reverse);

 END_FUNCTION;



 FUNCTION shell_reversed (a_shell : shell) : shell;
   IF ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.OPEN_SHELL' IN TYPEOF (a_shell) ) THEN
     RETURN (open_shell_reversed (a_shell));
   ELSE
     IF ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CLOSED_SHELL' IN TYPEOF (a_shell) ) THEN

       RETURN (closed_shell_reversed (a_shell));
     ELSE
       RETURN (?);
     END_IF;
   END_IF;

 END_FUNCTION;



 FUNCTION open_shell_reversed ( a_shell : open_shell) :
                                         oriented_open_shell;
   LOCAL
     the_reverse : oriented_open_shell;
   END_LOCAL;
   IF ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ORIENTED_OPEN_SHELL' IN TYPEOF (a_shell) ) THEN

     the_reverse := dummy_tri ||
                  connected_face_set (
                      a_shell\connected_face_set.cfs_faces) ||
                  open_shell () || oriented_open_shell(
                    a_shell\oriented_open_shell.open_shell_element,
                      (NOT (a_shell\oriented_open_shell.orientation)));
   ELSE
     the_reverse := dummy_tri ||
                 connected_face_set (
                     a_shell\connected_face_set.cfs_faces) ||
                 open_shell () ||  oriented_open_shell (a_shell, FALSE);
   END_IF;
   RETURN (the_reverse);

 END_FUNCTION;



 FUNCTION closed_shell_reversed (a_shell : closed_shell) :
                                       oriented_closed_shell;
  LOCAL
    the_reverse : oriented_closed_shell;
  END_LOCAL;
   IF ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ORIENTED_CLOSED_SHELL' IN TYPEOF (a_shell) ) THEN

      the_reverse := dummy_tri ||
                    connected_face_set (
                       a_shell\connected_face_set.cfs_faces) ||
                    closed_shell () || oriented_closed_shell(
                     a_shell\oriented_closed_shell.closed_shell_element,
                       NOT(a_shell\oriented_closed_shell.orientation));
   ELSE
      the_reverse := dummy_tri ||
               connected_face_set (
                 a_shell\connected_face_set.cfs_faces) ||
               closed_shell () || oriented_closed_shell (a_shell, FALSE);
   END_IF;
   RETURN (the_reverse);

 END_FUNCTION;



   FUNCTION boolean_choose (b : boolean;
            choice1, choice2 : generic : item)  : generic : item;
 
     IF b THEN
       RETURN (choice1);
     ELSE
       RETURN (choice2);
     END_IF;

   END_FUNCTION;



 FUNCTION path_head_to_tail(a_path : path) : LOGICAL;
   LOCAL
     n : INTEGER;
     p : LOGICAL := TRUE;
   END_LOCAL;
     
     n := SIZEOF (a_path.edge_list);
     REPEAT i := 2 TO n;
       p := p AND (a_path.edge_list[i-1].edge_end :=:
                   a_path.edge_list[i].edge_start);
     END_REPEAT;
     
     RETURN (p);

 END_FUNCTION;



 FUNCTION msb_shells (brep: manifold_solid_brep) :
                          SET [1:?] OF  closed_shell;
 
     IF SIZEOF (QUERY (msbtype <* TYPEOF (brep) |
       msbtype LIKE '*BREP_WITH_VOIDS')) >= 1 THEN
       RETURN (brep\brep_with_voids.voids + brep.outer);
     ELSE
       RETURN([brep.outer]);
     END_IF;

 END_FUNCTION;



FUNCTION check_associative_shape_aspects
  (sdr : shape_definition_representation) : BOOLEAN;
  LOCAL
    sr1, sr2 : SET OF representation;
    dm, pv   : SET OF representation;
  END_LOCAL;

  -- Check if the representation contains only two items
  IF (SIZEOF (sdr.used_representation.items) <> 2) THEN
     RETURN (FALSE);
  END_IF;

  -- Find the representations that use each item
  sr1 := using_representations(sdr.used_representation.items[1]);
  sr2 := using_representations(sdr.used_representation.items[2]);

  -- Find the representations in which item 1 representations are mapped
  REPEAT i := 1 TO HIINDEX(sr1);
    dm := representations_mapped_into(sr1[i]);
    REPEAT j := 1 TO HIINDEX(dm);
      IF ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.DRAUGHTING_MODEL' IN TYPEOF(dm[j]))
      THEN
        IF (dm[j] IN sr2) THEN RETURN (TRUE);
        END_IF;
        -- Find the views that the draughting model is mapped into
        pv := representations_mapped_into(dm[j]);
        REPEAT k := 1 TO HIINDEX(pv);
          IF ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PRESENTATION_VIEW' IN TYPEOF(pv[k]))
          THEN
            IF (pv[k] IN sr2) THEN RETURN (TRUE);
            END_IF;
          END_IF;
        END_REPEAT;
      END_IF;
    END_REPEAT;
  END_REPEAT;

  -- Find the representations in which item 2 representations are mapped
  REPEAT i := 1 TO HIINDEX(sr2);
    dm := representations_mapped_into(sr2[i]);
    REPEAT j := 1 TO HIINDEX(dm);
      IF ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.DRAUGHTING_MODEL' IN TYPEOF(dm[j]))
      THEN
        IF (dm[j] IN sr1) THEN RETURN (TRUE);
        END_IF;
        -- Find the views that the draughting model is mapped into
        pv := representations_mapped_into(dm[j]);
        REPEAT k := 1 TO HIINDEX(pv);
          IF ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PRESENTATION_VIEW' IN TYPEOF(pv[k]))

          THEN
            IF (pv[k] IN sr1) THEN RETURN (TRUE);
            END_IF;
          END_IF;
        END_REPEAT;
      END_IF;
    END_REPEAT;
  END_REPEAT;
  RETURN(FALSE);

END_FUNCTION;



FUNCTION representations_mapped_into 
  (rep : representation) : SET of representation;
  LOCAL
    results : SET OF representation := [];
    rm      : SET OF representation_map;
    mi      : SET OF mapped_item := [];
  END_LOCAL;

  -- Find set of representation_maps which specify the representation
  rm := bag_to_set(USEDIN(rep, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
                    'REPRESENTATION_MAP.MAPPED_REPRESENTATION'));
  -- Find the set of mapped_items that use each representation_map
  REPEAT i := 1 TO HIINDEX(rm);
    mi := mi + rm[i].map_usage;
  END_REPEAT;
  -- Find the set of representations that use each mapped_item
  REPEAT j := 1 TO HIINDEX(mi);
    results := results + USEDIN(mi[j],'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +

                                      'REPRESENTATION.ITEMS');
  END_REPEAT;
  RETURN(results);

END_FUNCTION;



FUNCTION aspect_ratio (p : planar_box) : positive_ratio_measure;
  RETURN (p.size_in_x / p.size_in_y);

END_FUNCTION;



FUNCTION check_text_alignment (ct : composite_text) : BOOLEAN;

  LOCAL
    a : SET OF text_alignment := [];
  END_LOCAL;

  -- create a set of all the alignments
  REPEAT i := 1 TO HIINDEX (ct.collected_text);
    a := a + [ct.collected_text[i]\text_literal.alignment];
  END_REPEAT;

  -- if there is more than one element in the set
  -- then not all alignments were the same
  RETURN (SIZEOF(a) = 1);

END_FUNCTION;



FUNCTION check_text_font (ct : composite_text) : BOOLEAN;

  LOCAL
    f : SET OF font_select := [];
  END_LOCAL;

  -- build a set of all the fonts
  REPEAT i := 1 TO HIINDEX (ct.collected_text);
    f := f + [ct.collected_text[i]\text_literal.font];
  END_REPEAT;

  -- if there is more than one element in the set
  -- then not all fonts were the same
  RETURN (SIZEOF(f) <= 1);

END_FUNCTION;



FUNCTION acyclic_mapped_item_usage (rep: representation) : BOOLEAN;
  -- returns TRUE if the representation contains one or more mapped_items
  -- that are a mapping of the representation itself
  LOCAL
    items : SET OF representation_item;
  END_LOCAL;

  items := QUERY (item <* rep.items |
           'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MAPPED_ITEM' IN TYPEOF (item));

  IF SIZEOF (items) = 0
  THEN 
    RETURN (FALSE);
  ELSE 
    REPEAT i := 1 TO HIINDEX (items);
      IF items[i]\mapped_item.mapping_source.mapped_representation :=: rep
      THEN 
        RETURN (TRUE);
      ELSE 
        RETURN (acyclic_mapped_item_usage(items[i]\
                  mapped_item.mapping_source.mapped_representation));
      END_IF;
    END_REPEAT;
  RETURN (FALSE);
  END_IF;

END_FUNCTION;



FUNCTION item_in_context
  (item  : representation_item;
   cntxt : representation_context) : BOOLEAN;
  LOCAL
    y : BAG OF representation_item;
  END_LOCAL;
  -- If there is one or more representation using both the item
  -- and cntxt return true.
  IF SIZEOF(USEDIN(item,'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.REPRESENTATION.ITEMS')
    * cntxt.representations_in_context) > 0 THEN
    RETURN (TRUE);
    -- Determine the bag of representation_items that reference
    -- item
    ELSE y := QUERY(z <* USEDIN (item , '') |
           'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.REPRESENTATION_ITEM' IN TYPEOF(z));

      -- Ensure that the bag is not empty
      IF SIZEOF(y) > 0 THEN
      -- For each element in the bag
      REPEAT i := 1 TO HIINDEX(y);
        -- Check to see it is an item in the input cntxt.
        IF item_in_context(y[i], cntxt) THEN
          RETURN (TRUE);
        END_IF;
      END_REPEAT;
    END_IF;
  END_IF;
  -- Return false when all possible branches have been checked
  -- with no success.
  RETURN (FALSE);

END_FUNCTION;



FUNCTION acyclic_symbol_representation_relationship
  (relation : symbol_representation_relationship;
   children : SET OF symbol_representation ) : BOOLEAN;
  LOCAL
    x : SET OF symbol_representation_relationship;
    local_children : SET OF symbol_representation;
  END_LOCAL;
 
  REPEAT i:=1 TO HIINDEX(children);
    IF relation\representation_relationship.rep_1 :=: children[i] THEN
      RETURN(FALSE);
    END_IF;
  END_REPEAT;
 
  x := bag_to_set (USEDIN ( relation\representation_relationship.rep_1,
                'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.'+

                'REPRESENTATION_RELATIONSHIP.'+ 'REP_2'));
  local_children := children + relation\representation_relationship.rep_1;
 
  IF SIZEOF (x) > 0 THEN
    REPEAT i:=1 TO HIINDEX (x);
      IF NOT acyclic_symbol_representation_relationship(x[i] , 
                                                local_children) THEN
        RETURN (FALSE);
      END_IF;
    END_REPEAT;
  END_IF;
 
  RETURN (TRUE);
 

END_FUNCTION;



FUNCTION acyclic_composite_text(start_composite : composite_text;
                                child_text : SET [1:?] OF
                                text_or_character) : LOGICAL;

  LOCAL
   i : INTEGER;
   local_composite_text : SET [0:?] OF composite_text;
   local_annotation_text : SET [0:?] OF annotation_text;
   local_children : SET [0:?] OF text_or_character;
  END_LOCAL;

  local_composite_text := QUERY (child <* child_text |
                          ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.COMPOSITE_TEXT'
                           IN TYPEOF (child)));

  IF (SIZEOF (local_composite_text) > 0) THEN
    REPEAT i := 1 TO HIINDEX (local_composite_text);
      IF (start_composite :=: local_composite_text[i]) THEN
        RETURN (FALSE);
      END_IF;
    END_REPEAT;
  END_IF;

  local_children := child_text;

  IF (SIZEOF (local_composite_text)) > 0 THEN
    REPEAT i := 1 TO HIINDEX (local_composite_text);
      local_children := local_children +
                        local_composite_text[i].collected_text;
    END_REPEAT;
  END_IF;


  local_annotation_text := QUERY (child <* child_text |
                          ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANNOTATION_TEXT'
                           IN TYPEOF (child)));

  IF (SIZEOF (local_annotation_text) > 0) THEN
    REPEAT i := 1 TO HIINDEX (local_annotation_text);
      local_children := local_children +
      QUERY (item <* local_annotation_text[i]\mapped_item.
                     mapping_source.mapped_representation.items |
        SIZEOF(['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ANNOTATION_TEXT',
                'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.COMPOSITE_TEXT'] *

                TYPEOF(item)) > 0);
    END_REPEAT;
  END_IF;

  IF (local_children :<>: child_text) THEN
    RETURN (acyclic_composite_text (start_composite, local_children));
  ELSE
    RETURN (TRUE);
  END_IF;


 END_FUNCTION;



FUNCTION field_in_table (field : table_record_field_representation;
                         table : annotation_table_occurrence): BOOLEAN;
  LOCAL
    table_rep : table_representation;
    symbol_rep_rel_set : SET OF symbol_representation_relationship;
    mapped_item_set : SET OF mapped_item;
    table_record_rep_set : SET OF table_record_representation := [];
  END_LOCAL;
 
  table_rep := table\styled_item.item\mapped_item.mapping_source.
    mapped_representation;
  mapped_item_set := QUERY(item <* table_rep.items |
                       ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MAPPED_ITEM' IN
                        TYPEOF(item))
                                 AND
                       ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.'+
                        'TABLE_RECORD_REPRESENTATION' IN
                         TYPEOF(item\mapped_item.mapping_source.
                                    mapped_representation ))
                     );
 
  REPEAT i := 1 TO HIINDEX(mapped_item_set);
    table_record_rep_set := table_record_rep_set +
           mapped_item_set[i].mapping_source.mapped_representation;
  END_REPEAT;
 
  symbol_rep_rel_set := bag_to_set (USEDIN(table_rep, 
                               'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.'+
                               'REPRESENTATION_RELATIONSHIP.REP_1'));
 
  REPEAT i := 1 TO HIINDEX(symbol_rep_rel_set);
     table_record_rep_set := table_record_rep_set +
              symbol_rep_rel_set[i]\representation_relationship.rep_2;
  END_REPEAT;
 
  IF SIZEOF(QUERY( table_record_rep <* table_record_rep_set |
--              (SIZEOF(QUERY( symbol_rep_rel <* USEDIN(table_record_rep,
--                            'PRESENTATION_DEFINITION_SCHEMA.'+
--                            'SYMBOL_REPRESENTATION_RELATIONSHIP.REP_1') |
--                       symbol_rep_rel\representation_relationship.rep_2 :=: field
              (SIZEOF(QUERY( rep_rel <* USEDIN(table_record_rep,
                            'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.'+
                            'REPRESENTATION_RELATIONSHIP.REP_1') |
                       ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' +
                       'SYMBOL_REPRESENTATION_RELATIONSHIP' IN TYPEOF(rep_rel)) AND  
                       (rep_rel.rep_2 :=: field)
                       )) > 0)
                       OR
              (SIZEOF(QUERY(item <* table_record_rep.items |
                        ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MAPPED_ITEM' IN

                         TYPEOF(item))
                                 AND
                        (field :=: item\mapped_item.mapping_source.
                                    mapped_representation )
                         )) > 0)
             )) = 0 THEN
    RETURN(FALSE);
  END_IF;
 
  RETURN(TRUE);
 

END_FUNCTION;



 FUNCTION list_to_array(lis : LIST [0:?] OF GENERIC : T;
                      low,u : INTEGER) : ARRAY [low:u] OF GENERIC : T;
   LOCAL
     n   : INTEGER;
     res : ARRAY [low:u] OF GENERIC : T;
   END_LOCAL;
      
   n := SIZEOF(lis);
   IF (n <> (u-low +1)) THEN
     RETURN(?);
   ELSE
     res := [lis[1] : n];
     REPEAT i := 2 TO n;
       res[low+i-1] := lis[i];
     END_REPEAT;
     RETURN(res);
   END_IF;

 END_FUNCTION;



 FUNCTION make_array_of_array(lis : LIST[1:?] OF LIST [1:?] OF GENERIC : T;
                              low1, u1, low2, u2 : INTEGER):
                 ARRAY [low1:u1] OF ARRAY [low2:u2] OF GENERIC : T;
   LOCAL
     res   : ARRAY[low1:u1] OF ARRAY [low2:u2] OF GENERIC : T;
   END_LOCAL;

(* Check input dimensions for consistency *)
   IF (u1-low1+1) <> SIZEOF(lis) THEN
     RETURN (?);
   END_IF;
   IF (u2 - low2 + 1 ) <> SIZEOF(lis[1]) THEN
     RETURN (?) ;
   END_IF;
(* Initialise res with values from lis[1] *)
   res := [list_to_array(lis[1], low2, u2) : (u1-low1 + 1)];
   REPEAT i := 2 TO HIINDEX(lis);
     IF (u2-low2+1) <> SIZEOF(lis[i]) THEN
       RETURN (?);
     END_IF;     
     res[low1+i-1] := list_to_array(lis[i], low2, u2);
   END_REPEAT; 
   
   RETURN (res);

 END_FUNCTION;



 FUNCTION acyclic_curve_replica(rep : curve_replica; parent : curve)
                                              : BOOLEAN;
   IF NOT (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CURVE_REPLICA') IN TYPEOF(parent)) THEN

      RETURN (TRUE);
   END_IF;
 (* Return TRUE if the parent is not of type curve_replica *)
   IF (parent :=: rep) THEN
      RETURN (FALSE);
  (* Return FALSE if the parent is the same curve_replica, otherwise,
   call function again with the parents own parent_curve.     *)
    ELSE
    RETURN(acyclic_curve_replica(rep,
               parent\curve_replica.parent_curve));
    END_IF;

  END_FUNCTION;



 FUNCTION acyclic_point_replica(rep : point_replica; parent : point)
                                              : BOOLEAN;
   IF NOT (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.POINT_REPLICA') IN TYPEOF(parent)) THEN

      RETURN (TRUE);
   END_IF;
 (* Return TRUE if the parent is not of type point_replica *)
   IF (parent :=: rep) THEN
      RETURN (FALSE);
  (* Return FALSE if the parent is the same point_replica, otherwise,
   call function again with the parents own parent_pt.     *)
    ELSE RETURN(acyclic_point_replica(rep, parent\point_replica.parent_pt));
    END_IF;

  END_FUNCTION;



   FUNCTION constraints_rectangular_composite_surface
           (s : rectangular_composite_surface) : BOOLEAN;

   (* Check the surface types *)
     REPEAT i := 1 TO s.n_u;
       REPEAT j := 1 TO s.n_v;
         IF NOT (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.B_SPLINE_SURFACE' IN TYPEOF
                    (s.segments[i][j].parent_surface)) OR
                 ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.RECTANGULAR_TRIMMED_SURFACE' IN TYPEOF

                    (s.segments[i][j].parent_surface))) THEN
           RETURN(FALSE);
       END_IF;
     END_REPEAT;
   END_REPEAT;

   (* Check the transition codes, omitting the last row or column *)
   REPEAT i := 1 TO s.n_u-1;
     REPEAT j := 1 TO s.n_v;
       IF s.segments[i][j].u_transition = discontinuous THEN
         RETURN(FALSE);
       END_IF;
     END_REPEAT;
   END_REPEAT;
   
   REPEAT i := 1 TO s.n_u;
     REPEAT j := 1 TO s.n_v-1;
       IF s.segments[i][j].v_transition = discontinuous THEN
         RETURN(FALSE);
       END_IF;
     END_REPEAT;
   END_REPEAT;
   RETURN(TRUE);

 END_FUNCTION;



FUNCTION get_basis_surface (c : curve_on_surface) : SET[0:2] OF surface;
  LOCAL
    surfs  : SET[0:2] OF surface;
    n      : INTEGER;
  END_LOCAL;
  surfs := [];
  IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PCURVE' IN TYPEOF (c) THEN
    surfs := [c\pcurve.basis_surface];
  ELSE
    IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SURFACE_CURVE' IN TYPEOF (c) THEN
      n := SIZEOF(c\surface_curve.associated_geometry);
      REPEAT i := 1 TO n;
      surfs := surfs +
                associated_surface(c\surface_curve.associated_geometry[i]);
      END_REPEAT;
    END_IF;
  END_IF;
  IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.COMPOSITE_CURVE_ON_SURFACE' IN TYPEOF (c) THEN

   (* For a composite_curve_on_surface the basis_surface is the intersection
    of the basis_surfaces of all the segments. *)
     n := SIZEOF(c\composite_curve.segments);
     surfs := get_basis_surface(
                     c\composite_curve.segments[1].parent_curve);
     IF n > 1 THEN
       REPEAT i := 2 TO n;
         surfs := surfs * get_basis_surface(
                  c\composite_curve.segments[i].parent_curve);
       END_REPEAT;
     END_IF;

  END_IF;
  RETURN(surfs);

END_FUNCTION;



 FUNCTION associated_surface(arg : pcurve_or_surface) : surface;
   LOCAL
     surf : surface;
   END_LOCAL;
   
   IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PCURVE' IN TYPEOF(arg) THEN

     surf := arg.basis_surface;
   ELSE
     surf := arg;
   END_IF;
   RETURN(surf);

 END_FUNCTION;



 FUNCTION acyclic_surface_replica(rep : surface_replica; parent : surface)
                                              : BOOLEAN;
   IF NOT (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SURFACE_REPLICA') IN TYPEOF(parent)) THEN

      RETURN (TRUE);
   END_IF;
 (* Return TRUE if the parent is not of type surface_replica *)
   IF (parent :=: rep) THEN
      RETURN (FALSE);
  (* Return FALSE if the parent is the same surface_replica, otherwise,
   call function again with the parents own parent_surface.     *)
    ELSE RETURN(acyclic_surface_replica(rep,
                   parent\surface_replica.parent_surface));
    END_IF;

  END_FUNCTION;



 FUNCTION above_plane(p1, p2, p3, p4 : cartesian_point) : REAL;
   LOCAL
     dir2, dir3, dir4 : direction :=
                 dummy_gri || direction([1.0, 0.0, 0.0]);
     val, mag         : REAL;
   END_LOCAL;

   IF (p1.dim <> 3) THEN
     RETURN(?);
   END_IF;
   REPEAT i := 1 TO 3;
     dir2.direction_ratios[i] := p2.coordinates[i] - p1.coordinates[i];
     dir3.direction_ratios[i] := p3.coordinates[i] - p1.coordinates[i];
     dir4.direction_ratios[i] := p4.coordinates[i] - p1.coordinates[i];
     mag := dir4.direction_ratios[i]*dir4.direction_ratios[i];
  END_REPEAT;
  mag := sqrt(mag);
  val := mag*dot_product(dir4, cross_product(dir2, dir3).orientation);
  RETURN(val);

 END_FUNCTION;



 FUNCTION dot_product(arg1, arg2 : direction) : REAL;
   LOCAL
     scalar : REAL;
     vec1, vec2: direction;
     ndim : INTEGER;
   END_LOCAL;
   
   IF NOT EXISTS (arg1) OR NOT EXISTS (arg2) THEN
     scalar := ?;
     (* When function is called with invalid data an indeterminate result
     is returned *)
   ELSE
     IF (arg1.dim <> arg2.dim) THEN
       scalar := ?;
     (* When function is called with invalid data an indeterminate result
     is returned *)
     ELSE
       BEGIN
         vec1   := normalise(arg1);
         vec2   := normalise(arg2);
         ndim   := arg1.dim;
         scalar := 0.0;
         REPEAT  i := 1 TO ndim;
           scalar := scalar +
                       vec1.direction_ratios[i]*vec2.direction_ratios[i];
         END_REPEAT;
       END;
     END_IF;
   END_IF;
   RETURN (scalar);

 END_FUNCTION;



 FUNCTION normalise (arg : vector_or_direction) : vector_or_direction;
   LOCAL
     ndim   : INTEGER;
     v      : direction;
     result : vector_or_direction;
     vec    : vector;
     mag    : REAL;
   END_LOCAL;
   
   IF NOT EXISTS (arg) THEN
     result := ?;
 (* When function is called with invalid data a NULL result is returned *)
   ELSE
     ndim := arg.dim;
     IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.VECTOR' IN TYPEOF(arg) THEN
       BEGIN
             v := dummy_gri || direction(arg.orientation.direction_ratios);
         IF arg.magnitude = 0.0 THEN
           RETURN(?);
         ELSE
          vec := dummy_gri || vector (v, 1.0);
         END_IF;
       END;
     ELSE
       v := dummy_gri || direction (arg.direction_ratios);
     END_IF;
     mag := 0.0;
     REPEAT  i := 1 TO ndim;
       mag := mag + v.direction_ratios[i]*v.direction_ratios[i];
     END_REPEAT;
     IF mag > 0.0 THEN
       mag := SQRT(mag);
       REPEAT  i := 1 TO ndim;
         v.direction_ratios[i] := v.direction_ratios[i]/mag;
       END_REPEAT;
       IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.VECTOR' IN TYPEOF(arg) THEN

         vec.orientation := v;
         result := vec;
       ELSE
         result := v;
       END_IF;
     ELSE
       RETURN(?);
     END_IF;
   END_IF;
   RETURN (result);

 END_FUNCTION;



FUNCTION cross_product (arg1, arg2 : direction) : vector;
  LOCAL
    mag    : REAL;
    res    : direction;
    v1,v2  : LIST[3:3] OF REAL;
    result : vector;
  END_LOCAL;
  
  IF ( NOT EXISTS (arg1) OR (arg1.dim = 2)) OR
     ( NOT EXISTS (arg2) OR (arg2.dim = 2)) THEN
    RETURN(?);
  ELSE
    BEGIN
      v1  := normalise(arg1).direction_ratios;
      v2  := normalise(arg2).direction_ratios;
      res := dummy_gri || direction([(v1[2]*v2[3] - v1[3]*v2[2]),
            (v1[3]*v2[1] - v1[1]*v2[3]), (v1[1]*v2[2] - v1[2]*v2[1])]);
      mag := 0.0;
      REPEAT i := 1 TO 3;
        mag := mag + res.direction_ratios[i]*res.direction_ratios[i];
      END_REPEAT;
      IF (mag > 0.0) THEN
        result := dummy_gri || vector(res, SQRT(mag));
      ELSE
        result := dummy_gri || vector(arg1, 0.0);
      END_IF;
      RETURN(result);
    END;
  END_IF;

END_FUNCTION;



 FUNCTION same_side(plane_pts : LIST [3:3] of cartesian_point;
                    test_points : LIST [2:?] of cartesian_point) : BOOLEAN;
   LOCAL
     val1, val2 : REAL;
     n          : INTEGER;
   END_LOCAL;

   IF (plane_pts[1].dim = 2) OR (test_points[1].dim = 2) THEN
     RETURN(?);
   END_IF;
   n := SIZEOF(test_points);
   val1 := above_plane(plane_pts[1], plane_pts[2], plane_pts[3],
                       test_points[1] );
   REPEAT i := 2 TO n;
     val2 := above_plane(plane_pts[1], plane_pts[2], plane_pts[3],
                       test_points[i] );
     IF (val1*val2 <= 0.0) THEN
       RETURN(FALSE);
     END_IF;
   END_REPEAT;
   RETURN(TRUE);

 END_FUNCTION;



 FUNCTION acyclic_solid_replica(rep : solid_replica; parent :
                    solid_model) : BOOLEAN;
   IF NOT (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SOLID_REPLICA') IN TYPEOF(parent)) THEN

      RETURN (TRUE);
   END_IF;
 (* Return TRUE if the parent is not of type solid_replica. *)
   IF (parent :=: rep) THEN
      RETURN (FALSE);
  (* Return FALSE if the parent is the same solid_replica, otherwise,
   call function again with the parents own parent_solid.     *)
    ELSE RETURN(acyclic_solid_replica(rep,
                      parent\solid_replica.parent_solid));
    END_IF;

  END_FUNCTION;



FUNCTION valid_calendar_date
 (date : calendar_date) : LOGICAL; 
  CASE date.month_component OF
    1  : RETURN({ 1 <= date.day_component <= 31 });
    2  : BEGIN
           IF (leap_year(date.year_component)) THEN
             RETURN({ 1 <= date.day_component <= 29 });
           ELSE
             RETURN({ 1 <= date.day_component <= 28 });
           END_IF;
         END;
    3  : RETURN({ 1 <= date.day_component <= 31 });
    4  : RETURN({ 1 <= date.day_component <= 30 });
    5  : RETURN({ 1 <= date.day_component <= 31 });
    6  : RETURN({ 1 <= date.day_component <= 30 });
    7  : RETURN({ 1 <= date.day_component <= 31 });
    8  : RETURN({ 1 <= date.day_component <= 31 });
    9  : RETURN({ 1 <= date.day_component <= 30 });
    10 : RETURN({ 1 <= date.day_component <= 31 });
    11 : RETURN({ 1 <= date.day_component <= 30 });
    12 : RETURN({ 1 <= date.day_component <= 31 });
  END_CASE;
  RETURN (FALSE);

END_FUNCTION;



FUNCTION leap_year
 (year : year_number) : BOOLEAN; 
  IF ((((year MOD 4) = 0) AND ((year MOD 100) <> 0)) OR ((year MOD 400) = 0)) THEN
    RETURN (TRUE);
  ELSE
    RETURN (FALSE);
  END_IF;

END_FUNCTION;



FUNCTION valid_time
 (time : local_time) : BOOLEAN; 
  IF EXISTS(time.second_component) THEN
    RETURN (EXISTS(time.minute_component));
  ELSE
    RETURN (TRUE);
  END_IF;

END_FUNCTION;



FUNCTION value_range_wr1
 (agg : AGGREGATE OF representation_item) : BOOLEAN; 
BEGIN
IF (SIZEOF(agg) = 2) AND ((SIZEOF(QUERY (i1 <* agg | (
'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MEASURE_REPRESENTATION_ITEM' IN TYPEOF
(i1)))) = 2) OR
(SIZEOF(QUERY (i2 <* agg | (
'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.VALUE_REPRESENTATION_ITEM' IN TYPEOF

(i2)))) = 2)) THEN
RETURN(TRUE);
ELSE
RETURN(FALSE);
END_IF;
END;

        END_FUNCTION;



FUNCTION value_range_wr2
 (agg : AGGREGATE OF representation_item) : BOOLEAN; 
BEGIN
IF (SIZEOF(QUERY (i <* agg | (i.name = 'upper limit'))) = 1)
AND (SIZEOF(QUERY (i <* agg | (i.name = 'lower limit'))) = 1)
THEN
RETURN(TRUE);
ELSE
RETURN(FALSE);
END_IF;
END;

        END_FUNCTION;



FUNCTION value_range_wr3
 (agg : AGGREGATE OF representation_item) : BOOLEAN; 
BEGIN
IF (SIZEOF(QUERY(i1 <* agg |
('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MEASURE_REPRESENTATION_ITEM' IN TYPEOF (i1)) AND
(SIZEOF (QUERY (i2 <* agg |
('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MEASURE_REPRESENTATION_ITEM' IN TYPEOF (i2)) AND

(i1 :<>: i2) AND (i1\measure_with_unit.unit_component :=: i2\measure_with_unit.unit_component))) = 1))) = 2)
THEN
RETURN (TRUE);
ELSE
RETURN (FALSE);
END_IF;
END;

        END_FUNCTION;

  

FUNCTION valid_wireframe_edge_curve 
( 
crv : curve ) : BOOLEAN ;
 IF SIZEOF ([ 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.LINE', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CONIC', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.B_SPLINE_CURVE', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.POLYLINE' ] * TYPEOF (crv)) = 1 THEN 
 RETURN (TRUE);
 ELSE 
 IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CURVE_REPLICA' IN TYPEOF (crv) THEN 
 RETURN (valid_wireframe_edge_curve(crv\curve_replica.parent_curve));
 ELSE 
 IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.OFFSET_CURVE_3D' IN TYPEOF (crv) THEN 

 RETURN (valid_wireframe_edge_curve(crv\offset_curve_3d.basis_curve));
 END_IF ;
 END_IF ;
 END_IF ;
 RETURN (FALSE);

 END_FUNCTION;

FUNCTION valid_wireframe_vertex_point 
( 
pnt : point ) : BOOLEAN ;
 IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CARTESIAN_POINT' IN TYPEOF (pnt) THEN 
 RETURN (TRUE);
 ELSE 
 IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.POINT_REPLICA' IN TYPEOF (pnt) THEN 

 RETURN (valid_wireframe_vertex_point(pnt\point_replica.parent_pt));
 END_IF ;
 END_IF ;
 RETURN (FALSE);

 END_FUNCTION;



 FUNCTION build_2axes(ref_direction : direction) : LIST [2:2] OF direction;
   LOCAL
     d : direction := NVL(normalise(ref_direction),
                          dummy_gri || direction([1.0,0.0]));
   END_LOCAL;

   RETURN([d, orthogonal_complement(d)]);

 END_FUNCTION;



 FUNCTION orthogonal_complement(vec : direction) : direction;
   LOCAL
     result :  direction ;
   END_LOCAL;

   IF (vec.dim <> 2) OR NOT EXISTS (vec) THEN
     RETURN(?);
   ELSE
     result := dummy_gri || direction([-vec.direction_ratios[2],
                                          vec.direction_ratios[1]]);
     RETURN(result);
   END_IF;

 END_FUNCTION;



 FUNCTION build_axes(axis, ref_direction : direction) :
                                          LIST [3:3] OF direction;
   LOCAL
     d1, d2 : direction;
   END_LOCAL;
  d1 := NVL(normalise(axis), dummy_gri || direction([0.0,0.0,1.0]));
  d2 := first_proj_axis(d1, ref_direction);
  RETURN([d2, normalise(cross_product(d1,d2)).orientation, d1]);

 END_FUNCTION;



FUNCTION first_proj_axis(z_axis, arg : direction) : direction;
  LOCAL
    x_axis : direction;
    v      : direction;
    z      : direction;
    x_vec  : vector;
  END_LOCAL;
  
  IF (NOT EXISTS(z_axis)) THEN
    RETURN (?) ;
  ELSE
    z := normalise(z_axis);
    IF NOT EXISTS(arg) THEN
      IF ((z.direction_ratios <> [1.0,0.0,0.0]) AND
          (z.direction_ratios <> [-1.0,0.0,0.0]))  THEN
        v :=  dummy_gri || direction([1.0,0.0,0.0]);
      ELSE
        v := dummy_gri || direction([0.0,1.0,0.0]);
      END_IF;
    ELSE
      IF  (arg.dim <> 3) THEN
        RETURN (?) ;
      END_IF;
      IF ((cross_product(arg,z).magnitude) = 0.0) THEN
        RETURN (?);
      ELSE
        v := normalise(arg);
      END_IF;
    END_IF;
    x_vec := scalar_times_vector(dot_product(v, z), z);
    x_axis := vector_difference(v, x_vec).orientation;
    x_axis := normalise(x_axis);
  END_IF;
  RETURN(x_axis);

END_FUNCTION;



 FUNCTION scalar_times_vector (scalar : REAL; vec : vector_or_direction)
                                      : vector;
   LOCAL
     v      : direction;
     mag    : REAL;
     result : vector;
   END_LOCAL;

   IF NOT EXISTS (scalar) OR NOT EXISTS (vec) THEN
     RETURN (?) ;
    ELSE
     IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.VECTOR' IN TYPEOF (vec) THEN

       v   := dummy_gri || direction(vec.orientation.direction_ratios);
       mag := scalar * vec.magnitude;
     ELSE
       v   := dummy_gri || direction(vec.direction_ratios);
       mag := scalar;
     END_IF;
     IF (mag < 0.0 ) THEN
       REPEAT i := 1 TO SIZEOF(v.direction_ratios);
         v.direction_ratios[i] := -v.direction_ratios[i];
       END_REPEAT;
       mag := -mag;
     END_IF;
     result := dummy_gri || vector(normalise(v), mag);
   END_IF;
   RETURN (result);

 END_FUNCTION;



 FUNCTION vector_difference(arg1, arg2 : vector_or_direction) : vector;
   LOCAL
     result          : vector;
     res, vec1, vec2 : direction;
     mag, mag1, mag2 : REAL;
     ndim            : INTEGER;
   END_LOCAL;

   IF ((NOT EXISTS (arg1)) OR (NOT EXISTS (arg2))) OR (arg1.dim <> arg2.dim)
       THEN
     RETURN (?) ;
    ELSE
     BEGIN
       IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.VECTOR' IN TYPEOF(arg1) THEN
         mag1 := arg1.magnitude;
         vec1 := arg1.orientation;
       ELSE
         mag1 := 1.0;
         vec1 := arg1;
       END_IF;
       IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.VECTOR' IN TYPEOF(arg2) THEN

         mag2 := arg2.magnitude;
         vec2 := arg2.orientation;
       ELSE
         mag2 := 1.0;
         vec2 := arg2;
       END_IF;
       vec1 := normalise (vec1);
       vec2 := normalise (vec2);
       ndim := SIZEOF(vec1.direction_ratios);
       mag := 0.0;
       res := dummy_gri || direction(vec1.direction_ratios);
       REPEAT i := 1 TO ndim;
         res.direction_ratios[i] := mag1*vec1.direction_ratios[i] +
                                     mag2*vec2.direction_ratios[i];
         mag := mag + (res.direction_ratios[i]*res.direction_ratios[i]);
       END_REPEAT;
       IF (mag > 0.0 ) THEN
       result := dummy_gri || vector( res, SQRT(mag));
       ELSE
         result := dummy_gri || vector( vec1,  0.0);
       END_IF;
     END;
   END_IF;
   RETURN (result);

 END_FUNCTION;



FUNCTION base_axis(dim : INTEGER; axis1, axis2, axis3 : direction) :
                                                 LIST [2:3] OF 
direction;
  LOCAL
    u      : LIST [2:3] OF direction;
    factor : REAL;
    d1, d2 : direction;
  END_LOCAL;
  
  IF (dim = 3) THEN
    d1 := NVL(normalise(axis3),  dummy_gri || direction([0.0,0.0,1.0]));
    d2 := first_proj_axis(d1,axis1);
    u := [d2, second_proj_axis(d1,d2,axis2), d1];
  ELSE
     IF EXISTS(axis1) THEN
      d1 := normalise(axis1);
      u := [d1, orthogonal_complement(d1)];
      IF EXISTS(axis2) THEN
        factor := dot_product(axis2,u[2]);
        IF (factor < 0.0) THEN
          u[2].direction_ratios[1] := -u[2].direction_ratios[1];
          u[2].direction_ratios[2] := -u[2].direction_ratios[2];
        END_IF;
      END_IF;
    ELSE
      IF EXISTS(axis2) THEN
        d1 := normalise(axis2);
        u := [orthogonal_complement(d1), d1]; 
        u[1].direction_ratios[1] := -u[1].direction_ratios[1];
        u[1].direction_ratios[2] := -u[1].direction_ratios[2];
      ELSE
        u := [dummy_gri || direction([1.0, 0.0]), dummy_gri ||
                                                direction([0.0, 1.0])];
      END_IF;
    END_IF;
  END_IF;
  RETURN(u);

END_FUNCTION;



 FUNCTION second_proj_axis(z_axis, x_axis, arg: direction) : direction;
   LOCAL
     y_axis : vector;
     v      : direction;
     temp   : vector;
   END_LOCAL;
   
   IF NOT EXISTS(arg) THEN
     v := dummy_gri || direction([0.0,1.0,0.0]);
   ELSE
     v := arg;
   END_IF;
   
   temp   := scalar_times_vector(dot_product(v, z_axis), z_axis);
   y_axis := vector_difference(v, temp);
   temp   := scalar_times_vector(dot_product(v, x_axis), x_axis);
   y_axis := vector_difference(y_axis, temp);
   y_axis := normalise(y_axis);
   RETURN(y_axis.orientation);

 END_FUNCTION;

  

FUNCTION gbsf_check_point 
( 
pnt : point ) : BOOLEAN ;
 IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CARTESIAN_POINT' IN TYPEOF (pnt) THEN 
 RETURN (TRUE);
 ELSE 
 IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.POINT_ON_CURVE' IN TYPEOF (pnt) THEN 
 RETURN (gbsf_check_curve(pnt\point_on_curve.basis_curve));
 ELSE 
 IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.POINT_ON_SURFACE' IN TYPEOF (pnt) THEN 
 RETURN (gbsf_check_surface(pnt\point_on_surface.basis_surface));
 ELSE 
 IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.DEGENERATE_PCURVE' IN TYPEOF (pnt) THEN 

 RETURN (gbsf_check_curve(pnt\degenerate_pcurve.reference_to_curve\representation.items[1]) AND gbsf_check_surface(pnt\degenerate_pcurve.basis_surface));
 END_IF ;
 END_IF ;
 END_IF ;
 END_IF ;
 RETURN (FALSE);

 END_FUNCTION;

FUNCTION gbsf_check_curve 
( 
cv : curve ) : BOOLEAN ;
 IF SIZEOF ([ 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.BOUNDED_CURVE', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CONIC', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CURVE_REPLICA', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.LINE', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.OFFSET_CURVE_3D' ] * TYPEOF (cv)) > 1 THEN 
 RETURN (FALSE);
 ELSE 
 IF SIZEOF ([ 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CIRCLE', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ELLIPSE' ] * TYPEOF (cv)) = 1 THEN 
 RETURN (TRUE);
 ELSE 
 IF ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.B_SPLINE_CURVE' IN TYPEOF (cv)) AND (cv\b_spline_curve.self_intersect = FALSE) OR (cv\b_spline_curve.self_intersect = UNKNOWN) THEN 
 RETURN (TRUE);
 ELSE 
 IF ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.COMPOSITE_CURVE' IN TYPEOF (cv)) AND (cv\composite_curve.self_intersect = FALSE) OR (cv\composite_curve.self_intersect = UNKNOWN) THEN 
 RETURN ( SIZEOF ( 
QUERY ( seg <* cv\composite_curve.segments| NOT gbsf_check_curve(seg.parent_curve) )) = 0);
 ELSE 
 IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CURVE_REPLICA' IN TYPEOF (cv) THEN 
 RETURN (gbsf_check_curve(cv\curve_replica.parent_curve));
 ELSE 
 IF (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.OFFSET_CURVE_3D' IN TYPEOF (cv)) AND ((cv\offset_curve_3d.self_intersect = FALSE) OR (cv\offset_curve_3d.self_intersect = UNKNOWN))) AND NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.POLYLINE' IN TYPEOF (cv.basis_curve)) THEN 
 RETURN (gbsf_check_curve(cv\offset_curve_3d.basis_curve));
 ELSE 
 IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PCURVE' IN TYPEOF (cv) THEN 
 RETURN (gbsf_check_curve(cv\pcurve.reference_to_curve\representation.items[1]) AND gbsf_check_surface(cv\pcurve.basis_surface));
 ELSE 
 IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.POLYLINE' IN TYPEOF (cv) THEN 
 IF SIZEOF (cv\polyline.points) >= 3 THEN 
 RETURN (TRUE);
 END_IF ;
 ELSE 
 IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SURFACE_CURVE' IN TYPEOF (cv) THEN 
 IF gbsf_check_curve(cv\surface_curve.curve_3d) THEN 
 REPEAT i := 1 TO SIZEOF (cv\surface_curve.associated_geometry);
 IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SURFACE' IN TYPEOF (cv\surface_curve.associated_geometry[i]) THEN 
 IF NOT gbsf_check_surface(cv\surface_curve.associated_geometry[i]) THEN 
 RETURN (FALSE);
 END_IF ;
 ELSE 
 IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PCURVE' IN TYPEOF (cv\surface_curve.associated_geometry[i]) THEN 
 IF NOT gbsf_check_curve(cv\surface_curve.associated_geometry[i]) THEN 
 RETURN (FALSE);
 END_IF ;
 END_IF ;
 END_IF ;
 END_REPEAT ;
 RETURN (TRUE);
 END_IF ;
 ELSE 
 IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.TRIMMED_CURVE' IN TYPEOF (cv) THEN 
 IF SIZEOF ([ 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.LINE', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PARABOLA', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.HYPERBOLA' ] * TYPEOF (cv\trimmed_curve.basis_curve)) = 1 THEN 

 RETURN (TRUE);
 ELSE 
 RETURN (gbsf_check_curve(cv\trimmed_curve.basis_curve));
 END_IF ;
 END_IF ;
 END_IF ;
 END_IF ;
 END_IF ;
 END_IF ;
 END_IF ;
 END_IF ;
 END_IF ;
 END_IF ;
 END_IF ;
 RETURN (FALSE);

 END_FUNCTION;

FUNCTION gbsf_check_surface 
( 
sf : surface ) : BOOLEAN ;
 IF ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.B_SPLINE_SURFACE' IN TYPEOF (sf)) AND (sf\b_spline_surface.self_intersect = FALSE) OR (sf\b_spline_surface.self_intersect = UNKNOWN) THEN 
 RETURN (TRUE);
 ELSE 
 IF SIZEOF ([ 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SPHERICAL_SURFACE', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.TOROIDAL_SURFACE' ] * TYPEOF (sf)) = 1 THEN 
 RETURN (TRUE);
 ELSE 
 IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CURVE_BOUNDED_SURFACE' IN TYPEOF (sf) THEN 
 IF SIZEOF ([ 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CONICAL_SURFACE', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CYLINDRICAL_SURFACE', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PLANE' ] * TYPEOF (sf\curve_bounded_surface.basis_surface)) = 1 THEN 
 RETURN ( SIZEOF ( 
QUERY ( bcurve <* sf\curve_bounded_surface.boundaries| NOT gbsf_check_curve(bcurve) )) = 0);
 ELSE 
 IF gbsf_check_surface(sf\curve_bounded_surface.basis_surface) THEN 
 RETURN ( SIZEOF ( 
QUERY ( bcurve <* sf\curve_bounded_surface.boundaries| NOT gbsf_check_curve(bcurve) )) = 0);
 END_IF ;
 END_IF ;
 ELSE 
 IF ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.OFFSET_SURFACE' IN TYPEOF (sf)) AND (sf\offset_surface.self_intersect = FALSE) OR (sf\offset_surface.self_intersect = UNKNOWN) THEN 
 RETURN (gbsf_check_surface(sf\offset_surface.basis_surface));
 ELSE 
 IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.RECTANGULAR_COMPOSITE_SURFACE' IN TYPEOF (sf) THEN 
 REPEAT i := 1 TO SIZEOF (sf\rectangular_composite_surface.segments);
 REPEAT j := 1 TO SIZEOF (sf\rectangular_composite_surface.segments[i]);
 IF NOT gbsf_check_surface(sf\rectangular_composite_surface.segments[i][j].parent_surface) THEN 
 RETURN (FALSE);
 END_IF ;
 END_REPEAT ;
 END_REPEAT ;
 RETURN (TRUE);
 ELSE 
 IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.RECTANGULAR_TRIMMED_SURFACE' IN TYPEOF (sf) THEN 
 IF SIZEOF ([ 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CONICAL_SURFACE', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CYLINDRICAL_SURFACE', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PLANE' ] * TYPEOF (sf\rectangular_trimmed_surface.basis_surface)) = 1 THEN 
 RETURN (TRUE);
 ELSE 
 RETURN (gbsf_check_surface(sf\rectangular_trimmed_surface.basis_surface));
 END_IF ;
 ELSE 
 IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SURFACE_REPLICA' IN TYPEOF (sf) THEN 
 RETURN (gbsf_check_surface(sf\surface_replica.parent_surface));
 ELSE 
 IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SWEPT_SURFACE' IN TYPEOF (sf) THEN 

 RETURN (gbsf_check_curve(sf\swept_surface.swept_curve));
 END_IF ;
 END_IF ;
 END_IF ;
 END_IF ;
 END_IF ;
 END_IF ;
 END_IF ;
 END_IF ;
 RETURN (FALSE);

 END_FUNCTION;

  

FUNCTION valid_geometrically_bounded_wf_curve 
( 
crv : curve ) : BOOLEAN ;
 IF SIZEOF ([ 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.POLYLINE', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.B_SPLINE_CURVE', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ELLIPSE', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CIRCLE' ] * TYPEOF (crv)) = 1 THEN 
 RETURN (TRUE);
 ELSE 
 IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.TRIMMED_CURVE' IN TYPEOF (crv) THEN 
 IF SIZEOF ([ 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.LINE', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PARABOLA', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.HYPERBOLA' ] * TYPEOF (crv\trimmed_curve.basis_curve)) = 1 THEN 
 RETURN (TRUE);
 ELSE 
 RETURN (valid_geometrically_bounded_wf_curve(crv\trimmed_curve.basis_curve));
 END_IF ;
 ELSE 
 IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.OFFSET_CURVE_3D' IN TYPEOF (crv) THEN 
 RETURN (valid_geometrically_bounded_wf_curve(crv\offset_curve_3d.basis_curve));
 ELSE 
 IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CURVE_REPLICA' IN TYPEOF (crv) THEN 
 RETURN (valid_geometrically_bounded_wf_curve(crv\curve_replica.parent_curve));
 ELSE 
 IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.COMPOSITE_CURVE' IN TYPEOF (crv) THEN 

 RETURN ( SIZEOF ( 
QUERY ( ccs <* crv\composite_curve.segments| NOT valid_geometrically_bounded_wf_curve(ccs.parent_curve) )) = 0);
 END_IF ;
 END_IF ;
 END_IF ;
 END_IF ;
 END_IF ;
 RETURN (FALSE);

 END_FUNCTION;

FUNCTION valid_geometrically_bounded_wf_point 
( 
pnt : point ) : BOOLEAN ;
 IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CARTESIAN_POINT' IN TYPEOF (pnt) THEN 
 RETURN (TRUE);
 ELSE 
 IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.POINT_ON_CURVE' IN TYPEOF (pnt) THEN 
 RETURN (valid_geometrically_bounded_wf_curve(pnt\point_on_curve.basis_curve));
 ELSE 
 IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.POINT_REPLICA' IN TYPEOF (pnt) THEN 

 RETURN (valid_geometrically_bounded_wf_point(pnt\point_replica.parent_pt));
 END_IF ;
 END_IF ;
 END_IF ;
 RETURN (FALSE);

 END_FUNCTION;



FUNCTION msf_surface_check (surf : surface) : BOOLEAN;

(* This function varifies the validity of a surface in the
   context of a manifold surface model.
*)

  (* elementary_surfaces are valid surface types
   *)
  IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ELEMENTARY_SURFACE' IN TYPEOF(surf) THEN
    RETURN(TRUE);
  ELSE 

    (* a swept_surface shall have a valid sweeping curve
     *)
    IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SWEPT_SURFACE' IN TYPEOF (surf) THEN 
      RETURN (msf_curve_check(surf\swept_surface.swept_curve));  
    ELSE 
 
      (* an offset_surface shall not self-intersect and shall
         reference a valid surface
       *)
      IF (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.OFFSET_SURFACE' IN TYPEOF (surf)) AND
        (surf\offset_surface.self_intersect = FALSE) OR 
        (surf\offset_surface.self_intersect = UNKNOWN)) THEN
        RETURN (msf_surface_check(surf\offset_surface.basis_surface));
      ELSE 
 
        (* a surface_replica shall have a valid parent surface
         *)
        IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SURFACE_REPLICA' IN TYPEOF(surf) THEN 
          RETURN(msf_surface_check(surf\surface_replica.parent_surface)); 
        ELSE

          (* a b_spline_surface shall not self-intersect
           *)
          IF (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.B_SPLINE_SURFACE' IN TYPEOF(surf)) AND

            (surf\b_spline_surface.self_intersect = FALSE) OR
            (surf\b_spline_surface.self_intersect = UNKNOWN)) THEN
            RETURN(TRUE);
          END_IF;
        END_IF; 
      END_IF; 
    END_IF; 
  END_IF; 
  RETURN(FALSE); 

END_FUNCTION;



FUNCTION msf_curve_check (cv : representation_item) : BOOLEAN;  
 
(* This function varifies the validity of a curve in the context of a
   manifold surface model. Representation_items are
   valid input, however, they are supposed to be curves; otherwise
   this function will return false.
*)

(* complex subtypes of curve that are both bounded_curve and
   oneof conic, curve_replica, line, or offset_curve_3d are not
   valid
*)
IF SIZEOF (['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.BOUNDED_CURVE',
  'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CONIC',
  'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CURVE_REPLICA', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.LINE',
  'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.OFFSET_CURVE_3D'] * TYPEOF(cv)) > 1 THEN
  RETURN(FALSE);
END_IF;

(* b_spline_curves shall not self-intersect
 *)
IF (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.B_SPLINE_CURVE' IN TYPEOF (cv)) AND
  (cv\b_spline_curve.self_intersect = FALSE)OR
  (cv\b_spline_curve.self_intersect = UNKNOWN)) THEN
  RETURN(TRUE);
ELSE

  (* conics and lines are valid curve types
   *)
  IF SIZEOF (['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CONIC', 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.LINE'] 
    * TYPEOF (cv)) = 1 THEN
    RETURN(TRUE);
  ELSE

    (* a curve_replica shall reference a valid curve
     *)
    IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CURVE_REPLICA' IN TYPEOF(cv) THEN
      RETURN (msf_curve_check(cv\curve_replica.parent_curve)); 
    ELSE 
 
      (* an offset_curve_3d shall not self-intersect and
         shall reference a valid curve; a polyline is not a
         valid basis_curve
       *)
      IF (('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.OFFSET_CURVE_3D' IN TYPEOF (cv))
        AND
        ((cv\offset_curve_3d.self_intersect = FALSE) OR
        (cv\offset_curve_3d.self_intersect = UNKNOWN))
        AND
        (NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.POLYLINE' IN TYPEOF
        (cv\offset_curve_3d.basis_curve)))) THEN
        RETURN (msf_curve_check(cv\offset_curve_3d.basis_curve)); 
      ELSE 
 
        (* a pcurve shall reference a valid curve and a valid
           basis_surface
         *)
        IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PCURVE' IN TYPEOF(cv) THEN 
          RETURN ((msf_curve_check
          (cv\pcurve.reference_to_curve\representation.items[1])) AND
          (msf_surface_check(cv\pcurve.basis_surface)));
        ELSE 
 
          (* a surface_curve references a curve_3d and one or
             two pcurves or one or two surfaces or one of
             each; all of these references shall be valid
           *)
          IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SURFACE_CURVE' IN TYPEOF(cv) THEN 

            (* if the curve reference is correct, check also the rest
             *)
            IF msf_curve_check(cv\surface_curve.curve_3d) THEN
              REPEAT i := 1 TO SIZEOF
              (cv\surface_curve.associated_geometry);

                (* do for one or two associated_geometrys:
                 *)
                IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SURFACE' IN 
                  TYPEOF (cv\surface_curve.associated_geometry[i]) THEN  
                  IF NOT msf_surface_check
                    (cv\surface_curve.associated_geometry[i]) THEN  
                    RETURN(FALSE);  
                  END_IF;  
                ELSE  
                  IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PCURVE' IN TYPEOF 
                    (cv\surface_curve.associated_geometry[i]) THEN  
                    IF NOT msf_curve_check
                      (cv\surface_curve.associated_geometry[i]) THEN 
                      RETURN(FALSE);  
                    END_IF;  
                  END_IF;  
                END_IF; 
              END_REPEAT;  
              RETURN(TRUE);
            END_IF; 
          ELSE

            (* a polyline shall have at least 3 points
             *)
            IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.POLYLINE' IN TYPEOF(cv) THEN

              IF (SIZEOF (cv\polyline.points) >= 3) THEN RETURN (TRUE);
              END_IF;
            END_IF;
          END_IF; 
        END_IF; 
      END_IF; 
    END_IF; 
  END_IF; 
END_IF; 
(* FALSE is returned if the input parameter cv is not a valid curve.
 *)
RETURN (FALSE); 

END_FUNCTION;



FUNCTION acyclic_product_category_relationship
 (relation : product_category_relationship; children : SET OF product_category) : BOOLEAN; 
LOCAL
      x : SET OF product_category_relationship;
      local_children : SET OF product_category;
    END_LOCAL;

    REPEAT i := 1 TO HIINDEX(children);
      IF relation.category :=: children[i] THEN
        RETURN (FALSE);
      END_IF;
    END_REPEAT;
    x := bag_to_set(USEDIN(relation.category, 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'PRODUCT_CATEGORY_RELATIONSHIP.SUB_CATEGORY'));

    local_children := children + relation.category;
    IF SIZEOF(x) > 0 THEN
      REPEAT i := 1 TO HIINDEX(x);
        IF NOT acyclic_product_category_relationship(x[i], local_children) THEN
          RETURN (FALSE);
        END_IF;
      END_REPEAT;
    END_IF;

RETURN (TRUE);      END_FUNCTION;



FUNCTION valid_units
 (m : measure_with_unit) : BOOLEAN; 
 IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.LENGTH_MEASURE' IN TYPEOF ( m.value_component ) THEN
    IF derive_dimensional_exponents ( m.unit_component ) <>
       dimensional_exponents ( 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0 ) THEN
      RETURN (FALSE);
    END_IF;
  END_IF;
  IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.MASS_MEASURE' IN TYPEOF ( m.value_component ) THEN
    IF derive_dimensional_exponents ( m.unit_component ) <>
       dimensional_exponents ( 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0 ) THEN
      RETURN (FALSE);
    END_IF;
  END_IF;
  IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.TIME_MEASURE' IN TYPEOF ( m.value_component ) THEN
    IF derive_dimensional_exponents ( m.unit_component ) <>
       dimensional_exponents ( 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0 ) THEN
      RETURN (FALSE);
    END_IF;
  END_IF;
  IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ELECTRIC_CURRENT_MEASURE' 
  IN TYPEOF ( m.value_component ) THEN
    IF derive_dimensional_exponents ( m.unit_component ) <>
       dimensional_exponents ( 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0 ) THEN
      RETURN (FALSE);
    END_IF;
  END_IF;
  IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.THERMODYNAMIC_TEMPERATURE_MEASURE'
  IN TYPEOF ( m.value_component ) THEN
    IF derive_dimensional_exponents ( m.unit_component ) <>
       dimensional_exponents ( 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0 ) THEN
      RETURN (FALSE);
    END_IF;
  END_IF;
  IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CELSIUS_TEMPERATURE_MEASURE'
  IN TYPEOF ( m.value_component ) THEN
    IF derive_dimensional_exponents ( m.unit_component ) <>
       dimensional_exponents ( 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0 ) THEN
      RETURN (FALSE);
    END_IF;
  END_IF;
  IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.AMOUNT_OF_SUBSTANCE_MEASURE' 
  IN TYPEOF ( m.value_component ) THEN
    IF derive_dimensional_exponents ( m.unit_component ) <>
       dimensional_exponents ( 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0 ) THEN
      RETURN (FALSE);
    END_IF;
  END_IF;
  IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.LUMINOUS_INTENSITY_MEASURE' 
  IN TYPEOF ( m.value_component ) THEN
    IF derive_dimensional_exponents ( m.unit_component ) <>
       dimensional_exponents ( 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0 ) THEN
      RETURN (FALSE);
    END_IF;
  END_IF;
  IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PLANE_ANGLE_MEASURE' IN TYPEOF ( m.value_component ) THEN
    IF derive_dimensional_exponents ( m.unit_component ) <>
       dimensional_exponents ( 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0 ) THEN
      RETURN (FALSE);
    END_IF;
  END_IF;
  IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SOLID_ANGLE_MEASURE' IN TYPEOF ( m.value_component ) THEN
    IF derive_dimensional_exponents ( m.unit_component ) <>
       dimensional_exponents ( 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0 ) THEN
      RETURN (FALSE);
    END_IF;
  END_IF;
  IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.AREA_MEASURE' IN TYPEOF ( m.value_component ) THEN
    IF derive_dimensional_exponents ( m.unit_component ) <>
       dimensional_exponents ( 2.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0 ) THEN
      RETURN (FALSE);
    END_IF;
  END_IF;
  IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.VOLUME_MEASURE' IN TYPEOF ( m.value_component ) THEN
    IF derive_dimensional_exponents ( m.unit_component ) <>
       dimensional_exponents ( 3.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0 ) THEN
      RETURN (FALSE);
    END_IF;
  END_IF;
  IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.RATIO_MEASURE' IN TYPEOF ( m.value_component ) THEN
    IF derive_dimensional_exponents ( m.unit_component ) <>
       dimensional_exponents ( 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0 ) THEN
      RETURN (FALSE);
    END_IF;
  END_IF;
  IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.POSITIVE_LENGTH_MEASURE' 
  IN TYPEOF ( m.value_component ) THEN
    IF derive_dimensional_exponents ( m.unit_component ) <>
       dimensional_exponents ( 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0 ) THEN
      RETURN (FALSE);
    END_IF;
  END_IF;
  IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.POSITIVE_PLANE_ANGLE_MEASURE' 

  IN TYPEOF ( m.value_component ) THEN
    IF derive_dimensional_exponents ( m.unit_component ) <>
       dimensional_exponents ( 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0 ) THEN
      RETURN (FALSE);
    END_IF;
  END_IF;
  RETURN (TRUE);

		      END_FUNCTION;



FUNCTION derive_dimensional_exponents
 (x : unit) : dimensional_exponents; 
  LOCAL
    result : dimensional_exponents := dimensional_exponents(0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0);
  END_LOCAL;

  IF 'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.DERIVED_UNIT' IN TYPEOF(x) THEN

    REPEAT i := LOINDEX(x.elements) TO HIINDEX(x.elements);
      result.length_exponent := result.length_exponent + (x.elements[i].exponent * x.elements[i].unit.dimensions.length_exponent);
      result.mass_exponent := result.mass_exponent + (x.elements[i].exponent * x.elements[i].unit.dimensions.mass_exponent);
      result.time_exponent := result.time_exponent + (x.elements[i].exponent * x.elements[i].unit.dimensions.time_exponent);
      result.electric_current_exponent := result.electric_current_exponent + (x.elements[i].exponent * x.elements[i].unit.dimensions.electric_current_exponent);
      result.thermodynamic_temperature_exponent := result.thermodynamic_temperature_exponent + (x.elements[i].exponent * x.elements[i].unit.dimensions.thermodynamic_temperature_exponent);
      result.amount_of_substance_exponent := result.amount_of_substance_exponent + (x.elements[i].exponent * x.elements[i].unit.dimensions.amount_of_substance_exponent);
      result.luminous_intensity_exponent := result.luminous_intensity_exponent + (x.elements[i].exponent * x.elements[i].unit.dimensions.luminous_intensity_exponent);
    END_REPEAT;
  ELSE
    result := x.dimensions;
  END_IF;
  RETURN (result);

      END_FUNCTION;



FUNCTION dimensions_for_si_unit
 (n : si_unit_name) : dimensional_exponents; 
 CASE n OF
    metre          : RETURN (dimensional_exponents
                          (1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0));
    gram           : RETURN (dimensional_exponents
                         (0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0));
    second         : RETURN (dimensional_exponents
                         (0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0));
    ampere         : RETURN (dimensional_exponents
                         (0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0));
    kelvin         : RETURN (dimensional_exponents
                         (0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0));
    mole           : RETURN (dimensional_exponents
                         (0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0));
    candela        : RETURN (dimensional_exponents
                         (0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0));
    radian         : RETURN (dimensional_exponents
                           (0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0));
    steradian      : RETURN (dimensional_exponents
                         (0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0));
    hertz          : RETURN (dimensional_exponents
                         (0.0, 0.0, -1.0, 0.0, 0.0, 0.0, 0.0));
    newton         : RETURN (dimensional_exponents
                         (1.0, 1.0, -2.0, 0.0, 0.0, 0.0, 0.0));
    pascal         : RETURN (dimensional_exponents
                         (-1.0, 1.0, -2.0, 0.0, 0.0, 0.0, 0.0));
    joule          : RETURN (dimensional_exponents
                         (2.0, 1.0, -2.0, 0.0, 0.0, 0.0, 0.0));
    watt           : RETURN (dimensional_exponents
                         (2.0, 1.0, -3.0, 0.0, 0.0, 0.0, 0.0));
    coulomb        : RETURN (dimensional_exponents
                         (0.0, 0.0, 1.0, 1.0, 0.0, 0.0, 0.0));
    volt           : RETURN (dimensional_exponents
                         (2.0, 1.0, -3.0, -1.0, 0.0, 0.0, 0.0));
    farad          : RETURN (dimensional_exponents
                         (-2.0, -1.0, 4.0, 1.0, 0.0, 0.0, 0.0));
    ohm            : RETURN (dimensional_exponents
                         (2.0, 1.0, -3.0, -2.0, 0.0, 0.0, 0.0));
    siemens        : RETURN (dimensional_exponents
                         (-2.0, -1.0, 3.0, 2.0, 0.0, 0.0, 0.0));
    weber          : RETURN (dimensional_exponents
                         (2.0, 1.0, -2.0, -1.0, 0.0, 0.0, 0.0));
    tesla          : RETURN (dimensional_exponents
                         (0.0, 1.0, -2.0, -1.0, 0.0, 0.0, 0.0));
    henry          : RETURN (dimensional_exponents
                         (2.0, 1.0, -2.0, -2.0, 0.0, 0.0, 0.0));
    degree_Celsius : RETURN (dimensional_exponents
                         (0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0));
    lumen          : RETURN (dimensional_exponents
                         (0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0));
    lux            : RETURN (dimensional_exponents
                         (-2.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0));
    becquerel      : RETURN (dimensional_exponents
                         (0.0, 0.0, -1.0, 0.0, 0.0, 0.0, 0.0));
    gray           : RETURN (dimensional_exponents
                         (2.0, 0.0, -2.0, 0.0, 0.0, 0.0, 0.0));
    sievert        : RETURN (dimensional_exponents
                         (2.0, 0.0, -2.0, 0.0, 0.0, 0.0, 0.0));
    OTHERWISE      : RETURN (?);
  END_CASE;

		      END_FUNCTION;



 FUNCTION constraints_param_b_spline(degree, up_knots, up_cp : INTEGER;
                                               knot_mult : LIST OF INTEGER;
                        knots : LIST OF parameter_value) : BOOLEAN;
   LOCAL
     result  : BOOLEAN := TRUE;
     k, sum  : INTEGER;
   END_LOCAL;
   
   (* Find sum of knot multiplicities. *)
   sum := knot_mult[1];
   
   REPEAT i := 2 TO up_knots;
     sum := sum + knot_mult[i];
   END_REPEAT;
   
   (* Check limits holding for all B-spline parametrisations *)
   IF (degree < 1) OR (up_knots < 2) OR (up_cp < degree) OR
         (sum <> (degree + up_cp + 2)) THEN
     result := FALSE;
     RETURN(result);
   END_IF;
   
   k := knot_mult[1];
   
   IF (k < 1) OR (k > degree + 1) THEN
     result := FALSE;
     RETURN(result);
   END_IF;
      
   REPEAT i := 2 TO up_knots;
     IF (knot_mult[i] < 1) OR (knots[i] <= knots[i-1]) THEN
       result := FALSE;
       RETURN(result);
     END_IF;
        
     k := knot_mult[i];
     
     IF (i < up_knots) AND (k > degree) THEN
       result := FALSE;
       RETURN(result);
     END_IF;
        
     IF (i = up_knots) AND (k > degree + 1) THEN
       result := FALSE;
       RETURN(result);
     END_IF;
   END_REPEAT;
   RETURN(result);

 END_FUNCTION;



 FUNCTION constraints_composite_curve_on_surface
               (c: composite_curve_on_surface) : BOOLEAN;
   LOCAL
     n_segments : INTEGER := SIZEOF(c.segments);
   END_LOCAL;
        
   REPEAT k := 1 TO n_segments;
     IF (NOT('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.PCURVE' IN 
           TYPEOF(c\composite_curve.segments[k].parent_curve))) AND
        (NOT('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.SURFACE_CURVE' IN 
           TYPEOF(c\composite_curve.segments[k].parent_curve))) AND
        (NOT('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.COMPOSITE_CURVE_ON_SURFACE' IN

           TYPEOF(c\composite_curve.segments[k].parent_curve)))  THEN
       RETURN (FALSE);
     END_IF;
   END_REPEAT;
   RETURN(TRUE);

 END_FUNCTION;



 FUNCTION curve_weights_positive(b: rational_b_spline_curve) : BOOLEAN;
   LOCAL
     result : BOOLEAN := TRUE;
   END_LOCAL;

   REPEAT i := 0 TO b.upper_index_on_control_points;
     IF b.weights[i] <= 0.0  THEN
       result := FALSE;
       RETURN(result);
     END_IF;
   END_REPEAT;
   RETURN(result);

 END_FUNCTION;



 FUNCTION surface_weights_positive(b: rational_b_spline_surface) : BOOLEAN;
   LOCAL
     result        : BOOLEAN := TRUE;
   END_LOCAL;
   
   REPEAT i := 0 TO b.u_upper;
     REPEAT j := 0 TO b.v_upper;
       IF (b.weights[i][j] <= 0.0)  THEN
         result := FALSE;
         RETURN(result);
       END_IF;
     END_REPEAT;
   END_REPEAT;
   RETURN(result);

 END_FUNCTION;



 FUNCTION constraints_geometry_shell_based_surface_model
             (m: shell_based_surface_model): BOOLEAN;
   LOCAL
     result : BOOLEAN := TRUE;
   END_LOCAL;
   
   REPEAT j := 1 TO SIZEOF(m.sbsm_boundary);
     IF (NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.OPEN_SHELL' IN
                     TYPEOF(m.sbsm_boundary[j])) AND
        (NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.CLOSED_SHELL' IN

           TYPEOF(m.sbsm_boundary[j]))))
     THEN
       result := FALSE;
       RETURN(result);
       (* A surface model is composed of OPEN_ and CLOSED_SHELLs. *)
     END_IF;
   END_REPEAT;
   RETURN(result);

 END_FUNCTION;



 FUNCTION constraints_geometry_shell_based_wireframe_model
                       (m : shell_based_wireframe_model) : BOOLEAN;
   LOCAL
     result : BOOLEAN := TRUE;
   END_LOCAL;

   REPEAT j := 1 TO SIZEOF(m.sbwm_boundary);
     IF (NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.WIRE_SHELL' IN
                    TYPEOF(m.sbwm_boundary[j])) AND
        (NOT ('CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.VERTEX_SHELL' IN

                      TYPEOF(m.sbwm_boundary[j]))))
     THEN
       result := FALSE;
       RETURN(result);
       (* A wireframe model is composed of WIRE_ and VERTEX_SHELLs *)
     END_IF;
   END_REPEAT;
   RETURN(result);

 END_FUNCTION;



FUNCTION version_assignment_is_valid
 (aia : applied_identification_assignment) : BOOLEAN; 
LOCAL
  item: identification_item;
  role: identification_role;
END_LOCAL;

role:= aia.role;
IF role.name='version' THEN
  REPEAT i:=LOINDEX(aia.items) TO HIINDEX(aia.items);
    item:= aia.items[i];

    IF (SIZEOF(['CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.' + 'VERSIONABLE_ITEM']*TYPEOF(item))=0) THEN

	RETURN(FALSE);
    END_IF;
  END_REPEAT;
  RETURN(TRUE);

ELSE
  RETURN(TRUE);
END_IF;

      END_FUNCTION;



RULE version_assignments_are_valid FOR 
(applied_identification_assignment);
WHERE
  WR1: SIZEOF(QUERY(aia <* applied_identification_assignment | NOT version_assignment_is_valid(aia)))=0;
END_RULE;




RULE restrict_language_assignment_per_attribute FOR (attribute_language_assignment);
WHERE
WR1: SIZEOF ( QUERY ( ala1 <* attribute_language_assignment |
	SIZEOF(QUERY( it <* ala1.items |
	   SIZEOF ( QUERY ( ala2 <* USEDIN ( it ,'CONFIGURATION_CONTROL_3D_DESIGN_ED2_MIM.ATTRIBUTE_LANGUAGE_ASSIGNMENT.ITEMS' ) | 

		( ala1\attribute_classification_assignment.attribute_name = ala2\attribute_classification_assignment.attribute_name ) AND 
		( ala1\attribute_classification_assignment.assigned_class :=: ala2\attribute_classification_assignment.assigned_class )
		 )) >1 
	   )) >0 
	)) =0;
END_RULE;


END_SCHEMA;

